function Hp(i,r){for(var n=0;n<r.length;n++){const o=r[n];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in i)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(i,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();function hc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Tl={exports:{}},Un={},Rl={exports:{}},xe={};var ph;function qp(){if(ph)return xe;ph=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function k(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function j(R,D,ae){this.props=R,this.context=D,this.refs=x,this.updater=ae||S}j.prototype.isReactComponent={},j.prototype.setState=function(R,D){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,D,"setState")},j.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function O(){}O.prototype=j.prototype;function M(R,D,ae){this.props=R,this.context=D,this.refs=x,this.updater=ae||S}var $=M.prototype=new O;$.constructor=M,_($,j.prototype),$.isPureReactComponent=!0;var J=Array.isArray,se=Object.prototype.hasOwnProperty,Q={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function fe(R,D,ae){var me,ve={},ge=null,ke=null;if(D!=null)for(me in D.ref!==void 0&&(ke=D.ref),D.key!==void 0&&(ge=""+D.key),D)se.call(D,me)&&!ie.hasOwnProperty(me)&&(ve[me]=D[me]);var je=arguments.length-2;if(je===1)ve.children=ae;else if(1<je){for(var Se=Array(je),at=0;at<je;at++)Se[at]=arguments[at+2];ve.children=Se}if(R&&R.defaultProps)for(me in je=R.defaultProps,je)ve[me]===void 0&&(ve[me]=je[me]);return{$$typeof:i,type:R,key:ge,ref:ke,props:ve,_owner:Q.current}}function _e(R,D){return{$$typeof:i,type:R.type,key:D,ref:R.ref,props:R.props,_owner:R._owner}}function De(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function we(R){var D={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ae){return D[ae]})}var Ee=/\/+/g;function he(R,D){return typeof R=="object"&&R!==null&&R.key!=null?we(""+R.key):D.toString(36)}function w(R,D,ae,me,ve){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var ke=!1;if(R===null)ke=!0;else switch(ge){case"string":case"number":ke=!0;break;case"object":switch(R.$$typeof){case i:case r:ke=!0}}if(ke)return ke=R,ve=ve(ke),R=me===""?"."+he(ke,0):me,J(ve)?(ae="",R!=null&&(ae=R.replace(Ee,"$&/")+"/"),w(ve,D,ae,"",function(at){return at})):ve!=null&&(De(ve)&&(ve=_e(ve,ae+(!ve.key||ke&&ke.key===ve.key?"":(""+ve.key).replace(Ee,"$&/")+"/")+R)),D.push(ve)),1;if(ke=0,me=me===""?".":me+":",J(R))for(var je=0;je<R.length;je++){ge=R[je];var Se=me+he(ge,je);ke+=w(ge,D,ae,Se,ve)}else if(Se=k(R),typeof Se=="function")for(R=Se.call(R),je=0;!(ge=R.next()).done;)ge=ge.value,Se=me+he(ge,je++),ke+=w(ge,D,ae,Se,ve);else if(ge==="object")throw D=String(R),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return ke}function C(R,D,ae){if(R==null)return R;var me=[],ve=0;return w(R,me,"","",function(ge){return D.call(ae,ge,ve++)}),me}function V(R){if(R._status===-1){var D=R._result;D=D(),D.then(function(ae){(R._status===0||R._status===-1)&&(R._status=1,R._result=ae)},function(ae){(R._status===0||R._status===-1)&&(R._status=2,R._result=ae)}),R._status===-1&&(R._status=0,R._result=D)}if(R._status===1)return R._result.default;throw R._result}var G={current:null},U={transition:null},H={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:U,ReactCurrentOwner:Q};function F(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:C,forEach:function(R,D,ae){C(R,function(){D.apply(this,arguments)},ae)},count:function(R){var D=0;return C(R,function(){D++}),D},toArray:function(R){return C(R,function(D){return D})||[]},only:function(R){if(!De(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},xe.Component=j,xe.Fragment=n,xe.Profiler=c,xe.PureComponent=M,xe.StrictMode=o,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,xe.act=F,xe.cloneElement=function(R,D,ae){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var me=_({},R.props),ve=R.key,ge=R.ref,ke=R._owner;if(D!=null){if(D.ref!==void 0&&(ge=D.ref,ke=Q.current),D.key!==void 0&&(ve=""+D.key),R.type&&R.type.defaultProps)var je=R.type.defaultProps;for(Se in D)se.call(D,Se)&&!ie.hasOwnProperty(Se)&&(me[Se]=D[Se]===void 0&&je!==void 0?je[Se]:D[Se])}var Se=arguments.length-2;if(Se===1)me.children=ae;else if(1<Se){je=Array(Se);for(var at=0;at<Se;at++)je[at]=arguments[at+2];me.children=je}return{$$typeof:i,type:R.type,key:ve,ref:ge,props:me,_owner:ke}},xe.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:d,_context:R},R.Consumer=R},xe.createElement=fe,xe.createFactory=function(R){var D=fe.bind(null,R);return D.type=R,D},xe.createRef=function(){return{current:null}},xe.forwardRef=function(R){return{$$typeof:m,render:R}},xe.isValidElement=De,xe.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:V}},xe.memo=function(R,D){return{$$typeof:v,type:R,compare:D===void 0?null:D}},xe.startTransition=function(R){var D=U.transition;U.transition={};try{R()}finally{U.transition=D}},xe.unstable_act=F,xe.useCallback=function(R,D){return G.current.useCallback(R,D)},xe.useContext=function(R){return G.current.useContext(R)},xe.useDebugValue=function(){},xe.useDeferredValue=function(R){return G.current.useDeferredValue(R)},xe.useEffect=function(R,D){return G.current.useEffect(R,D)},xe.useId=function(){return G.current.useId()},xe.useImperativeHandle=function(R,D,ae){return G.current.useImperativeHandle(R,D,ae)},xe.useInsertionEffect=function(R,D){return G.current.useInsertionEffect(R,D)},xe.useLayoutEffect=function(R,D){return G.current.useLayoutEffect(R,D)},xe.useMemo=function(R,D){return G.current.useMemo(R,D)},xe.useReducer=function(R,D,ae){return G.current.useReducer(R,D,ae)},xe.useRef=function(R){return G.current.useRef(R)},xe.useState=function(R){return G.current.useState(R)},xe.useSyncExternalStore=function(R,D,ae){return G.current.useSyncExternalStore(R,D,ae)},xe.useTransition=function(){return G.current.useTransition()},xe.version="18.3.1",xe}var xh;function ii(){return xh||(xh=1,Rl.exports=qp()),Rl.exports}var gh;function Kp(){if(gh)return Un;gh=1;var i=ii(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(m,p,v){var y,b={},k=null,S=null;v!==void 0&&(k=""+v),p.key!==void 0&&(k=""+p.key),p.ref!==void 0&&(S=p.ref);for(y in p)o.call(p,y)&&!d.hasOwnProperty(y)&&(b[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)b[y]===void 0&&(b[y]=p[y]);return{$$typeof:r,type:m,key:k,ref:S,props:b,_owner:c.current}}return Un.Fragment=n,Un.jsx=h,Un.jsxs=h,Un}var vh;function Gp(){return vh||(vh=1,Tl.exports=Kp()),Tl.exports}var s=Gp(),L=ii();const ai=hc(L),Jp=Hp({__proto__:null,default:ai},[L]);var ba={},Ol={exports:{}},mt={},Il={exports:{}},Pl={};var yh;function Qp(){return yh||(yh=1,(function(i){function r(U,H){var F=U.length;U.push(H);e:for(;0<F;){var R=F-1>>>1,D=U[R];if(0<c(D,H))U[R]=H,U[F]=D,F=R;else break e}}function n(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var H=U[0],F=U.pop();if(F!==H){U[0]=F;e:for(var R=0,D=U.length,ae=D>>>1;R<ae;){var me=2*(R+1)-1,ve=U[me],ge=me+1,ke=U[ge];if(0>c(ve,F))ge<D&&0>c(ke,ve)?(U[R]=ke,U[ge]=F,R=ge):(U[R]=ve,U[me]=F,R=me);else if(ge<D&&0>c(ke,F))U[R]=ke,U[ge]=F,R=ge;else break e}}return H}function c(U,H){var F=U.sortIndex-H.sortIndex;return F!==0?F:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var p=[],v=[],y=1,b=null,k=3,S=!1,_=!1,x=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(U){for(var H=n(v);H!==null;){if(H.callback===null)o(v);else if(H.startTime<=U)o(v),H.sortIndex=H.expirationTime,r(p,H);else break;H=n(v)}}function J(U){if(x=!1,$(U),!_)if(n(p)!==null)_=!0,V(se);else{var H=n(v);H!==null&&G(J,H.startTime-U)}}function se(U,H){_=!1,x&&(x=!1,O(fe),fe=-1),S=!0;var F=k;try{for($(H),b=n(p);b!==null&&(!(b.expirationTime>H)||U&&!we());){var R=b.callback;if(typeof R=="function"){b.callback=null,k=b.priorityLevel;var D=R(b.expirationTime<=H);H=i.unstable_now(),typeof D=="function"?b.callback=D:b===n(p)&&o(p),$(H)}else o(p);b=n(p)}if(b!==null)var ae=!0;else{var me=n(v);me!==null&&G(J,me.startTime-H),ae=!1}return ae}finally{b=null,k=F,S=!1}}var Q=!1,ie=null,fe=-1,_e=5,De=-1;function we(){return!(i.unstable_now()-De<_e)}function Ee(){if(ie!==null){var U=i.unstable_now();De=U;var H=!0;try{H=ie(!0,U)}finally{H?he():(Q=!1,ie=null)}}else Q=!1}var he;if(typeof M=="function")he=function(){M(Ee)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,C=w.port2;w.port1.onmessage=Ee,he=function(){C.postMessage(null)}}else he=function(){j(Ee,0)};function V(U){ie=U,Q||(Q=!0,he())}function G(U,H){fe=j(function(){U(i.unstable_now())},H)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_continueExecution=function(){_||S||(_=!0,V(se))},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(U){switch(k){case 1:case 2:case 3:var H=3;break;default:H=k}var F=k;k=H;try{return U()}finally{k=F}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=k;k=U;try{return H()}finally{k=F}},i.unstable_scheduleCallback=function(U,H,F){var R=i.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?R+F:R):F=R,U){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=F+D,U={id:y++,callback:H,priorityLevel:U,startTime:F,expirationTime:D,sortIndex:-1},F>R?(U.sortIndex=F,r(v,U),n(p)===null&&U===n(v)&&(x?(O(fe),fe=-1):x=!0,G(J,F-R))):(U.sortIndex=D,r(p,U),_||S||(_=!0,V(se))),U},i.unstable_shouldYield=we,i.unstable_wrapCallback=function(U){var H=k;return function(){var F=k;k=H;try{return U.apply(this,arguments)}finally{k=F}}}})(Pl)),Pl}var wh;function Xp(){return wh||(wh=1,Il.exports=Qp()),Il.exports}var bh;function Yp(){if(bh)return mt;bh=1;var i=ii(),r=Xp();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function d(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},b={};function k(e){return p.call(b,e)?!0:p.call(y,e)?!1:v.test(e)?b[e]=!0:(y[e]=!0,!1)}function S(e,t,a,l){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _(e,t,a,l){if(t===null||typeof t>"u"||S(e,t,a,l))return!0;if(l)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function x(e,t,a,l,u,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];j[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(O,M);j[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(O,M);j[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(O,M);j[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});function $(e,t,a,l){var u=j.hasOwnProperty(t)?j[t]:null;(u!==null?u.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_(t,a,u,l)&&(a=null),l||u===null?k(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):u.mustUseProperty?e[u.propertyName]=a===null?u.type===3?!1:"":a:(t=u.attributeName,l=u.attributeNamespace,a===null?e.removeAttribute(t):(u=u.type,a=u===3||u===4&&a===!0?"":""+a,l?e.setAttributeNS(l,t,a):e.setAttribute(t,a))))}var J=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),Q=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),we=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),U=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var F=Object.assign,R;function D(e){if(R===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return`
`+R+e}var ae=!1;function me(e,t){if(!e||ae)return"";ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(z){var l=z}Reflect.construct(e,[],t)}else{try{t.call()}catch(z){l=z}e.call(t.prototype)}else{try{throw Error()}catch(z){l=z}e()}}catch(z){if(z&&l&&typeof z.stack=="string"){for(var u=z.stack.split(`
`),f=l.stack.split(`
`),g=u.length-1,N=f.length-1;1<=g&&0<=N&&u[g]!==f[N];)N--;for(;1<=g&&0<=N;g--,N--)if(u[g]!==f[N]){if(g!==1||N!==1)do if(g--,N--,0>N||u[g]!==f[N]){var E=`
`+u[g].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=g&&0<=N);break}}}finally{ae=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?D(e):""}function ve(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function ge(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ie:return"Fragment";case Q:return"Portal";case _e:return"Profiler";case fe:return"StrictMode";case he:return"Suspense";case w:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case we:return(e.displayName||"Context")+".Consumer";case De:return(e._context.displayName||"Context")+".Provider";case Ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}function ke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ge(t);case 8:return t===fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function je(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Se(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function at(e){var t=Se(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ts(e){e._valueTracker||(e._valueTracker=at(e))}function ci(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Se(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xs(e,t){var a=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function di(e,t){var a=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;a=je(t.value!=null?t.value:a),e._wrapperState={initialChecked:l,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ui(e,t){t=t.checked,t!=null&&$(e,"checked",t,!1)}function Ys(e,t){ui(e,t);var a=je(t.value),l=t.type;if(a!=null)l==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ss(e,t.type,a):t.hasOwnProperty("defaultValue")&&ss(e,t.type,je(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hi(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function ss(e,t,a){(t!=="number"||rs(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Tr=Array.isArray;function sr(e,t,a,l){if(e=e.options,t){t={};for(var u=0;u<a.length;u++)t["$"+a[u]]=!0;for(a=0;a<e.length;a++)u=t.hasOwnProperty("$"+e[a].value),e[a].selected!==u&&(e[a].selected=u),u&&l&&(e[a].defaultSelected=!0)}else{for(a=""+je(a),t=null,u=0;u<e.length;u++){if(e[u].value===a){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Zs(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function P(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(n(92));if(Tr(a)){if(1<a.length)throw Error(n(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:je(a)}}function pe(e,t){var a=je(t.value),l=je(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),l!=null&&(e.defaultValue=""+l)}function ze(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rr(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fi,Tc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,l,u){MSApp.execUnsafeLocalFunction(function(){return e(t,a,l,u)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fi=fi||document.createElement("div"),fi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var rn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jf=["Webkit","ms","Moz","O"];Object.keys(rn).forEach(function(e){Jf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rn[t]=rn[e]})});function Rc(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||rn.hasOwnProperty(e)&&rn[e]?(""+t).trim():t+"px"}function Oc(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var l=a.indexOf("--")===0,u=Rc(a,t[a],l);a==="float"&&(a="cssFloat"),l?e.setProperty(a,u):e[a]=u}}var Qf=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ua(e,t){if(t){if(Qf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function Fa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function Wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,ns=null,is=null;function Ic(e){if(e=kn(e)){if(typeof Va!="function")throw Error(n(280));var t=e.stateNode;t&&(t=zi(t),Va(e.stateNode,e.type,t))}}function Pc(e){ns?is?is.push(e):is=[e]:ns=e}function Ac(){if(ns){var e=ns,t=is;if(is=ns=null,Ic(e),t)for(e=0;e<t.length;e++)Ic(t[e])}}function Mc(e,t){return e(t)}function zc(){}var Ha=!1;function Lc(e,t,a){if(Ha)return e(t,a);Ha=!0;try{return Mc(e,t,a)}finally{Ha=!1,(ns!==null||is!==null)&&(zc(),Ac())}}function sn(e,t){var a=e.stateNode;if(a===null)return null;var l=zi(a);if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,t,typeof a));return a}var qa=!1;if(m)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){qa=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{qa=!1}function Xf(e,t,a,l,u,f,g,N,E){var z=Array.prototype.slice.call(arguments,3);try{t.apply(a,z)}catch(W){this.onError(W)}}var an=!1,mi=null,pi=!1,Ka=null,Yf={onError:function(e){an=!0,mi=e}};function Zf(e,t,a,l,u,f,g,N,E){an=!1,mi=null,Xf.apply(Yf,arguments)}function em(e,t,a,l,u,f,g,N,E){if(Zf.apply(this,arguments),an){if(an){var z=mi;an=!1,mi=null}else throw Error(n(198));pi||(pi=!0,Ka=z)}}function Or(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function $c(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dc(e){if(Or(e)!==e)throw Error(n(188))}function tm(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(n(188));return t!==e?null:e}for(var a=e,l=t;;){var u=a.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===a)return Dc(u),e;if(f===l)return Dc(u),t;f=f.sibling}throw Error(n(188))}if(a.return!==l.return)a=u,l=f;else{for(var g=!1,N=u.child;N;){if(N===a){g=!0,a=u,l=f;break}if(N===l){g=!0,l=u,a=f;break}N=N.sibling}if(!g){for(N=f.child;N;){if(N===a){g=!0,a=f,l=u;break}if(N===l){g=!0,l=f,a=u;break}N=N.sibling}if(!g)throw Error(n(189))}}if(a.alternate!==l)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:t}function Uc(e){return e=tm(e),e!==null?Fc(e):null}function Fc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fc(e);if(t!==null)return t;e=e.sibling}return null}var Bc=r.unstable_scheduleCallback,Wc=r.unstable_cancelCallback,rm=r.unstable_shouldYield,sm=r.unstable_requestPaint,Ue=r.unstable_now,nm=r.unstable_getCurrentPriorityLevel,Ga=r.unstable_ImmediatePriority,Vc=r.unstable_UserBlockingPriority,xi=r.unstable_NormalPriority,im=r.unstable_LowPriority,Hc=r.unstable_IdlePriority,gi=null,Ut=null;function am(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(gi,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:cm,om=Math.log,lm=Math.LN2;function cm(e){return e>>>=0,e===0?32:31-(om(e)/lm|0)|0}var vi=64,yi=4194304;function on(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wi(e,t){var a=e.pendingLanes;if(a===0)return 0;var l=0,u=e.suspendedLanes,f=e.pingedLanes,g=a&268435455;if(g!==0){var N=g&~u;N!==0?l=on(N):(f&=g,f!==0&&(l=on(f)))}else g=a&~u,g!==0?l=on(g):f!==0&&(l=on(f));if(l===0)return 0;if(t!==0&&t!==l&&(t&u)===0&&(u=l&-l,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if((l&4)!==0&&(l|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)a=31-Tt(t),u=1<<a,l|=e[a],t&=~u;return l}function dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function um(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Tt(f),N=1<<g,E=u[g];E===-1?((N&a)===0||(N&l)!==0)&&(u[g]=dm(N,t)):E<=t&&(e.expiredLanes|=N),f&=~N}}function Ja(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qc(){var e=vi;return vi<<=1,(vi&4194240)===0&&(vi=64),e}function Qa(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ln(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=a}function hm(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<a;){var u=31-Tt(a),f=1<<u;t[u]=0,l[u]=-1,e[u]=-1,a&=~f}}function Xa(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-Tt(a),u=1<<l;u&t|e[l]&t&&(e[l]|=t),a&=~u}}var Ne=0;function Kc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Gc,Ya,Jc,Qc,Xc,Za=!1,bi=[],nr=null,ir=null,ar=null,cn=new Map,dn=new Map,or=[],fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yc(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":cn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(t.pointerId)}}function un(e,t,a,l,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},t!==null&&(t=kn(t),t!==null&&Ya(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function mm(e,t,a,l,u){switch(t){case"focusin":return nr=un(nr,e,t,a,l,u),!0;case"dragenter":return ir=un(ir,e,t,a,l,u),!0;case"mouseover":return ar=un(ar,e,t,a,l,u),!0;case"pointerover":var f=u.pointerId;return cn.set(f,un(cn.get(f)||null,e,t,a,l,u)),!0;case"gotpointercapture":return f=u.pointerId,dn.set(f,un(dn.get(f)||null,e,t,a,l,u)),!0}return!1}function Zc(e){var t=Ir(e.target);if(t!==null){var a=Or(t);if(a!==null){if(t=a.tag,t===13){if(t=$c(a),t!==null){e.blockedOn=t,Xc(e.priority,function(){Jc(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ji(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=to(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Ba=l,a.target.dispatchEvent(l),Ba=null}else return t=kn(a),t!==null&&Ya(t),e.blockedOn=a,!1;t.shift()}return!0}function ed(e,t,a){ji(e)&&a.delete(t)}function pm(){Za=!1,nr!==null&&ji(nr)&&(nr=null),ir!==null&&ji(ir)&&(ir=null),ar!==null&&ji(ar)&&(ar=null),cn.forEach(ed),dn.forEach(ed)}function hn(e,t){e.blockedOn===t&&(e.blockedOn=null,Za||(Za=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pm)))}function fn(e){function t(u){return hn(u,e)}if(0<bi.length){hn(bi[0],e);for(var a=1;a<bi.length;a++){var l=bi[a];l.blockedOn===e&&(l.blockedOn=null)}}for(nr!==null&&hn(nr,e),ir!==null&&hn(ir,e),ar!==null&&hn(ar,e),cn.forEach(t),dn.forEach(t),a=0;a<or.length;a++)l=or[a],l.blockedOn===e&&(l.blockedOn=null);for(;0<or.length&&(a=or[0],a.blockedOn===null);)Zc(a),a.blockedOn===null&&or.shift()}var as=J.ReactCurrentBatchConfig,Ni=!0;function xm(e,t,a,l){var u=Ne,f=as.transition;as.transition=null;try{Ne=1,eo(e,t,a,l)}finally{Ne=u,as.transition=f}}function gm(e,t,a,l){var u=Ne,f=as.transition;as.transition=null;try{Ne=4,eo(e,t,a,l)}finally{Ne=u,as.transition=f}}function eo(e,t,a,l){if(Ni){var u=to(e,t,a,l);if(u===null)yo(e,t,l,_i,a),Yc(e,l);else if(mm(u,e,t,a,l))l.stopPropagation();else if(Yc(e,l),t&4&&-1<fm.indexOf(e)){for(;u!==null;){var f=kn(u);if(f!==null&&Gc(f),f=to(e,t,a,l),f===null&&yo(e,t,l,_i,a),f===u)break;u=f}u!==null&&l.stopPropagation()}else yo(e,t,l,null,a)}}var _i=null;function to(e,t,a,l){if(_i=null,e=Wa(l),e=Ir(e),e!==null)if(t=Or(e),t===null)e=null;else if(a=t.tag,a===13){if(e=$c(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _i=e,null}function td(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nm()){case Ga:return 1;case Vc:return 4;case xi:case im:return 16;case Hc:return 536870912;default:return 16}default:return 16}}var lr=null,ro=null,ki=null;function rd(){if(ki)return ki;var e,t=ro,a=t.length,l,u="value"in lr?lr.value:lr.textContent,f=u.length;for(e=0;e<a&&t[e]===u[e];e++);var g=a-e;for(l=1;l<=g&&t[a-l]===u[f-l];l++);return ki=u.slice(e,1<l?1-l:void 0)}function Si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function sd(){return!1}function pt(e){function t(a,l,u,f,g){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(a=e[N],this[N]=a?a(f):f[N]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ei:sd,this.isPropagationStopped=sd,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),t}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=pt(os),mn=F({},os,{view:0,detail:0}),vm=pt(mn),no,io,pn,Ci=F({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&e.type==="mousemove"?(no=e.screenX-pn.screenX,io=e.screenY-pn.screenY):io=no=0,pn=e),no)},movementY:function(e){return"movementY"in e?e.movementY:io}}),nd=pt(Ci),ym=F({},Ci,{dataTransfer:0}),wm=pt(ym),bm=F({},mn,{relatedTarget:0}),ao=pt(bm),jm=F({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Nm=pt(jm),_m=F({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),km=pt(_m),Sm=F({},os,{data:0}),id=pt(Sm),Em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tm[e])?!!t[e]:!1}function oo(){return Rm}var Om=F({},mn,{key:function(e){if(e.key){var t=Em[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oo,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Im=pt(Om),Pm=F({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=pt(Pm),Am=F({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oo}),Mm=pt(Am),zm=F({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lm=pt(zm),$m=F({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dm=pt($m),Um=[9,13,27,32],lo=m&&"CompositionEvent"in window,xn=null;m&&"documentMode"in document&&(xn=document.documentMode);var Fm=m&&"TextEvent"in window&&!xn,od=m&&(!lo||xn&&8<xn&&11>=xn),ld=" ",cd=!1;function dd(e,t){switch(e){case"keyup":return Um.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function Bm(e,t){switch(e){case"compositionend":return ud(t);case"keypress":return t.which!==32?null:(cd=!0,ld);case"textInput":return e=t.data,e===ld&&cd?null:e;default:return null}}function Wm(e,t){if(ls)return e==="compositionend"||!lo&&dd(e,t)?(e=rd(),ki=ro=lr=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return od&&t.locale!=="ko"?null:t.data;default:return null}}var Vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vm[e.type]:t==="textarea"}function fd(e,t,a,l){Pc(l),t=Pi(t,"onChange"),0<t.length&&(a=new so("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var gn=null,vn=null;function Hm(e){Od(e,0)}function Ti(e){var t=fs(e);if(ci(t))return e}function qm(e,t){if(e==="change")return t}var md=!1;if(m){var co;if(m){var uo="oninput"in document;if(!uo){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),uo=typeof pd.oninput=="function"}co=uo}else co=!1;md=co&&(!document.documentMode||9<document.documentMode)}function xd(){gn&&(gn.detachEvent("onpropertychange",gd),vn=gn=null)}function gd(e){if(e.propertyName==="value"&&Ti(vn)){var t=[];fd(t,vn,e,Wa(e)),Lc(Hm,t)}}function Km(e,t,a){e==="focusin"?(xd(),gn=t,vn=a,gn.attachEvent("onpropertychange",gd)):e==="focusout"&&xd()}function Gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ti(vn)}function Jm(e,t){if(e==="click")return Ti(t)}function Qm(e,t){if(e==="input"||e==="change")return Ti(t)}function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:Xm;function yn(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!p.call(t,u)||!Rt(e[u],t[u]))return!1}return!0}function vd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,t){var a=vd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vd(a)}}function wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bd(){for(var e=window,t=rs();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=rs(e.document)}return t}function ho(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ym(e){var t=bd(),a=e.focusedElem,l=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&wd(a.ownerDocument.documentElement,a)){if(l!==null&&ho(a)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=a.textContent.length,f=Math.min(l.start,u);l=l.end===void 0?f:Math.min(l.end,u),!e.extend&&f>l&&(u=l,l=f,f=u),u=yd(a,f);var g=yd(a,l);u&&g&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>l?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zm=m&&"documentMode"in document&&11>=document.documentMode,cs=null,fo=null,wn=null,mo=!1;function jd(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mo||cs==null||cs!==rs(l)||(l=cs,"selectionStart"in l&&ho(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wn&&yn(wn,l)||(wn=l,l=Pi(fo,"onSelect"),0<l.length&&(t=new so("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=cs)))}function Ri(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ds={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},po={},Nd={};m&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Oi(e){if(po[e])return po[e];if(!ds[e])return e;var t=ds[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Nd)return po[e]=t[a];return e}var _d=Oi("animationend"),kd=Oi("animationiteration"),Sd=Oi("animationstart"),Ed=Oi("transitionend"),Cd=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){Cd.set(e,t),d(t,[e])}for(var xo=0;xo<Td.length;xo++){var go=Td[xo],ep=go.toLowerCase(),tp=go[0].toUpperCase()+go.slice(1);cr(ep,"on"+tp)}cr(_d,"onAnimationEnd"),cr(kd,"onAnimationIteration"),cr(Sd,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(Ed,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(bn));function Rd(e,t,a){var l=e.type||"unknown-event";e.currentTarget=a,em(l,t,void 0,e),e.currentTarget=null}function Od(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],u=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var g=l.length-1;0<=g;g--){var N=l[g],E=N.instance,z=N.currentTarget;if(N=N.listener,E!==f&&u.isPropagationStopped())break e;Rd(u,N,z),f=E}else for(g=0;g<l.length;g++){if(N=l[g],E=N.instance,z=N.currentTarget,N=N.listener,E!==f&&u.isPropagationStopped())break e;Rd(u,N,z),f=E}}}if(pi)throw e=Ka,pi=!1,Ka=null,e}function Re(e,t){var a=t[ko];a===void 0&&(a=t[ko]=new Set);var l=e+"__bubble";a.has(l)||(Id(t,e,2,!1),a.add(l))}function vo(e,t,a){var l=0;t&&(l|=4),Id(a,e,l,t)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[Ii]){e[Ii]=!0,o.forEach(function(a){a!=="selectionchange"&&(rp.has(a)||vo(a,!1,e),vo(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ii]||(t[Ii]=!0,vo("selectionchange",!1,t))}}function Id(e,t,a,l){switch(td(t)){case 1:var u=xm;break;case 4:u=gm;break;default:u=eo}a=u.bind(null,t,a,e),u=void 0,!qa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(t,a,{capture:!0,passive:u}):e.addEventListener(t,a,!0):u!==void 0?e.addEventListener(t,a,{passive:u}):e.addEventListener(t,a,!1)}function yo(e,t,a,l,u){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var N=l.stateNode.containerInfo;if(N===u||N.nodeType===8&&N.parentNode===u)break;if(g===4)for(g=l.return;g!==null;){var E=g.tag;if((E===3||E===4)&&(E=g.stateNode.containerInfo,E===u||E.nodeType===8&&E.parentNode===u))return;g=g.return}for(;N!==null;){if(g=Ir(N),g===null)return;if(E=g.tag,E===5||E===6){l=f=g;continue e}N=N.parentNode}}l=l.return}Lc(function(){var z=f,W=Wa(a),q=[];e:{var B=Cd.get(e);if(B!==void 0){var X=so,Z=e;switch(e){case"keypress":if(Si(a)===0)break e;case"keydown":case"keyup":X=Im;break;case"focusin":Z="focus",X=ao;break;case"focusout":Z="blur",X=ao;break;case"beforeblur":case"afterblur":X=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Mm;break;case _d:case kd:case Sd:X=Nm;break;case Ed:X=Lm;break;case"scroll":X=vm;break;case"wheel":X=Dm;break;case"copy":case"cut":case"paste":X=km;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ad}var ee=(t&4)!==0,Fe=!ee&&e==="scroll",I=ee?B!==null?B+"Capture":null:B;ee=[];for(var T=z,A;T!==null;){A=T;var K=A.stateNode;if(A.tag===5&&K!==null&&(A=K,I!==null&&(K=sn(T,I),K!=null&&ee.push(Nn(T,K,A)))),Fe)break;T=T.return}0<ee.length&&(B=new X(B,Z,null,a,W),q.push({event:B,listeners:ee}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",B&&a!==Ba&&(Z=a.relatedTarget||a.fromElement)&&(Ir(Z)||Z[qt]))break e;if((X||B)&&(B=W.window===W?W:(B=W.ownerDocument)?B.defaultView||B.parentWindow:window,X?(Z=a.relatedTarget||a.toElement,X=z,Z=Z?Ir(Z):null,Z!==null&&(Fe=Or(Z),Z!==Fe||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(X=null,Z=z),X!==Z)){if(ee=nd,K="onMouseLeave",I="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ee=ad,K="onPointerLeave",I="onPointerEnter",T="pointer"),Fe=X==null?B:fs(X),A=Z==null?B:fs(Z),B=new ee(K,T+"leave",X,a,W),B.target=Fe,B.relatedTarget=A,K=null,Ir(W)===z&&(ee=new ee(I,T+"enter",Z,a,W),ee.target=A,ee.relatedTarget=Fe,K=ee),Fe=K,X&&Z)t:{for(ee=X,I=Z,T=0,A=ee;A;A=us(A))T++;for(A=0,K=I;K;K=us(K))A++;for(;0<T-A;)ee=us(ee),T--;for(;0<A-T;)I=us(I),A--;for(;T--;){if(ee===I||I!==null&&ee===I.alternate)break t;ee=us(ee),I=us(I)}ee=null}else ee=null;X!==null&&Pd(q,B,X,ee,!1),Z!==null&&Fe!==null&&Pd(q,Fe,Z,ee,!0)}}e:{if(B=z?fs(z):window,X=B.nodeName&&B.nodeName.toLowerCase(),X==="select"||X==="input"&&B.type==="file")var te=qm;else if(hd(B))if(md)te=Qm;else{te=Gm;var oe=Km}else(X=B.nodeName)&&X.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(te=Jm);if(te&&(te=te(e,z))){fd(q,te,a,W);break e}oe&&oe(e,B,z),e==="focusout"&&(oe=B._wrapperState)&&oe.controlled&&B.type==="number"&&ss(B,"number",B.value)}switch(oe=z?fs(z):window,e){case"focusin":(hd(oe)||oe.contentEditable==="true")&&(cs=oe,fo=z,wn=null);break;case"focusout":wn=fo=cs=null;break;case"mousedown":mo=!0;break;case"contextmenu":case"mouseup":case"dragend":mo=!1,jd(q,a,W);break;case"selectionchange":if(Zm)break;case"keydown":case"keyup":jd(q,a,W)}var le;if(lo)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else ls?dd(e,a)&&(ue="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ue="onCompositionStart");ue&&(od&&a.locale!=="ko"&&(ls||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&ls&&(le=rd()):(lr=W,ro="value"in lr?lr.value:lr.textContent,ls=!0)),oe=Pi(z,ue),0<oe.length&&(ue=new id(ue,e,null,a,W),q.push({event:ue,listeners:oe}),le?ue.data=le:(le=ud(a),le!==null&&(ue.data=le)))),(le=Fm?Bm(e,a):Wm(e,a))&&(z=Pi(z,"onBeforeInput"),0<z.length&&(W=new id("onBeforeInput","beforeinput",null,a,W),q.push({event:W,listeners:z}),W.data=le))}Od(q,t)})}function Nn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Pi(e,t){for(var a=t+"Capture",l=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=sn(e,a),f!=null&&l.unshift(Nn(e,f,u)),f=sn(e,t),f!=null&&l.push(Nn(e,f,u))),e=e.return}return l}function us(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pd(e,t,a,l,u){for(var f=t._reactName,g=[];a!==null&&a!==l;){var N=a,E=N.alternate,z=N.stateNode;if(E!==null&&E===l)break;N.tag===5&&z!==null&&(N=z,u?(E=sn(a,f),E!=null&&g.unshift(Nn(a,E,N))):u||(E=sn(a,f),E!=null&&g.push(Nn(a,E,N)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var sp=/\r\n?/g,np=/\u0000|\uFFFD/g;function Ad(e){return(typeof e=="string"?e:""+e).replace(sp,`
`).replace(np,"")}function Ai(e,t,a){if(t=Ad(t),Ad(e)!==t&&a)throw Error(n(425))}function Mi(){}var wo=null,bo=null;function jo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var No=typeof setTimeout=="function"?setTimeout:void 0,ip=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,ap=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(e){return Md.resolve(null).then(e).catch(op)}:No;function op(e){setTimeout(function(){throw e})}function _o(e,t){var a=t,l=0;do{var u=a.nextSibling;if(e.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(l===0){e.removeChild(u),fn(t);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=u}while(a);fn(t)}function dr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),Ft="__reactFiber$"+hs,_n="__reactProps$"+hs,qt="__reactContainer$"+hs,ko="__reactEvents$"+hs,lp="__reactListeners$"+hs,cp="__reactHandles$"+hs;function Ir(e){var t=e[Ft];if(t)return t;for(var a=e.parentNode;a;){if(t=a[qt]||a[Ft]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=zd(e);e!==null;){if(a=e[Ft])return a;e=zd(e)}return t}e=a,a=e.parentNode}return null}function kn(e){return e=e[Ft]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function zi(e){return e[_n]||null}var So=[],ms=-1;function ur(e){return{current:e}}function Oe(e){0>ms||(e.current=So[ms],So[ms]=null,ms--)}function Ce(e,t){ms++,So[ms]=e.current,e.current=t}var hr={},rt=ur(hr),ct=ur(!1),Pr=hr;function ps(e,t){var a=e.type.contextTypes;if(!a)return hr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in a)u[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function dt(e){return e=e.childContextTypes,e!=null}function Li(){Oe(ct),Oe(rt)}function Ld(e,t,a){if(rt.current!==hr)throw Error(n(168));Ce(rt,t),Ce(ct,a)}function $d(e,t,a){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return a;l=l.getChildContext();for(var u in l)if(!(u in t))throw Error(n(108,ke(e)||"Unknown",u));return F({},a,l)}function $i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,Pr=rt.current,Ce(rt,e),Ce(ct,ct.current),!0}function Dd(e,t,a){var l=e.stateNode;if(!l)throw Error(n(169));a?(e=$d(e,t,Pr),l.__reactInternalMemoizedMergedChildContext=e,Oe(ct),Oe(rt),Ce(rt,e)):Oe(ct),Ce(ct,a)}var Kt=null,Di=!1,Eo=!1;function Ud(e){Kt===null?Kt=[e]:Kt.push(e)}function dp(e){Di=!0,Ud(e)}function fr(){if(!Eo&&Kt!==null){Eo=!0;var e=0,t=Ne;try{var a=Kt;for(Ne=1;e<a.length;e++){var l=a[e];do l=l(!0);while(l!==null)}Kt=null,Di=!1}catch(u){throw Kt!==null&&(Kt=Kt.slice(e+1)),Bc(Ga,fr),u}finally{Ne=t,Eo=!1}}return null}var xs=[],gs=0,Ui=null,Fi=0,Nt=[],_t=0,Ar=null,Gt=1,Jt="";function Mr(e,t){xs[gs++]=Fi,xs[gs++]=Ui,Ui=e,Fi=t}function Fd(e,t,a){Nt[_t++]=Gt,Nt[_t++]=Jt,Nt[_t++]=Ar,Ar=e;var l=Gt;e=Jt;var u=32-Tt(l)-1;l&=~(1<<u),a+=1;var f=32-Tt(t)+u;if(30<f){var g=u-u%5;f=(l&(1<<g)-1).toString(32),l>>=g,u-=g,Gt=1<<32-Tt(t)+u|a<<u|l,Jt=f+e}else Gt=1<<f|a<<u|l,Jt=e}function Co(e){e.return!==null&&(Mr(e,1),Fd(e,1,0))}function To(e){for(;e===Ui;)Ui=xs[--gs],xs[gs]=null,Fi=xs[--gs],xs[gs]=null;for(;e===Ar;)Ar=Nt[--_t],Nt[_t]=null,Jt=Nt[--_t],Nt[_t]=null,Gt=Nt[--_t],Nt[_t]=null}var xt=null,gt=null,Ie=!1,Ot=null;function Bd(e,t){var a=Ct(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function Wd(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,gt=dr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Ar!==null?{id:Gt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Ct(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,xt=e,gt=null,!0):!1;default:return!1}}function Ro(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Oo(e){if(Ie){var t=gt;if(t){var a=t;if(!Wd(e,t)){if(Ro(e))throw Error(n(418));t=dr(a.nextSibling);var l=xt;t&&Wd(e,t)?Bd(l,a):(e.flags=e.flags&-4097|2,Ie=!1,xt=e)}}else{if(Ro(e))throw Error(n(418));e.flags=e.flags&-4097|2,Ie=!1,xt=e}}}function Vd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function Bi(e){if(e!==xt)return!1;if(!Ie)return Vd(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jo(e.type,e.memoizedProps)),t&&(t=gt)){if(Ro(e))throw Hd(),Error(n(418));for(;t;)Bd(e,t),t=dr(t.nextSibling)}if(Vd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){gt=dr(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=xt?dr(e.stateNode.nextSibling):null;return!0}function Hd(){for(var e=gt;e;)e=dr(e.nextSibling)}function vs(){gt=xt=null,Ie=!1}function Io(e){Ot===null?Ot=[e]:Ot.push(e)}var up=J.ReactCurrentBatchConfig;function Sn(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var l=a.stateNode}if(!l)throw Error(n(147,e));var u=l,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var N=u.refs;g===null?delete N[f]:N[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qd(e){var t=e._init;return t(e._payload)}function Kd(e){function t(I,T){if(e){var A=I.deletions;A===null?(I.deletions=[T],I.flags|=16):A.push(T)}}function a(I,T){if(!e)return null;for(;T!==null;)t(I,T),T=T.sibling;return null}function l(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function u(I,T){return I=br(I,T),I.index=0,I.sibling=null,I}function f(I,T,A){return I.index=A,e?(A=I.alternate,A!==null?(A=A.index,A<T?(I.flags|=2,T):A):(I.flags|=2,T)):(I.flags|=1048576,T)}function g(I){return e&&I.alternate===null&&(I.flags|=2),I}function N(I,T,A,K){return T===null||T.tag!==6?(T=Nl(A,I.mode,K),T.return=I,T):(T=u(T,A),T.return=I,T)}function E(I,T,A,K){var te=A.type;return te===ie?W(I,T,A.props.children,K,A.key):T!==null&&(T.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===V&&qd(te)===T.type)?(K=u(T,A.props),K.ref=Sn(I,T,A),K.return=I,K):(K=fa(A.type,A.key,A.props,null,I.mode,K),K.ref=Sn(I,T,A),K.return=I,K)}function z(I,T,A,K){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=_l(A,I.mode,K),T.return=I,T):(T=u(T,A.children||[]),T.return=I,T)}function W(I,T,A,K,te){return T===null||T.tag!==7?(T=Wr(A,I.mode,K,te),T.return=I,T):(T=u(T,A),T.return=I,T)}function q(I,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Nl(""+T,I.mode,A),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case se:return A=fa(T.type,T.key,T.props,null,I.mode,A),A.ref=Sn(I,null,T),A.return=I,A;case Q:return T=_l(T,I.mode,A),T.return=I,T;case V:var K=T._init;return q(I,K(T._payload),A)}if(Tr(T)||H(T))return T=Wr(T,I.mode,A,null),T.return=I,T;Wi(I,T)}return null}function B(I,T,A,K){var te=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return te!==null?null:N(I,T,""+A,K);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case se:return A.key===te?E(I,T,A,K):null;case Q:return A.key===te?z(I,T,A,K):null;case V:return te=A._init,B(I,T,te(A._payload),K)}if(Tr(A)||H(A))return te!==null?null:W(I,T,A,K,null);Wi(I,A)}return null}function X(I,T,A,K,te){if(typeof K=="string"&&K!==""||typeof K=="number")return I=I.get(A)||null,N(T,I,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case se:return I=I.get(K.key===null?A:K.key)||null,E(T,I,K,te);case Q:return I=I.get(K.key===null?A:K.key)||null,z(T,I,K,te);case V:var oe=K._init;return X(I,T,A,oe(K._payload),te)}if(Tr(K)||H(K))return I=I.get(A)||null,W(T,I,K,te,null);Wi(T,K)}return null}function Z(I,T,A,K){for(var te=null,oe=null,le=T,ue=T=0,Xe=null;le!==null&&ue<A.length;ue++){le.index>ue?(Xe=le,le=null):Xe=le.sibling;var be=B(I,le,A[ue],K);if(be===null){le===null&&(le=Xe);break}e&&le&&be.alternate===null&&t(I,le),T=f(be,T,ue),oe===null?te=be:oe.sibling=be,oe=be,le=Xe}if(ue===A.length)return a(I,le),Ie&&Mr(I,ue),te;if(le===null){for(;ue<A.length;ue++)le=q(I,A[ue],K),le!==null&&(T=f(le,T,ue),oe===null?te=le:oe.sibling=le,oe=le);return Ie&&Mr(I,ue),te}for(le=l(I,le);ue<A.length;ue++)Xe=X(le,I,ue,A[ue],K),Xe!==null&&(e&&Xe.alternate!==null&&le.delete(Xe.key===null?ue:Xe.key),T=f(Xe,T,ue),oe===null?te=Xe:oe.sibling=Xe,oe=Xe);return e&&le.forEach(function(jr){return t(I,jr)}),Ie&&Mr(I,ue),te}function ee(I,T,A,K){var te=H(A);if(typeof te!="function")throw Error(n(150));if(A=te.call(A),A==null)throw Error(n(151));for(var oe=te=null,le=T,ue=T=0,Xe=null,be=A.next();le!==null&&!be.done;ue++,be=A.next()){le.index>ue?(Xe=le,le=null):Xe=le.sibling;var jr=B(I,le,be.value,K);if(jr===null){le===null&&(le=Xe);break}e&&le&&jr.alternate===null&&t(I,le),T=f(jr,T,ue),oe===null?te=jr:oe.sibling=jr,oe=jr,le=Xe}if(be.done)return a(I,le),Ie&&Mr(I,ue),te;if(le===null){for(;!be.done;ue++,be=A.next())be=q(I,be.value,K),be!==null&&(T=f(be,T,ue),oe===null?te=be:oe.sibling=be,oe=be);return Ie&&Mr(I,ue),te}for(le=l(I,le);!be.done;ue++,be=A.next())be=X(le,I,ue,be.value,K),be!==null&&(e&&be.alternate!==null&&le.delete(be.key===null?ue:be.key),T=f(be,T,ue),oe===null?te=be:oe.sibling=be,oe=be);return e&&le.forEach(function(Vp){return t(I,Vp)}),Ie&&Mr(I,ue),te}function Fe(I,T,A,K){if(typeof A=="object"&&A!==null&&A.type===ie&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case se:e:{for(var te=A.key,oe=T;oe!==null;){if(oe.key===te){if(te=A.type,te===ie){if(oe.tag===7){a(I,oe.sibling),T=u(oe,A.props.children),T.return=I,I=T;break e}}else if(oe.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===V&&qd(te)===oe.type){a(I,oe.sibling),T=u(oe,A.props),T.ref=Sn(I,oe,A),T.return=I,I=T;break e}a(I,oe);break}else t(I,oe);oe=oe.sibling}A.type===ie?(T=Wr(A.props.children,I.mode,K,A.key),T.return=I,I=T):(K=fa(A.type,A.key,A.props,null,I.mode,K),K.ref=Sn(I,T,A),K.return=I,I=K)}return g(I);case Q:e:{for(oe=A.key;T!==null;){if(T.key===oe)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){a(I,T.sibling),T=u(T,A.children||[]),T.return=I,I=T;break e}else{a(I,T);break}else t(I,T);T=T.sibling}T=_l(A,I.mode,K),T.return=I,I=T}return g(I);case V:return oe=A._init,Fe(I,T,oe(A._payload),K)}if(Tr(A))return Z(I,T,A,K);if(H(A))return ee(I,T,A,K);Wi(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(a(I,T.sibling),T=u(T,A),T.return=I,I=T):(a(I,T),T=Nl(A,I.mode,K),T.return=I,I=T),g(I)):a(I,T)}return Fe}var ys=Kd(!0),Gd=Kd(!1),Vi=ur(null),Hi=null,ws=null,Po=null;function Ao(){Po=ws=Hi=null}function Mo(e){var t=Vi.current;Oe(Vi),e._currentValue=t}function zo(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function bs(e,t){Hi=e,Po=ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ut=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Po!==e)if(e={context:e,memoizedValue:t,next:null},ws===null){if(Hi===null)throw Error(n(308));ws=e,Hi.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var zr=null;function Lo(e){zr===null?zr=[e]:zr.push(e)}function Jd(e,t,a,l){var u=t.interleaved;return u===null?(a.next=a,Lo(t)):(a.next=u.next,u.next=a),t.interleaved=a,Qt(e,l)}function Qt(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var mr=!1;function $o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ye&2)!==0){var u=l.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),l.pending=t,Qt(e,a)}return u=l.interleaved,u===null?(t.next=t,Lo(l)):(t.next=u.next,u.next=t),l.interleaved=t,Qt(e,a)}function qi(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Xa(e,a)}}function Xd(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var g={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?u=f=g:f=f.next=g,a=a.next}while(a!==null);f===null?u=f=t:f=f.next=t}else u=f=t;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Ki(e,t,a,l){var u=e.updateQueue;mr=!1;var f=u.firstBaseUpdate,g=u.lastBaseUpdate,N=u.shared.pending;if(N!==null){u.shared.pending=null;var E=N,z=E.next;E.next=null,g===null?f=z:g.next=z,g=E;var W=e.alternate;W!==null&&(W=W.updateQueue,N=W.lastBaseUpdate,N!==g&&(N===null?W.firstBaseUpdate=z:N.next=z,W.lastBaseUpdate=E))}if(f!==null){var q=u.baseState;g=0,W=z=E=null,N=f;do{var B=N.lane,X=N.eventTime;if((l&B)===B){W!==null&&(W=W.next={eventTime:X,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Z=e,ee=N;switch(B=t,X=a,ee.tag){case 1:if(Z=ee.payload,typeof Z=="function"){q=Z.call(X,q,B);break e}q=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ee.payload,B=typeof Z=="function"?Z.call(X,q,B):Z,B==null)break e;q=F({},q,B);break e;case 2:mr=!0}}N.callback!==null&&N.lane!==0&&(e.flags|=64,B=u.effects,B===null?u.effects=[N]:B.push(N))}else X={eventTime:X,lane:B,tag:N.tag,payload:N.payload,callback:N.callback,next:null},W===null?(z=W=X,E=q):W=W.next=X,g|=B;if(N=N.next,N===null){if(N=u.shared.pending,N===null)break;B=N,N=B.next,B.next=null,u.lastBaseUpdate=B,u.shared.pending=null}}while(!0);if(W===null&&(E=q),u.baseState=E,u.firstBaseUpdate=z,u.lastBaseUpdate=W,t=u.shared.interleaved,t!==null){u=t;do g|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);Dr|=g,e.lanes=g,e.memoizedState=q}}function Yd(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],u=l.callback;if(u!==null){if(l.callback=null,l=a,typeof u!="function")throw Error(n(191,u));u.call(l)}}}var En={},Bt=ur(En),Cn=ur(En),Tn=ur(En);function Lr(e){if(e===En)throw Error(n(174));return e}function Do(e,t){switch(Ce(Tn,t),Ce(Cn,e),Ce(Bt,En),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:en(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=en(t,e)}Oe(Bt),Ce(Bt,t)}function js(){Oe(Bt),Oe(Cn),Oe(Tn)}function Zd(e){Lr(Tn.current);var t=Lr(Bt.current),a=en(t,e.type);t!==a&&(Ce(Cn,e),Ce(Bt,a))}function Uo(e){Cn.current===e&&(Oe(Bt),Oe(Cn))}var Pe=ur(0);function Gi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=[];function Bo(){for(var e=0;e<Fo.length;e++)Fo[e]._workInProgressVersionPrimary=null;Fo.length=0}var Ji=J.ReactCurrentDispatcher,Wo=J.ReactCurrentBatchConfig,$r=0,Ae=null,qe=null,Je=null,Qi=!1,Rn=!1,On=0,hp=0;function st(){throw Error(n(321))}function Vo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Rt(e[a],t[a]))return!1;return!0}function Ho(e,t,a,l,u,f){if($r=f,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ji.current=e===null||e.memoizedState===null?xp:gp,e=a(l,u),Rn){f=0;do{if(Rn=!1,On=0,25<=f)throw Error(n(301));f+=1,Je=qe=null,t.updateQueue=null,Ji.current=vp,e=a(l,u)}while(Rn)}if(Ji.current=Zi,t=qe!==null&&qe.next!==null,$r=0,Je=qe=Ae=null,Qi=!1,t)throw Error(n(300));return e}function qo(){var e=On!==0;return On=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ae.memoizedState=Je=e:Je=Je.next=e,Je}function St(){if(qe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=Je===null?Ae.memoizedState:Je.next;if(t!==null)Je=t,qe=e;else{if(e===null)throw Error(n(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Je===null?Ae.memoizedState=Je=e:Je=Je.next=e}return Je}function In(e,t){return typeof t=="function"?t(e):t}function Ko(e){var t=St(),a=t.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var l=qe,u=l.baseQueue,f=a.pending;if(f!==null){if(u!==null){var g=u.next;u.next=f.next,f.next=g}l.baseQueue=u=f,a.pending=null}if(u!==null){f=u.next,l=l.baseState;var N=g=null,E=null,z=f;do{var W=z.lane;if(($r&W)===W)E!==null&&(E=E.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),l=z.hasEagerState?z.eagerState:e(l,z.action);else{var q={lane:W,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};E===null?(N=E=q,g=l):E=E.next=q,Ae.lanes|=W,Dr|=W}z=z.next}while(z!==null&&z!==f);E===null?g=l:E.next=N,Rt(l,t.memoizedState)||(ut=!0),t.memoizedState=l,t.baseState=g,t.baseQueue=E,a.lastRenderedState=l}if(e=a.interleaved,e!==null){u=e;do f=u.lane,Ae.lanes|=f,Dr|=f,u=u.next;while(u!==e)}else u===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function Go(e){var t=St(),a=t.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var l=a.dispatch,u=a.pending,f=t.memoizedState;if(u!==null){a.pending=null;var g=u=u.next;do f=e(f,g.action),g=g.next;while(g!==u);Rt(f,t.memoizedState)||(ut=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,l]}function eu(){}function tu(e,t){var a=Ae,l=St(),u=t(),f=!Rt(l.memoizedState,u);if(f&&(l.memoizedState=u,ut=!0),l=l.queue,Jo(nu.bind(null,a,l,e),[e]),l.getSnapshot!==t||f||Je!==null&&Je.memoizedState.tag&1){if(a.flags|=2048,Pn(9,su.bind(null,a,l,u,t),void 0,null),Qe===null)throw Error(n(349));($r&30)!==0||ru(a,t,u)}return u}function ru(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function su(e,t,a,l){t.value=a,t.getSnapshot=l,iu(t)&&au(e)}function nu(e,t,a){return a(function(){iu(t)&&au(e)})}function iu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Rt(e,a)}catch{return!0}}function au(e){var t=Qt(e,1);t!==null&&Mt(t,e,1,-1)}function ou(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:e},t.queue=e,e=e.dispatch=pp.bind(null,Ae,e),[t.memoizedState,e]}function Pn(e,t,a,l){return e={tag:e,create:t,destroy:a,deps:l,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e)),e}function lu(){return St().memoizedState}function Xi(e,t,a,l){var u=Wt();Ae.flags|=e,u.memoizedState=Pn(1|t,a,void 0,l===void 0?null:l)}function Yi(e,t,a,l){var u=St();l=l===void 0?null:l;var f=void 0;if(qe!==null){var g=qe.memoizedState;if(f=g.destroy,l!==null&&Vo(l,g.deps)){u.memoizedState=Pn(t,a,f,l);return}}Ae.flags|=e,u.memoizedState=Pn(1|t,a,f,l)}function cu(e,t){return Xi(8390656,8,e,t)}function Jo(e,t){return Yi(2048,8,e,t)}function du(e,t){return Yi(4,2,e,t)}function uu(e,t){return Yi(4,4,e,t)}function hu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fu(e,t,a){return a=a!=null?a.concat([e]):null,Yi(4,4,hu.bind(null,t,e),a)}function Qo(){}function mu(e,t){var a=St();t=t===void 0?null:t;var l=a.memoizedState;return l!==null&&t!==null&&Vo(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function pu(e,t){var a=St();t=t===void 0?null:t;var l=a.memoizedState;return l!==null&&t!==null&&Vo(t,l[1])?l[0]:(e=e(),a.memoizedState=[e,t],e)}function xu(e,t,a){return($r&21)===0?(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=a):(Rt(a,t)||(a=qc(),Ae.lanes|=a,Dr|=a,e.baseState=!0),t)}function fp(e,t){var a=Ne;Ne=a!==0&&4>a?a:4,e(!0);var l=Wo.transition;Wo.transition={};try{e(!1),t()}finally{Ne=a,Wo.transition=l}}function gu(){return St().memoizedState}function mp(e,t,a){var l=yr(e);if(a={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null},vu(e))yu(t,a);else if(a=Jd(e,t,a,l),a!==null){var u=lt();Mt(a,e,l,u),wu(a,t,l)}}function pp(e,t,a){var l=yr(e),u={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null};if(vu(e))yu(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,N=f(g,a);if(u.hasEagerState=!0,u.eagerState=N,Rt(N,g)){var E=t.interleaved;E===null?(u.next=u,Lo(t)):(u.next=E.next,E.next=u),t.interleaved=u;return}}catch{}a=Jd(e,t,u,l),a!==null&&(u=lt(),Mt(a,e,l,u),wu(a,t,l))}}function vu(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function yu(e,t){Rn=Qi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function wu(e,t,a){if((a&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Xa(e,a)}}var Zi={readContext:kt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},xp={readContext:kt,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:cu,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,Xi(4194308,4,hu.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Xi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xi(4,2,e,t)},useMemo:function(e,t){var a=Wt();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var l=Wt();return t=a!==void 0?a(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=mp.bind(null,Ae,e),[l.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:ou,useDebugValue:Qo,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=ou(!1),t=e[0];return e=fp.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var l=Ae,u=Wt();if(Ie){if(a===void 0)throw Error(n(407));a=a()}else{if(a=t(),Qe===null)throw Error(n(349));($r&30)!==0||ru(l,t,a)}u.memoizedState=a;var f={value:a,getSnapshot:t};return u.queue=f,cu(nu.bind(null,l,f,e),[e]),l.flags|=2048,Pn(9,su.bind(null,l,f,a,t),void 0,null),a},useId:function(){var e=Wt(),t=Qe.identifierPrefix;if(Ie){var a=Jt,l=Gt;a=(l&~(1<<32-Tt(l)-1)).toString(32)+a,t=":"+t+"R"+a,a=On++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=hp++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gp={readContext:kt,useCallback:mu,useContext:kt,useEffect:Jo,useImperativeHandle:fu,useInsertionEffect:du,useLayoutEffect:uu,useMemo:pu,useReducer:Ko,useRef:lu,useState:function(){return Ko(In)},useDebugValue:Qo,useDeferredValue:function(e){var t=St();return xu(t,qe.memoizedState,e)},useTransition:function(){var e=Ko(In)[0],t=St().memoizedState;return[e,t]},useMutableSource:eu,useSyncExternalStore:tu,useId:gu,unstable_isNewReconciler:!1},vp={readContext:kt,useCallback:mu,useContext:kt,useEffect:Jo,useImperativeHandle:fu,useInsertionEffect:du,useLayoutEffect:uu,useMemo:pu,useReducer:Go,useRef:lu,useState:function(){return Go(In)},useDebugValue:Qo,useDeferredValue:function(e){var t=St();return qe===null?t.memoizedState=e:xu(t,qe.memoizedState,e)},useTransition:function(){var e=Go(In)[0],t=St().memoizedState;return[e,t]},useMutableSource:eu,useSyncExternalStore:tu,useId:gu,unstable_isNewReconciler:!1};function It(e,t){if(e&&e.defaultProps){t=F({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function Xo(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:F({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ea={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var l=lt(),u=yr(e),f=Xt(l,u);f.payload=t,a!=null&&(f.callback=a),t=pr(e,f,u),t!==null&&(Mt(t,e,u,l),qi(t,e,u))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=lt(),u=yr(e),f=Xt(l,u);f.tag=1,f.payload=t,a!=null&&(f.callback=a),t=pr(e,f,u),t!==null&&(Mt(t,e,u,l),qi(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=lt(),l=yr(e),u=Xt(a,l);u.tag=2,t!=null&&(u.callback=t),t=pr(e,u,l),t!==null&&(Mt(t,e,l,a),qi(t,e,l))}};function bu(e,t,a,l,u,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,g):t.prototype&&t.prototype.isPureReactComponent?!yn(a,l)||!yn(u,f):!0}function ju(e,t,a){var l=!1,u=hr,f=t.contextType;return typeof f=="object"&&f!==null?f=kt(f):(u=dt(t)?Pr:rt.current,l=t.contextTypes,f=(l=l!=null)?ps(e,u):hr),t=new t(a,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ea,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function Nu(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&ea.enqueueReplaceState(t,t.state,null)}function Yo(e,t,a,l){var u=e.stateNode;u.props=a,u.state=e.memoizedState,u.refs={},$o(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=kt(f):(f=dt(t)?Pr:rt.current,u.context=ps(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Xo(e,t,f,a),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&ea.enqueueReplaceState(u,u.state,null),Ki(e,a,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Ns(e,t){try{var a="",l=t;do a+=ve(l),l=l.return;while(l);var u=a}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function Zo(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function el(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var yp=typeof WeakMap=="function"?WeakMap:Map;function _u(e,t,a){a=Xt(-1,a),a.tag=3,a.payload={element:null};var l=t.value;return a.callback=function(){oa||(oa=!0,pl=l),el(e,t)},a}function ku(e,t,a){a=Xt(-1,a),a.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=t.value;a.payload=function(){return l(u)},a.callback=function(){el(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){el(e,t),typeof l!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),a}function Su(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new yp;var u=new Set;l.set(t,u)}else u=l.get(t),u===void 0&&(u=new Set,l.set(t,u));u.has(a)||(u.add(a),e=Pp.bind(null,e,t,a),t.then(e,e))}function Eu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cu(e,t,a,l,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Xt(-1,1),t.tag=2,pr(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var wp=J.ReactCurrentOwner,ut=!1;function ot(e,t,a,l){t.child=e===null?Gd(t,null,a,l):ys(t,e.child,a,l)}function Tu(e,t,a,l,u){a=a.render;var f=t.ref;return bs(t,u),l=Ho(e,t,a,l,f,u),a=qo(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Yt(e,t,u)):(Ie&&a&&Co(t),t.flags|=1,ot(e,t,l,u),t.child)}function Ru(e,t,a,l,u){if(e===null){var f=a.type;return typeof f=="function"&&!jl(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=f,Ou(e,t,f,l,u)):(e=fa(a.type,null,l,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&u)===0){var g=f.memoizedProps;if(a=a.compare,a=a!==null?a:yn,a(g,l)&&e.ref===t.ref)return Yt(e,t,u)}return t.flags|=1,e=br(f,l),e.ref=t.ref,e.return=t,t.child=e}function Ou(e,t,a,l,u){if(e!==null){var f=e.memoizedProps;if(yn(f,l)&&e.ref===t.ref)if(ut=!1,t.pendingProps=l=f,(e.lanes&u)!==0)(e.flags&131072)!==0&&(ut=!0);else return t.lanes=e.lanes,Yt(e,t,u)}return tl(e,t,a,l,u)}function Iu(e,t,a){var l=t.pendingProps,u=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ks,vt),vt|=a;else{if((a&1073741824)===0)return e=f!==null?f.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(ks,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=f!==null?f.baseLanes:a,Ce(ks,vt),vt|=l}else f!==null?(l=f.baseLanes|a,t.memoizedState=null):l=a,Ce(ks,vt),vt|=l;return ot(e,t,u,a),t.child}function Pu(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function tl(e,t,a,l,u){var f=dt(a)?Pr:rt.current;return f=ps(t,f),bs(t,u),a=Ho(e,t,a,l,f,u),l=qo(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Yt(e,t,u)):(Ie&&l&&Co(t),t.flags|=1,ot(e,t,a,u),t.child)}function Au(e,t,a,l,u){if(dt(a)){var f=!0;$i(t)}else f=!1;if(bs(t,u),t.stateNode===null)ra(e,t),ju(t,a,l),Yo(t,a,l,u),l=!0;else if(e===null){var g=t.stateNode,N=t.memoizedProps;g.props=N;var E=g.context,z=a.contextType;typeof z=="object"&&z!==null?z=kt(z):(z=dt(a)?Pr:rt.current,z=ps(t,z));var W=a.getDerivedStateFromProps,q=typeof W=="function"||typeof g.getSnapshotBeforeUpdate=="function";q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N!==l||E!==z)&&Nu(t,g,l,z),mr=!1;var B=t.memoizedState;g.state=B,Ki(t,l,g,u),E=t.memoizedState,N!==l||B!==E||ct.current||mr?(typeof W=="function"&&(Xo(t,a,W,l),E=t.memoizedState),(N=mr||bu(t,a,N,l,B,E,z))?(q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=E),g.props=l,g.state=E,g.context=z,l=N):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{g=t.stateNode,Qd(e,t),N=t.memoizedProps,z=t.type===t.elementType?N:It(t.type,N),g.props=z,q=t.pendingProps,B=g.context,E=a.contextType,typeof E=="object"&&E!==null?E=kt(E):(E=dt(a)?Pr:rt.current,E=ps(t,E));var X=a.getDerivedStateFromProps;(W=typeof X=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N!==q||B!==E)&&Nu(t,g,l,E),mr=!1,B=t.memoizedState,g.state=B,Ki(t,l,g,u);var Z=t.memoizedState;N!==q||B!==Z||ct.current||mr?(typeof X=="function"&&(Xo(t,a,X,l),Z=t.memoizedState),(z=mr||bu(t,a,z,l,B,Z,E)||!1)?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,Z,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,Z,E)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||N===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Z),g.props=l,g.state=Z,g.context=E,l=z):(typeof g.componentDidUpdate!="function"||N===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),l=!1)}return rl(e,t,a,l,f,u)}function rl(e,t,a,l,u,f){Pu(e,t);var g=(t.flags&128)!==0;if(!l&&!g)return u&&Dd(t,a,!1),Yt(e,t,f);l=t.stateNode,wp.current=t;var N=g&&typeof a.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=ys(t,e.child,null,f),t.child=ys(t,null,N,f)):ot(e,t,N,f),t.memoizedState=l.state,u&&Dd(t,a,!0),t.child}function Mu(e){var t=e.stateNode;t.pendingContext?Ld(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ld(e,t.context,!1),Do(e,t.containerInfo)}function zu(e,t,a,l,u){return vs(),Io(u),t.flags|=256,ot(e,t,a,l),t.child}var sl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t,a){var l=t.pendingProps,u=Pe.current,f=!1,g=(t.flags&128)!==0,N;if((N=g)||(N=e!==null&&e.memoizedState===null?!1:(u&2)!==0),N?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ce(Pe,u&1),e===null)return Oo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=l.children,e=l.fallback,f?(l=t.mode,f=t.child,g={mode:"hidden",children:g},(l&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=ma(g,l,0,null),e=Wr(e,l,a,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=nl(a),t.memoizedState=sl,e):il(t,g));if(u=e.memoizedState,u!==null&&(N=u.dehydrated,N!==null))return bp(e,t,g,l,N,u,a);if(f){f=l.fallback,g=t.mode,u=e.child,N=u.sibling;var E={mode:"hidden",children:l.children};return(g&1)===0&&t.child!==u?(l=t.child,l.childLanes=0,l.pendingProps=E,t.deletions=null):(l=br(u,E),l.subtreeFlags=u.subtreeFlags&14680064),N!==null?f=br(N,f):(f=Wr(f,g,a,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,g=e.child.memoizedState,g=g===null?nl(a):{baseLanes:g.baseLanes|a,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~a,t.memoizedState=sl,l}return f=e.child,e=f.sibling,l=br(f,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=a),l.return=t,l.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=l,t.memoizedState=null,l}function il(e,t){return t=ma({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ta(e,t,a,l){return l!==null&&Io(l),ys(t,e.child,null,a),e=il(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bp(e,t,a,l,u,f,g){if(a)return t.flags&256?(t.flags&=-257,l=Zo(Error(n(422))),ta(e,t,g,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=l.fallback,u=t.mode,l=ma({mode:"visible",children:l.children},u,0,null),f=Wr(f,u,g,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,(t.mode&1)!==0&&ys(t,e.child,null,g),t.child.memoizedState=nl(g),t.memoizedState=sl,f);if((t.mode&1)===0)return ta(e,t,g,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var N=l.dgst;return l=N,f=Error(n(419)),l=Zo(f,l,void 0),ta(e,t,g,l)}if(N=(g&e.childLanes)!==0,ut||N){if(l=Qe,l!==null){switch(g&-g){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(l.suspendedLanes|g))!==0?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,Qt(e,u),Mt(l,e,u,-1))}return bl(),l=Zo(Error(n(421))),ta(e,t,g,l)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Ap.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,gt=dr(u.nextSibling),xt=t,Ie=!0,Ot=null,e!==null&&(Nt[_t++]=Gt,Nt[_t++]=Jt,Nt[_t++]=Ar,Gt=e.id,Jt=e.overflow,Ar=t),t=il(t,l.children),t.flags|=4096,t)}function $u(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),zo(e.return,t,a)}function al(e,t,a,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=u)}function Du(e,t,a){var l=t.pendingProps,u=l.revealOrder,f=l.tail;if(ot(e,t,l.children,a),l=Pe.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$u(e,a,t);else if(e.tag===19)$u(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(Ce(Pe,l),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(a=t.child,u=null;a!==null;)e=a.alternate,e!==null&&Gi(e)===null&&(u=a),a=a.sibling;a=u,a===null?(u=t.child,t.child=null):(u=a.sibling,a.sibling=null),al(t,!1,u,a,f);break;case"backwards":for(a=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Gi(e)===null){t.child=u;break}e=u.sibling,u.sibling=a,a=u,u=e}al(t,!0,a,null,f);break;case"together":al(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ra(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Dr|=t.lanes,(a&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,a=br(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=br(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function jp(e,t,a){switch(t.tag){case 3:Mu(t),vs();break;case 5:Zd(t);break;case 1:dt(t.type)&&$i(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,u=t.memoizedProps.value;Ce(Vi,l._currentValue),l._currentValue=u;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(Ce(Pe,Pe.current&1),t.flags|=128,null):(a&t.child.childLanes)!==0?Lu(e,t,a):(Ce(Pe,Pe.current&1),e=Yt(e,t,a),e!==null?e.sibling:null);Ce(Pe,Pe.current&1);break;case 19:if(l=(a&t.childLanes)!==0,(e.flags&128)!==0){if(l)return Du(e,t,a);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ce(Pe,Pe.current),l)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,a)}return Yt(e,t,a)}var Uu,ol,Fu,Bu;Uu=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ol=function(){},Fu=function(e,t,a,l){var u=e.memoizedProps;if(u!==l){e=t.stateNode,Lr(Bt.current);var f=null;switch(a){case"input":u=Xs(e,u),l=Xs(e,l),f=[];break;case"select":u=F({},u,{value:void 0}),l=F({},l,{value:void 0}),f=[];break;case"textarea":u=Zs(e,u),l=Zs(e,l),f=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Mi)}Ua(a,l);var g;a=null;for(z in u)if(!l.hasOwnProperty(z)&&u.hasOwnProperty(z)&&u[z]!=null)if(z==="style"){var N=u[z];for(g in N)N.hasOwnProperty(g)&&(a||(a={}),a[g]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(c.hasOwnProperty(z)?f||(f=[]):(f=f||[]).push(z,null));for(z in l){var E=l[z];if(N=u?.[z],l.hasOwnProperty(z)&&E!==N&&(E!=null||N!=null))if(z==="style")if(N){for(g in N)!N.hasOwnProperty(g)||E&&E.hasOwnProperty(g)||(a||(a={}),a[g]="");for(g in E)E.hasOwnProperty(g)&&N[g]!==E[g]&&(a||(a={}),a[g]=E[g])}else a||(f||(f=[]),f.push(z,a)),a=E;else z==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,N=N?N.__html:void 0,E!=null&&N!==E&&(f=f||[]).push(z,E)):z==="children"?typeof E!="string"&&typeof E!="number"||(f=f||[]).push(z,""+E):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(c.hasOwnProperty(z)?(E!=null&&z==="onScroll"&&Re("scroll",e),f||N===E||(f=[])):(f=f||[]).push(z,E))}a&&(f=f||[]).push("style",a);var z=f;(t.updateQueue=z)&&(t.flags|=4)}},Bu=function(e,t,a,l){a!==l&&(t.flags|=4)};function An(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Np(e,t,a){var l=t.pendingProps;switch(To(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return dt(t.type)&&Li(),nt(t),null;case 3:return l=t.stateNode,js(),Oe(ct),Oe(rt),Bo(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Bi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ot!==null&&(vl(Ot),Ot=null))),ol(e,t),nt(t),null;case 5:Uo(t);var u=Lr(Tn.current);if(a=t.type,e!==null&&t.stateNode!=null)Fu(e,t,a,l,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(n(166));return nt(t),null}if(e=Lr(Bt.current),Bi(t)){l=t.stateNode,a=t.type;var f=t.memoizedProps;switch(l[Ft]=t,l[_n]=f,e=(t.mode&1)!==0,a){case"dialog":Re("cancel",l),Re("close",l);break;case"iframe":case"object":case"embed":Re("load",l);break;case"video":case"audio":for(u=0;u<bn.length;u++)Re(bn[u],l);break;case"source":Re("error",l);break;case"img":case"image":case"link":Re("error",l),Re("load",l);break;case"details":Re("toggle",l);break;case"input":di(l,f),Re("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Re("invalid",l);break;case"textarea":P(l,f),Re("invalid",l)}Ua(a,f),u=null;for(var g in f)if(f.hasOwnProperty(g)){var N=f[g];g==="children"?typeof N=="string"?l.textContent!==N&&(f.suppressHydrationWarning!==!0&&Ai(l.textContent,N,e),u=["children",N]):typeof N=="number"&&l.textContent!==""+N&&(f.suppressHydrationWarning!==!0&&Ai(l.textContent,N,e),u=["children",""+N]):c.hasOwnProperty(g)&&N!=null&&g==="onScroll"&&Re("scroll",l)}switch(a){case"input":ts(l),hi(l,f,!0);break;case"textarea":ts(l),ze(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Mi)}l=u,t.updateQueue=l,l!==null&&(t.flags|=4)}else{g=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rr(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(a,{is:l.is}):(e=g.createElement(a),a==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,a),e[Ft]=t,e[_n]=l,Uu(e,t,!1,!1),t.stateNode=e;e:{switch(g=Fa(a,l),a){case"dialog":Re("cancel",e),Re("close",e),u=l;break;case"iframe":case"object":case"embed":Re("load",e),u=l;break;case"video":case"audio":for(u=0;u<bn.length;u++)Re(bn[u],e);u=l;break;case"source":Re("error",e),u=l;break;case"img":case"image":case"link":Re("error",e),Re("load",e),u=l;break;case"details":Re("toggle",e),u=l;break;case"input":di(e,l),u=Xs(e,l),Re("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=F({},l,{value:void 0}),Re("invalid",e);break;case"textarea":P(e,l),u=Zs(e,l),Re("invalid",e);break;default:u=l}Ua(a,u),N=u;for(f in N)if(N.hasOwnProperty(f)){var E=N[f];f==="style"?Oc(e,E):f==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Tc(e,E)):f==="children"?typeof E=="string"?(a!=="textarea"||E!=="")&&tn(e,E):typeof E=="number"&&tn(e,""+E):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(c.hasOwnProperty(f)?E!=null&&f==="onScroll"&&Re("scroll",e):E!=null&&$(e,f,E,g))}switch(a){case"input":ts(e),hi(e,l,!1);break;case"textarea":ts(e),ze(e);break;case"option":l.value!=null&&e.setAttribute("value",""+je(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?sr(e,!!l.multiple,f,!1):l.defaultValue!=null&&sr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Mi)}switch(a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nt(t),null;case 6:if(e&&t.stateNode!=null)Bu(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(n(166));if(a=Lr(Tn.current),Lr(Bt.current),Bi(t)){if(l=t.stateNode,a=t.memoizedProps,l[Ft]=t,(f=l.nodeValue!==a)&&(e=xt,e!==null))switch(e.tag){case 3:Ai(l.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ai(l.nodeValue,a,(e.mode&1)!==0)}f&&(t.flags|=4)}else l=(a.nodeType===9?a:a.ownerDocument).createTextNode(l),l[Ft]=t,t.stateNode=l}return nt(t),null;case 13:if(Oe(Pe),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&gt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Hd(),vs(),t.flags|=98560,f=!1;else if(f=Bi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Ft]=t}else vs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),f=!1}else Ot!==null&&(vl(Ot),Ot=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=a,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Pe.current&1)!==0?Ke===0&&(Ke=3):bl())),t.updateQueue!==null&&(t.flags|=4),nt(t),null);case 4:return js(),ol(e,t),e===null&&jn(t.stateNode.containerInfo),nt(t),null;case 10:return Mo(t.type._context),nt(t),null;case 17:return dt(t.type)&&Li(),nt(t),null;case 19:if(Oe(Pe),f=t.memoizedState,f===null)return nt(t),null;if(l=(t.flags&128)!==0,g=f.rendering,g===null)if(l)An(f,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Gi(e),g!==null){for(t.flags|=128,An(f,!1),l=g.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=a,a=t.child;a!==null;)f=a,e=l,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Ce(Pe,Pe.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ue()>Ss&&(t.flags|=128,l=!0,An(f,!1),t.lanes=4194304)}else{if(!l)if(e=Gi(g),e!==null){if(t.flags|=128,l=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),An(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ie)return nt(t),null}else 2*Ue()-f.renderingStartTime>Ss&&a!==1073741824&&(t.flags|=128,l=!0,An(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(a=f.last,a!==null?a.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ue(),t.sibling=null,a=Pe.current,Ce(Pe,l?a&1|2:a&1),t):(nt(t),null);case 22:case 23:return wl(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(vt&1073741824)!==0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function _p(e,t){switch(To(t),t.tag){case 1:return dt(t.type)&&Li(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return js(),Oe(ct),Oe(rt),Bo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Uo(t),null;case 13:if(Oe(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));vs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe(Pe),null;case 4:return js(),null;case 10:return Mo(t.type._context),null;case 22:case 23:return wl(),null;case 24:return null;default:return null}}var sa=!1,it=!1,kp=typeof WeakSet=="function"?WeakSet:Set,Y=null;function _s(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){Le(e,t,l)}else a.current=null}function ll(e,t,a){try{a()}catch(l){Le(e,t,l)}}var Wu=!1;function Sp(e,t){if(wo=Ni,e=bd(),ho(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var g=0,N=-1,E=-1,z=0,W=0,q=e,B=null;t:for(;;){for(var X;q!==a||u!==0&&q.nodeType!==3||(N=g+u),q!==f||l!==0&&q.nodeType!==3||(E=g+l),q.nodeType===3&&(g+=q.nodeValue.length),(X=q.firstChild)!==null;)B=q,q=X;for(;;){if(q===e)break t;if(B===a&&++z===u&&(N=g),B===f&&++W===l&&(E=g),(X=q.nextSibling)!==null)break;q=B,B=q.parentNode}q=X}a=N===-1||E===-1?null:{start:N,end:E}}else a=null}a=a||{start:0,end:0}}else a=null;for(bo={focusedElem:e,selectionRange:a},Ni=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ee=Z.memoizedProps,Fe=Z.memoizedState,I=t.stateNode,T=I.getSnapshotBeforeUpdate(t.elementType===t.type?ee:It(t.type,ee),Fe);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Le(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return Z=Wu,Wu=!1,Z}function Mn(e,t,a){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&ll(t,a,f)}u=u.next}while(u!==l)}}function na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var l=a.create;a.destroy=l()}a=a.next}while(a!==t)}}function cl(e){var t=e.ref;if(t!==null){var a=e.stateNode;e.tag,e=a,typeof t=="function"?t(e):t.current=e}}function Vu(e){var t=e.alternate;t!==null&&(e.alternate=null,Vu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ft],delete t[_n],delete t[ko],delete t[lp],delete t[cp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hu(e){return e.tag===5||e.tag===3||e.tag===4}function qu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dl(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Mi));else if(l!==4&&(e=e.child,e!==null))for(dl(e,t,a),e=e.sibling;e!==null;)dl(e,t,a),e=e.sibling}function ul(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(ul(e,t,a),e=e.sibling;e!==null;)ul(e,t,a),e=e.sibling}var Ye=null,Pt=!1;function xr(e,t,a){for(a=a.child;a!==null;)Ku(e,t,a),a=a.sibling}function Ku(e,t,a){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(gi,a)}catch{}switch(a.tag){case 5:it||_s(a,t);case 6:var l=Ye,u=Pt;Ye=null,xr(e,t,a),Ye=l,Pt=u,Ye!==null&&(Pt?(e=Ye,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Ye.removeChild(a.stateNode));break;case 18:Ye!==null&&(Pt?(e=Ye,a=a.stateNode,e.nodeType===8?_o(e.parentNode,a):e.nodeType===1&&_o(e,a),fn(e)):_o(Ye,a.stateNode));break;case 4:l=Ye,u=Pt,Ye=a.stateNode.containerInfo,Pt=!0,xr(e,t,a),Ye=l,Pt=u;break;case 0:case 11:case 14:case 15:if(!it&&(l=a.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var f=u,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&ll(a,t,g),u=u.next}while(u!==l)}xr(e,t,a);break;case 1:if(!it&&(_s(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=a.memoizedProps,l.state=a.memoizedState,l.componentWillUnmount()}catch(N){Le(a,t,N)}xr(e,t,a);break;case 21:xr(e,t,a);break;case 22:a.mode&1?(it=(l=it)||a.memoizedState!==null,xr(e,t,a),it=l):xr(e,t,a);break;default:xr(e,t,a)}}function Gu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new kp),t.forEach(function(l){var u=Mp.bind(null,e,l);a.has(l)||(a.add(l),l.then(u,u))})}}function At(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];try{var f=e,g=t,N=g;e:for(;N!==null;){switch(N.tag){case 5:Ye=N.stateNode,Pt=!1;break e;case 3:Ye=N.stateNode.containerInfo,Pt=!0;break e;case 4:Ye=N.stateNode.containerInfo,Pt=!0;break e}N=N.return}if(Ye===null)throw Error(n(160));Ku(f,g,u),Ye=null,Pt=!1;var E=u.alternate;E!==null&&(E.return=null),u.return=null}catch(z){Le(u,t,z)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ju(t,e),t=t.sibling}function Ju(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Vt(e),l&4){try{Mn(3,e,e.return),na(3,e)}catch(ee){Le(e,e.return,ee)}try{Mn(5,e,e.return)}catch(ee){Le(e,e.return,ee)}}break;case 1:At(t,e),Vt(e),l&512&&a!==null&&_s(a,a.return);break;case 5:if(At(t,e),Vt(e),l&512&&a!==null&&_s(a,a.return),e.flags&32){var u=e.stateNode;try{tn(u,"")}catch(ee){Le(e,e.return,ee)}}if(l&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,g=a!==null?a.memoizedProps:f,N=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{N==="input"&&f.type==="radio"&&f.name!=null&&ui(u,f),Fa(N,g);var z=Fa(N,f);for(g=0;g<E.length;g+=2){var W=E[g],q=E[g+1];W==="style"?Oc(u,q):W==="dangerouslySetInnerHTML"?Tc(u,q):W==="children"?tn(u,q):$(u,W,q,z)}switch(N){case"input":Ys(u,f);break;case"textarea":pe(u,f);break;case"select":var B=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var X=f.value;X!=null?sr(u,!!f.multiple,X,!1):B!==!!f.multiple&&(f.defaultValue!=null?sr(u,!!f.multiple,f.defaultValue,!0):sr(u,!!f.multiple,f.multiple?[]:"",!1))}u[_n]=f}catch(ee){Le(e,e.return,ee)}}break;case 6:if(At(t,e),Vt(e),l&4){if(e.stateNode===null)throw Error(n(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(ee){Le(e,e.return,ee)}}break;case 3:if(At(t,e),Vt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fn(t.containerInfo)}catch(ee){Le(e,e.return,ee)}break;case 4:At(t,e),Vt(e);break;case 13:At(t,e),Vt(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(ml=Ue())),l&4&&Gu(e);break;case 22:if(W=a!==null&&a.memoizedState!==null,e.mode&1?(it=(z=it)||W,At(t,e),it=z):At(t,e),Vt(e),l&8192){if(z=e.memoizedState!==null,(e.stateNode.isHidden=z)&&!W&&(e.mode&1)!==0)for(Y=e,W=e.child;W!==null;){for(q=Y=W;Y!==null;){switch(B=Y,X=B.child,B.tag){case 0:case 11:case 14:case 15:Mn(4,B,B.return);break;case 1:_s(B,B.return);var Z=B.stateNode;if(typeof Z.componentWillUnmount=="function"){l=B,a=B.return;try{t=l,Z.props=t.memoizedProps,Z.state=t.memoizedState,Z.componentWillUnmount()}catch(ee){Le(l,a,ee)}}break;case 5:_s(B,B.return);break;case 22:if(B.memoizedState!==null){Yu(q);continue}}X!==null?(X.return=B,Y=X):Yu(q)}W=W.sibling}e:for(W=null,q=e;;){if(q.tag===5){if(W===null){W=q;try{u=q.stateNode,z?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(N=q.stateNode,E=q.memoizedProps.style,g=E!=null&&E.hasOwnProperty("display")?E.display:null,N.style.display=Rc("display",g))}catch(ee){Le(e,e.return,ee)}}}else if(q.tag===6){if(W===null)try{q.stateNode.nodeValue=z?"":q.memoizedProps}catch(ee){Le(e,e.return,ee)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===e)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===e)break e;for(;q.sibling===null;){if(q.return===null||q.return===e)break e;W===q&&(W=null),q=q.return}W===q&&(W=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:At(t,e),Vt(e),l&4&&Gu(e);break;case 21:break;default:At(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(Hu(a)){var l=a;break e}a=a.return}throw Error(n(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(tn(u,""),l.flags&=-33);var f=qu(e);ul(e,f,u);break;case 3:case 4:var g=l.stateNode.containerInfo,N=qu(e);dl(e,N,g);break;default:throw Error(n(161))}}catch(E){Le(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ep(e,t,a){Y=e,Qu(e)}function Qu(e,t,a){for(var l=(e.mode&1)!==0;Y!==null;){var u=Y,f=u.child;if(u.tag===22&&l){var g=u.memoizedState!==null||sa;if(!g){var N=u.alternate,E=N!==null&&N.memoizedState!==null||it;N=sa;var z=it;if(sa=g,(it=E)&&!z)for(Y=u;Y!==null;)g=Y,E=g.child,g.tag===22&&g.memoizedState!==null?Zu(u):E!==null?(E.return=g,Y=E):Zu(u);for(;f!==null;)Y=f,Qu(f),f=f.sibling;Y=u,sa=N,it=z}Xu(e)}else(u.subtreeFlags&8772)!==0&&f!==null?(f.return=u,Y=f):Xu(e)}}function Xu(e){for(;Y!==null;){var t=Y;if((t.flags&8772)!==0){var a=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:it||na(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!it)if(a===null)l.componentDidMount();else{var u=t.elementType===t.type?a.memoizedProps:It(t.type,a.memoizedProps);l.componentDidUpdate(u,a.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Yd(t,f,l);break;case 3:var g=t.updateQueue;if(g!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}Yd(t,g,a)}break;case 5:var N=t.stateNode;if(a===null&&t.flags&4){a=N;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&a.focus();break;case"img":E.src&&(a.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var z=t.alternate;if(z!==null){var W=z.memoizedState;if(W!==null){var q=W.dehydrated;q!==null&&fn(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}it||t.flags&512&&cl(t)}catch(B){Le(t,t.return,B)}}if(t===e){Y=null;break}if(a=t.sibling,a!==null){a.return=t.return,Y=a;break}Y=t.return}}function Yu(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}function Zu(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{na(4,t)}catch(E){Le(t,a,E)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var u=t.return;try{l.componentDidMount()}catch(E){Le(t,u,E)}}var f=t.return;try{cl(t)}catch(E){Le(t,f,E)}break;case 5:var g=t.return;try{cl(t)}catch(E){Le(t,g,E)}}}catch(E){Le(t,t.return,E)}if(t===e){Y=null;break}var N=t.sibling;if(N!==null){N.return=t.return,Y=N;break}Y=t.return}}var Cp=Math.ceil,ia=J.ReactCurrentDispatcher,hl=J.ReactCurrentOwner,Et=J.ReactCurrentBatchConfig,ye=0,Qe=null,We=null,Ze=0,vt=0,ks=ur(0),Ke=0,zn=null,Dr=0,aa=0,fl=0,Ln=null,ht=null,ml=0,Ss=1/0,Zt=null,oa=!1,pl=null,gr=null,la=!1,vr=null,ca=0,$n=0,xl=null,da=-1,ua=0;function lt(){return(ye&6)!==0?Ue():da!==-1?da:da=Ue()}function yr(e){return(e.mode&1)===0?1:(ye&2)!==0&&Ze!==0?Ze&-Ze:up.transition!==null?(ua===0&&(ua=qc()),ua):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:td(e.type)),e)}function Mt(e,t,a,l){if(50<$n)throw $n=0,xl=null,Error(n(185));ln(e,a,l),((ye&2)===0||e!==Qe)&&(e===Qe&&((ye&2)===0&&(aa|=a),Ke===4&&wr(e,Ze)),ft(e,l),a===1&&ye===0&&(t.mode&1)===0&&(Ss=Ue()+500,Di&&fr()))}function ft(e,t){var a=e.callbackNode;um(e,t);var l=wi(e,e===Qe?Ze:0);if(l===0)a!==null&&Wc(a),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(a!=null&&Wc(a),t===1)e.tag===0?dp(th.bind(null,e)):Ud(th.bind(null,e)),ap(function(){(ye&6)===0&&fr()}),a=null;else{switch(Kc(l)){case 1:a=Ga;break;case 4:a=Vc;break;case 16:a=xi;break;case 536870912:a=Hc;break;default:a=xi}a=ch(a,eh.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function eh(e,t){if(da=-1,ua=0,(ye&6)!==0)throw Error(n(327));var a=e.callbackNode;if(Es()&&e.callbackNode!==a)return null;var l=wi(e,e===Qe?Ze:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=ha(e,l);else{t=l;var u=ye;ye|=2;var f=sh();(Qe!==e||Ze!==t)&&(Zt=null,Ss=Ue()+500,Fr(e,t));do try{Op();break}catch(N){rh(e,N)}while(!0);Ao(),ia.current=f,ye=u,We!==null?t=0:(Qe=null,Ze=0,t=Ke)}if(t!==0){if(t===2&&(u=Ja(e),u!==0&&(l=u,t=gl(e,u))),t===1)throw a=zn,Fr(e,0),wr(e,l),ft(e,Ue()),a;if(t===6)wr(e,l);else{if(u=e.current.alternate,(l&30)===0&&!Tp(u)&&(t=ha(e,l),t===2&&(f=Ja(e),f!==0&&(l=f,t=gl(e,f))),t===1))throw a=zn,Fr(e,0),wr(e,l),ft(e,Ue()),a;switch(e.finishedWork=u,e.finishedLanes=l,t){case 0:case 1:throw Error(n(345));case 2:Br(e,ht,Zt);break;case 3:if(wr(e,l),(l&130023424)===l&&(t=ml+500-Ue(),10<t)){if(wi(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){lt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=No(Br.bind(null,e,ht,Zt),t);break}Br(e,ht,Zt);break;case 4:if(wr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,u=-1;0<l;){var g=31-Tt(l);f=1<<g,g=t[g],g>u&&(u=g),l&=~f}if(l=u,l=Ue()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Cp(l/1960))-l,10<l){e.timeoutHandle=No(Br.bind(null,e,ht,Zt),l);break}Br(e,ht,Zt);break;case 5:Br(e,ht,Zt);break;default:throw Error(n(329))}}}return ft(e,Ue()),e.callbackNode===a?eh.bind(null,e):null}function gl(e,t){var a=Ln;return e.current.memoizedState.isDehydrated&&(Fr(e,t).flags|=256),e=ha(e,t),e!==2&&(t=ht,ht=a,t!==null&&vl(t)),e}function vl(e){ht===null?ht=e:ht.push.apply(ht,e)}function Tp(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var l=0;l<a.length;l++){var u=a[l],f=u.getSnapshot;u=u.value;try{if(!Rt(f(),u))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wr(e,t){for(t&=~fl,t&=~aa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-Tt(t),l=1<<a;e[a]=-1,t&=~l}}function th(e){if((ye&6)!==0)throw Error(n(327));Es();var t=wi(e,0);if((t&1)===0)return ft(e,Ue()),null;var a=ha(e,t);if(e.tag!==0&&a===2){var l=Ja(e);l!==0&&(t=l,a=gl(e,l))}if(a===1)throw a=zn,Fr(e,0),wr(e,t),ft(e,Ue()),a;if(a===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,ht,Zt),ft(e,Ue()),null}function yl(e,t){var a=ye;ye|=1;try{return e(t)}finally{ye=a,ye===0&&(Ss=Ue()+500,Di&&fr())}}function Ur(e){vr!==null&&vr.tag===0&&(ye&6)===0&&Es();var t=ye;ye|=1;var a=Et.transition,l=Ne;try{if(Et.transition=null,Ne=1,e)return e()}finally{Ne=l,Et.transition=a,ye=t,(ye&6)===0&&fr()}}function wl(){vt=ks.current,Oe(ks)}function Fr(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ip(a)),We!==null)for(a=We.return;a!==null;){var l=a;switch(To(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Li();break;case 3:js(),Oe(ct),Oe(rt),Bo();break;case 5:Uo(l);break;case 4:js();break;case 13:Oe(Pe);break;case 19:Oe(Pe);break;case 10:Mo(l.type._context);break;case 22:case 23:wl()}a=a.return}if(Qe=e,We=e=br(e.current,null),Ze=vt=t,Ke=0,zn=null,fl=aa=Dr=0,ht=Ln=null,zr!==null){for(t=0;t<zr.length;t++)if(a=zr[t],l=a.interleaved,l!==null){a.interleaved=null;var u=l.next,f=a.pending;if(f!==null){var g=f.next;f.next=u,l.next=g}a.pending=l}zr=null}return e}function rh(e,t){do{var a=We;try{if(Ao(),Ji.current=Zi,Qi){for(var l=Ae.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Qi=!1}if($r=0,Je=qe=Ae=null,Rn=!1,On=0,hl.current=null,a===null||a.return===null){Ke=1,zn=t,We=null;break}e:{var f=e,g=a.return,N=a,E=t;if(t=Ze,N.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var z=E,W=N,q=W.tag;if((W.mode&1)===0&&(q===0||q===11||q===15)){var B=W.alternate;B?(W.updateQueue=B.updateQueue,W.memoizedState=B.memoizedState,W.lanes=B.lanes):(W.updateQueue=null,W.memoizedState=null)}var X=Eu(g);if(X!==null){X.flags&=-257,Cu(X,g,N,f,t),X.mode&1&&Su(f,z,t),t=X,E=z;var Z=t.updateQueue;if(Z===null){var ee=new Set;ee.add(E),t.updateQueue=ee}else Z.add(E);break e}else{if((t&1)===0){Su(f,z,t),bl();break e}E=Error(n(426))}}else if(Ie&&N.mode&1){var Fe=Eu(g);if(Fe!==null){(Fe.flags&65536)===0&&(Fe.flags|=256),Cu(Fe,g,N,f,t),Io(Ns(E,N));break e}}f=E=Ns(E,N),Ke!==4&&(Ke=2),Ln===null?Ln=[f]:Ln.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var I=_u(f,E,t);Xd(f,I);break e;case 1:N=E;var T=f.type,A=f.stateNode;if((f.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(gr===null||!gr.has(A)))){f.flags|=65536,t&=-t,f.lanes|=t;var K=ku(f,N,t);Xd(f,K);break e}}f=f.return}while(f!==null)}ih(a)}catch(te){t=te,We===a&&a!==null&&(We=a=a.return);continue}break}while(!0)}function sh(){var e=ia.current;return ia.current=Zi,e===null?Zi:e}function bl(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||(Dr&268435455)===0&&(aa&268435455)===0||wr(Qe,Ze)}function ha(e,t){var a=ye;ye|=2;var l=sh();(Qe!==e||Ze!==t)&&(Zt=null,Fr(e,t));do try{Rp();break}catch(u){rh(e,u)}while(!0);if(Ao(),ye=a,ia.current=l,We!==null)throw Error(n(261));return Qe=null,Ze=0,Ke}function Rp(){for(;We!==null;)nh(We)}function Op(){for(;We!==null&&!rm();)nh(We)}function nh(e){var t=lh(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?ih(e):We=t,hl.current=null}function ih(e){var t=e;do{var a=t.alternate;if(e=t.return,(t.flags&32768)===0){if(a=Np(a,t,vt),a!==null){We=a;return}}else{if(a=_p(a,t),a!==null){a.flags&=32767,We=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,We=null;return}}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ke===0&&(Ke=5)}function Br(e,t,a){var l=Ne,u=Et.transition;try{Et.transition=null,Ne=1,Ip(e,t,a,l)}finally{Et.transition=u,Ne=l}return null}function Ip(e,t,a,l){do Es();while(vr!==null);if((ye&6)!==0)throw Error(n(327));a=e.finishedWork;var u=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=a.lanes|a.childLanes;if(hm(e,f),e===Qe&&(We=Qe=null,Ze=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||la||(la=!0,ch(xi,function(){return Es(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=Et.transition,Et.transition=null;var g=Ne;Ne=1;var N=ye;ye|=4,hl.current=null,Sp(e,a),Ju(a,e),Ym(bo),Ni=!!wo,bo=wo=null,e.current=a,Ep(a),sm(),ye=N,Ne=g,Et.transition=f}else e.current=a;if(la&&(la=!1,vr=e,ca=u),f=e.pendingLanes,f===0&&(gr=null),am(a.stateNode),ft(e,Ue()),t!==null)for(l=e.onRecoverableError,a=0;a<t.length;a++)u=t[a],l(u.value,{componentStack:u.stack,digest:u.digest});if(oa)throw oa=!1,e=pl,pl=null,e;return(ca&1)!==0&&e.tag!==0&&Es(),f=e.pendingLanes,(f&1)!==0?e===xl?$n++:($n=0,xl=e):$n=0,fr(),null}function Es(){if(vr!==null){var e=Kc(ca),t=Et.transition,a=Ne;try{if(Et.transition=null,Ne=16>e?16:e,vr===null)var l=!1;else{if(e=vr,vr=null,ca=0,(ye&6)!==0)throw Error(n(331));var u=ye;for(ye|=4,Y=e.current;Y!==null;){var f=Y,g=f.child;if((Y.flags&16)!==0){var N=f.deletions;if(N!==null){for(var E=0;E<N.length;E++){var z=N[E];for(Y=z;Y!==null;){var W=Y;switch(W.tag){case 0:case 11:case 15:Mn(8,W,f)}var q=W.child;if(q!==null)q.return=W,Y=q;else for(;Y!==null;){W=Y;var B=W.sibling,X=W.return;if(Vu(W),W===z){Y=null;break}if(B!==null){B.return=X,Y=B;break}Y=X}}}var Z=f.alternate;if(Z!==null){var ee=Z.child;if(ee!==null){Z.child=null;do{var Fe=ee.sibling;ee.sibling=null,ee=Fe}while(ee!==null)}}Y=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Y=g;else e:for(;Y!==null;){if(f=Y,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Mn(9,f,f.return)}var I=f.sibling;if(I!==null){I.return=f.return,Y=I;break e}Y=f.return}}var T=e.current;for(Y=T;Y!==null;){g=Y;var A=g.child;if((g.subtreeFlags&2064)!==0&&A!==null)A.return=g,Y=A;else e:for(g=T;Y!==null;){if(N=Y,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:na(9,N)}}catch(te){Le(N,N.return,te)}if(N===g){Y=null;break e}var K=N.sibling;if(K!==null){K.return=N.return,Y=K;break e}Y=N.return}}if(ye=u,fr(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(gi,e)}catch{}l=!0}return l}finally{Ne=a,Et.transition=t}}return!1}function ah(e,t,a){t=Ns(a,t),t=_u(e,t,1),e=pr(e,t,1),t=lt(),e!==null&&(ln(e,1,t),ft(e,t))}function Le(e,t,a){if(e.tag===3)ah(e,e,a);else for(;t!==null;){if(t.tag===3){ah(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gr===null||!gr.has(l))){e=Ns(a,e),e=ku(t,e,1),t=pr(t,e,1),e=lt(),t!==null&&(ln(t,1,e),ft(t,e));break}}t=t.return}}function Pp(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&a,Qe===e&&(Ze&a)===a&&(Ke===4||Ke===3&&(Ze&130023424)===Ze&&500>Ue()-ml?Fr(e,0):fl|=a),ft(e,t)}function oh(e,t){t===0&&((e.mode&1)===0?t=1:(t=yi,yi<<=1,(yi&130023424)===0&&(yi=4194304)));var a=lt();e=Qt(e,t),e!==null&&(ln(e,t,a),ft(e,a))}function Ap(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),oh(e,a)}function Mp(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(t),oh(e,a)}var lh;lh=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ut=!0;else{if((e.lanes&a)===0&&(t.flags&128)===0)return ut=!1,jp(e,t,a);ut=(e.flags&131072)!==0}else ut=!1,Ie&&(t.flags&1048576)!==0&&Fd(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;ra(e,t),e=t.pendingProps;var u=ps(t,rt.current);bs(t,a),u=Ho(null,t,l,e,u,a);var f=qo();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(l)?(f=!0,$i(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,$o(t),u.updater=ea,t.stateNode=u,u._reactInternals=t,Yo(t,l,e,a),t=rl(null,t,l,!0,f,a)):(t.tag=0,Ie&&f&&Co(t),ot(null,t,u,a),t=t.child),t;case 16:l=t.elementType;e:{switch(ra(e,t),e=t.pendingProps,u=l._init,l=u(l._payload),t.type=l,u=t.tag=Lp(l),e=It(l,e),u){case 0:t=tl(null,t,l,e,a);break e;case 1:t=Au(null,t,l,e,a);break e;case 11:t=Tu(null,t,l,e,a);break e;case 14:t=Ru(null,t,l,It(l.type,e),a);break e}throw Error(n(306,l,""))}return t;case 0:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:It(l,u),tl(e,t,l,u,a);case 1:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:It(l,u),Au(e,t,l,u,a);case 3:e:{if(Mu(t),e===null)throw Error(n(387));l=t.pendingProps,f=t.memoizedState,u=f.element,Qd(e,t),Ki(t,l,null,a);var g=t.memoizedState;if(l=g.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=Ns(Error(n(423)),t),t=zu(e,t,l,a,u);break e}else if(l!==u){u=Ns(Error(n(424)),t),t=zu(e,t,l,a,u);break e}else for(gt=dr(t.stateNode.containerInfo.firstChild),xt=t,Ie=!0,Ot=null,a=Gd(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(vs(),l===u){t=Yt(e,t,a);break e}ot(e,t,l,a)}t=t.child}return t;case 5:return Zd(t),e===null&&Oo(t),l=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,g=u.children,jo(l,u)?g=null:f!==null&&jo(l,f)&&(t.flags|=32),Pu(e,t),ot(e,t,g,a),t.child;case 6:return e===null&&Oo(t),null;case 13:return Lu(e,t,a);case 4:return Do(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ys(t,null,l,a):ot(e,t,l,a),t.child;case 11:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:It(l,u),Tu(e,t,l,u,a);case 7:return ot(e,t,t.pendingProps,a),t.child;case 8:return ot(e,t,t.pendingProps.children,a),t.child;case 12:return ot(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(l=t.type._context,u=t.pendingProps,f=t.memoizedProps,g=u.value,Ce(Vi,l._currentValue),l._currentValue=g,f!==null)if(Rt(f.value,g)){if(f.children===u.children&&!ct.current){t=Yt(e,t,a);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var N=f.dependencies;if(N!==null){g=f.child;for(var E=N.firstContext;E!==null;){if(E.context===l){if(f.tag===1){E=Xt(-1,a&-a),E.tag=2;var z=f.updateQueue;if(z!==null){z=z.shared;var W=z.pending;W===null?E.next=E:(E.next=W.next,W.next=E),z.pending=E}}f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),zo(f.return,a,t),N.lanes|=a;break}E=E.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(n(341));g.lanes|=a,N=g.alternate,N!==null&&(N.lanes|=a),zo(g,a,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}ot(e,t,u.children,a),t=t.child}return t;case 9:return u=t.type,l=t.pendingProps.children,bs(t,a),u=kt(u),l=l(u),t.flags|=1,ot(e,t,l,a),t.child;case 14:return l=t.type,u=It(l,t.pendingProps),u=It(l.type,u),Ru(e,t,l,u,a);case 15:return Ou(e,t,t.type,t.pendingProps,a);case 17:return l=t.type,u=t.pendingProps,u=t.elementType===l?u:It(l,u),ra(e,t),t.tag=1,dt(l)?(e=!0,$i(t)):e=!1,bs(t,a),ju(t,l,u),Yo(t,l,u,a),rl(null,t,l,!0,e,a);case 19:return Du(e,t,a);case 22:return Iu(e,t,a)}throw Error(n(156,t.tag))};function ch(e,t){return Bc(e,t)}function zp(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,a,l){return new zp(e,t,a,l)}function jl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lp(e){if(typeof e=="function")return jl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ee)return 11;if(e===C)return 14}return 2}function br(e,t){var a=e.alternate;return a===null?(a=Ct(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function fa(e,t,a,l,u,f){var g=2;if(l=e,typeof e=="function")jl(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ie:return Wr(a.children,u,f,t);case fe:g=8,u|=8;break;case _e:return e=Ct(12,a,t,u|2),e.elementType=_e,e.lanes=f,e;case he:return e=Ct(13,a,t,u),e.elementType=he,e.lanes=f,e;case w:return e=Ct(19,a,t,u),e.elementType=w,e.lanes=f,e;case G:return ma(a,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case De:g=10;break e;case we:g=9;break e;case Ee:g=11;break e;case C:g=14;break e;case V:g=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=Ct(g,a,t,u),t.elementType=e,t.type=l,t.lanes=f,t}function Wr(e,t,a,l){return e=Ct(7,e,l,t),e.lanes=a,e}function ma(e,t,a,l){return e=Ct(22,e,l,t),e.elementType=G,e.lanes=a,e.stateNode={isHidden:!1},e}function Nl(e,t,a){return e=Ct(6,e,null,t),e.lanes=a,e}function _l(e,t,a){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $p(e,t,a,l,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qa(0),this.expirationTimes=Qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function kl(e,t,a,l,u,f,g,N,E){return e=new $p(e,t,a,N,E),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Ct(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:l,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},$o(f),e}function Dp(e,t,a){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:l==null?null:""+l,children:e,containerInfo:t,implementation:a}}function dh(e){if(!e)return hr;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var a=e.type;if(dt(a))return $d(e,a,t)}return t}function uh(e,t,a,l,u,f,g,N,E){return e=kl(a,l,!0,e,u,f,g,N,E),e.context=dh(null),a=e.current,l=lt(),u=yr(a),f=Xt(l,u),f.callback=t??null,pr(a,f,u),e.current.lanes=u,ln(e,u,l),ft(e,l),e}function pa(e,t,a,l){var u=t.current,f=lt(),g=yr(u);return a=dh(a),t.context===null?t.context=a:t.pendingContext=a,t=Xt(f,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=pr(u,t,g),e!==null&&(Mt(e,u,g,f),qi(e,u,g)),g}function xa(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function hh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Sl(e,t){hh(e,t),(e=e.alternate)&&hh(e,t)}function Up(){return null}var fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function El(e){this._internalRoot=e}ga.prototype.render=El.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));pa(e,t,null,null)},ga.prototype.unmount=El.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ur(function(){pa(null,e,null,null)}),t[qt]=null}};function ga(e){this._internalRoot=e}ga.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<or.length&&t!==0&&t<or[a].priority;a++);or.splice(a,0,e),a===0&&Zc(e)}};function Cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function va(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mh(){}function Fp(e,t,a,l,u){if(u){if(typeof l=="function"){var f=l;l=function(){var z=xa(g);f.call(z)}}var g=uh(t,l,e,0,null,!1,!1,"",mh);return e._reactRootContainer=g,e[qt]=g.current,jn(e.nodeType===8?e.parentNode:e),Ur(),g}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var N=l;l=function(){var z=xa(E);N.call(z)}}var E=kl(e,0,!1,null,null,!1,!1,"",mh);return e._reactRootContainer=E,e[qt]=E.current,jn(e.nodeType===8?e.parentNode:e),Ur(function(){pa(t,E,a,l)}),E}function ya(e,t,a,l,u){var f=a._reactRootContainer;if(f){var g=f;if(typeof u=="function"){var N=u;u=function(){var E=xa(g);N.call(E)}}pa(t,g,e,u)}else g=Fp(a,t,e,u,l);return xa(g)}Gc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=on(t.pendingLanes);a!==0&&(Xa(t,a|1),ft(t,Ue()),(ye&6)===0&&(Ss=Ue()+500,fr()))}break;case 13:Ur(function(){var l=Qt(e,1);if(l!==null){var u=lt();Mt(l,e,1,u)}}),Sl(e,1)}},Ya=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var a=lt();Mt(t,e,134217728,a)}Sl(e,134217728)}},Jc=function(e){if(e.tag===13){var t=yr(e),a=Qt(e,t);if(a!==null){var l=lt();Mt(a,e,t,l)}Sl(e,t)}},Qc=function(){return Ne},Xc=function(e,t){var a=Ne;try{return Ne=e,t()}finally{Ne=a}},Va=function(e,t,a){switch(t){case"input":if(Ys(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var u=zi(l);if(!u)throw Error(n(90));ci(l),Ys(l,u)}}}break;case"textarea":pe(e,a);break;case"select":t=a.value,t!=null&&sr(e,!!a.multiple,t,!1)}},Mc=yl,zc=Ur;var Bp={usingClientEntryPoint:!1,Events:[kn,fs,zi,Pc,Ac,yl]},Dn={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wp={bundleType:Dn.bundleType,version:Dn.version,rendererPackageName:Dn.rendererPackageName,rendererConfig:Dn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uc(e),e===null?null:e.stateNode},findFiberByHostInstance:Dn.findFiberByHostInstance||Up,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wa.isDisabled&&wa.supportsFiber)try{gi=wa.inject(Wp),Ut=wa}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bp,mt.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cl(t))throw Error(n(200));return Dp(e,t,null,a)},mt.createRoot=function(e,t){if(!Cl(e))throw Error(n(299));var a=!1,l="",u=fh;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=kl(e,1,!1,null,null,a,!1,l,u),e[qt]=t.current,jn(e.nodeType===8?e.parentNode:e),new El(t)},mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=Uc(t),e=e===null?null:e.stateNode,e},mt.flushSync=function(e){return Ur(e)},mt.hydrate=function(e,t,a){if(!va(t))throw Error(n(200));return ya(null,e,t,!0,a)},mt.hydrateRoot=function(e,t,a){if(!Cl(e))throw Error(n(405));var l=a!=null&&a.hydratedSources||null,u=!1,f="",g=fh;if(a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),t=uh(t,null,e,1,a??null,u,!1,f,g),e[qt]=t.current,jn(e),l)for(e=0;e<l.length;e++)a=l[e],u=a._getVersion,u=u(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,u]:t.mutableSourceEagerHydrationData.push(a,u);return new ga(t)},mt.render=function(e,t,a){if(!va(t))throw Error(n(200));return ya(null,e,t,!1,a)},mt.unmountComponentAtNode=function(e){if(!va(e))throw Error(n(40));return e._reactRootContainer?(Ur(function(){ya(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1},mt.unstable_batchedUpdates=yl,mt.unstable_renderSubtreeIntoContainer=function(e,t,a,l){if(!va(a))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return ya(e,t,a,!1,l)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var jh;function pf(){if(jh)return Ol.exports;jh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Ol.exports=Yp(),Ol.exports}var Nh;function Zp(){if(Nh)return ba;Nh=1;var i=pf();return ba.createRoot=i.createRoot,ba.hydrateRoot=i.hydrateRoot,ba}var e0=Zp();const t0=hc(e0);var r0=pf();function qn(){return qn=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},qn.apply(this,arguments)}var kr;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(kr||(kr={}));const _h="popstate";function s0(i){i===void 0&&(i={});function r(o,c){let{pathname:d,search:h,hash:m}=o.location;return Jl("",{pathname:d,search:h,hash:m},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){return typeof c=="string"?c:Ca(c)}return i0(r,n,null,i)}function Be(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function fc(i,r){if(!i){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function n0(){return Math.random().toString(36).substr(2,8)}function kh(i,r){return{usr:i.state,key:i.key,idx:r}}function Jl(i,r,n,o){return n===void 0&&(n=null),qn({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof r=="string"?qs(r):r,{state:n,key:r&&r.key||o||n0()})}function Ca(i){let{pathname:r="/",search:n="",hash:o=""}=i;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(r+=o.charAt(0)==="#"?o:"#"+o),r}function qs(i){let r={};if(i){let n=i.indexOf("#");n>=0&&(r.hash=i.substr(n),i=i.substr(0,n));let o=i.indexOf("?");o>=0&&(r.search=i.substr(o),i=i.substr(0,o)),i&&(r.pathname=i)}return r}function i0(i,r,n,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:d=!1}=o,h=c.history,m=kr.Pop,p=null,v=y();v==null&&(v=0,h.replaceState(qn({},h.state,{idx:v}),""));function y(){return(h.state||{idx:null}).idx}function b(){m=kr.Pop;let j=y(),O=j==null?null:j-v;v=j,p&&p({action:m,location:x.location,delta:O})}function k(j,O){m=kr.Push;let M=Jl(x.location,j,O);v=y()+1;let $=kh(M,v),J=x.createHref(M);try{h.pushState($,"",J)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;c.location.assign(J)}d&&p&&p({action:m,location:x.location,delta:1})}function S(j,O){m=kr.Replace;let M=Jl(x.location,j,O);v=y();let $=kh(M,v),J=x.createHref(M);h.replaceState($,"",J),d&&p&&p({action:m,location:x.location,delta:0})}function _(j){let O=c.location.origin!=="null"?c.location.origin:c.location.href,M=typeof j=="string"?j:Ca(j);return M=M.replace(/ $/,"%20"),Be(O,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,O)}let x={get action(){return m},get location(){return i(c,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(_h,b),p=j,()=>{c.removeEventListener(_h,b),p=null}},createHref(j){return r(c,j)},createURL:_,encodeLocation(j){let O=_(j);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:k,replace:S,go(j){return h.go(j)}};return x}var Sh;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Sh||(Sh={}));function a0(i,r,n){return n===void 0&&(n="/"),o0(i,r,n)}function o0(i,r,n,o){let c=typeof r=="string"?qs(r):r,d=mc(c.pathname||"/",n);if(d==null)return null;let h=xf(i);l0(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let v=w0(d);m=g0(h[p],v)}return m}function xf(i,r,n,o){r===void 0&&(r=[]),n===void 0&&(n=[]),o===void 0&&(o="");let c=(d,h,m)=>{let p={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};p.relativePath.startsWith("/")&&(Be(p.relativePath.startsWith(o),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(o.length));let v=Sr([o,p.relativePath]),y=n.concat(p);d.children&&d.children.length>0&&(Be(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),xf(d.children,r,y,v)),!(d.path==null&&!d.index)&&r.push({path:v,score:p0(v,d.index),routesMeta:y})};return i.forEach((d,h)=>{var m;if(d.path===""||!((m=d.path)!=null&&m.includes("?")))c(d,h);else for(let p of gf(d.path))c(d,h,p)}),r}function gf(i){let r=i.split("/");if(r.length===0)return[];let[n,...o]=r,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let h=gf(o.join("/")),m=[];return m.push(...h.map(p=>p===""?d:[d,p].join("/"))),c&&m.push(...h),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function l0(i){i.sort((r,n)=>r.score!==n.score?n.score-r.score:x0(r.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const c0=/^:[\w-]+$/,d0=3,u0=2,h0=1,f0=10,m0=-2,Eh=i=>i==="*";function p0(i,r){let n=i.split("/"),o=n.length;return n.some(Eh)&&(o+=m0),r&&(o+=u0),n.filter(c=>!Eh(c)).reduce((c,d)=>c+(c0.test(d)?d0:d===""?h0:f0),o)}function x0(i,r){return i.length===r.length&&i.slice(0,-1).every((o,c)=>o===r[c])?i[i.length-1]-r[r.length-1]:0}function g0(i,r,n){let{routesMeta:o}=i,c={},d="/",h=[];for(let m=0;m<o.length;++m){let p=o[m],v=m===o.length-1,y=d==="/"?r:r.slice(d.length)||"/",b=v0({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},y),k=p.route;if(!b)return null;Object.assign(c,b.params),h.push({params:c,pathname:Sr([d,b.pathname]),pathnameBase:k0(Sr([d,b.pathnameBase])),route:k}),b.pathnameBase!=="/"&&(d=Sr([d,b.pathnameBase]))}return h}function v0(i,r){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,o]=y0(i.path,i.caseSensitive,i.end),c=r.match(n);if(!c)return null;let d=c[0],h=d.replace(/(.)\/+$/,"$1"),m=c.slice(1);return{params:o.reduce((v,y,b)=>{let{paramName:k,isOptional:S}=y;if(k==="*"){let x=m[b]||"";h=d.slice(0,d.length-x.length).replace(/(.)\/+$/,"$1")}const _=m[b];return S&&!_?v[k]=void 0:v[k]=(_||"").replace(/%2F/g,"/"),v},{}),pathname:d,pathnameBase:h,pattern:i}}function y0(i,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),fc(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],c="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(o.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),c+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":i!==""&&i!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),o]}function w0(i){try{return i.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return fc(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),i}}function mc(i,r){if(r==="/")return i;if(!i.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,o=i.charAt(n);return o&&o!=="/"?null:i.slice(n)||"/"}const b0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j0=i=>b0.test(i);function N0(i,r){r===void 0&&(r="/");let{pathname:n,search:o="",hash:c=""}=typeof i=="string"?qs(i):i,d;if(n)if(j0(n))d=n;else{if(n.includes("//")){let h=n;n=n.replace(/\/\/+/g,"/"),fc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(h+" -> "+n))}n.startsWith("/")?d=Ch(n.substring(1),"/"):d=Ch(n,r)}else d=r;return{pathname:d,search:S0(o),hash:E0(c)}}function Ch(i,r){let n=r.replace(/\/+$/,"").split("/");return i.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function Al(i,r,n,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _0(i){return i.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function pc(i,r){let n=_0(i);return r?n.map((o,c)=>c===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function xc(i,r,n,o){o===void 0&&(o=!1);let c;typeof i=="string"?c=qs(i):(c=qn({},i),Be(!c.pathname||!c.pathname.includes("?"),Al("?","pathname","search",c)),Be(!c.pathname||!c.pathname.includes("#"),Al("#","pathname","hash",c)),Be(!c.search||!c.search.includes("#"),Al("#","search","hash",c)));let d=i===""||c.pathname==="",h=d?"/":c.pathname,m;if(h==null)m=n;else{let b=r.length-1;if(!o&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),b-=1;c.pathname=k.join("/")}m=b>=0?r[b]:"/"}let p=N0(c,m),v=h&&h!=="/"&&h.endsWith("/"),y=(d||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(v||y)&&(p.pathname+="/"),p}const Sr=i=>i.join("/").replace(/\/\/+/g,"/"),k0=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),S0=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,E0=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function C0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const vf=["post","put","patch","delete"];new Set(vf);const T0=["get",...vf];new Set(T0);function Kn(){return Kn=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},Kn.apply(this,arguments)}const gc=L.createContext(null),R0=L.createContext(null),Cr=L.createContext(null),Ma=L.createContext(null),tr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),yf=L.createContext(null);function O0(i,r){let{relative:n}=r===void 0?{}:r;Ks()||Be(!1);let{basename:o,navigator:c}=L.useContext(Cr),{hash:d,pathname:h,search:m}=bf(i,{relative:n}),p=h;return o!=="/"&&(p=h==="/"?o:Sr([o,h])),c.createHref({pathname:p,search:m,hash:d})}function Ks(){return L.useContext(Ma)!=null}function Gs(){return Ks()||Be(!1),L.useContext(Ma).location}function wf(i){L.useContext(Cr).static||L.useLayoutEffect(i)}function vc(){let{isDataRoute:i}=L.useContext(tr);return i?q0():I0()}function I0(){Ks()||Be(!1);let i=L.useContext(gc),{basename:r,future:n,navigator:o}=L.useContext(Cr),{matches:c}=L.useContext(tr),{pathname:d}=Gs(),h=JSON.stringify(pc(c,n.v7_relativeSplatPath)),m=L.useRef(!1);return wf(()=>{m.current=!0}),L.useCallback(function(v,y){if(y===void 0&&(y={}),!m.current)return;if(typeof v=="number"){o.go(v);return}let b=xc(v,JSON.parse(h),d,y.relative==="path");i==null&&r!=="/"&&(b.pathname=b.pathname==="/"?r:Sr([r,b.pathname])),(y.replace?o.replace:o.push)(b,y.state,y)},[r,o,h,d,i])}const P0=L.createContext(null);function A0(i){let r=L.useContext(tr).outlet;return r&&L.createElement(P0.Provider,{value:i},r)}function bf(i,r){let{relative:n}=r===void 0?{}:r,{future:o}=L.useContext(Cr),{matches:c}=L.useContext(tr),{pathname:d}=Gs(),h=JSON.stringify(pc(c,o.v7_relativeSplatPath));return L.useMemo(()=>xc(i,JSON.parse(h),d,n==="path"),[i,h,d,n])}function M0(i,r){return z0(i,r)}function z0(i,r,n,o){Ks()||Be(!1);let{navigator:c}=L.useContext(Cr),{matches:d}=L.useContext(tr),h=d[d.length-1],m=h?h.params:{};h&&h.pathname;let p=h?h.pathnameBase:"/";h&&h.route;let v=Gs(),y;if(r){var b;let j=typeof r=="string"?qs(r):r;p==="/"||(b=j.pathname)!=null&&b.startsWith(p)||Be(!1),y=j}else y=v;let k=y.pathname||"/",S=k;if(p!=="/"){let j=p.replace(/^\//,"").split("/");S="/"+k.replace(/^\//,"").split("/").slice(j.length).join("/")}let _=a0(i,{pathname:S}),x=F0(_&&_.map(j=>Object.assign({},j,{params:Object.assign({},m,j.params),pathname:Sr([p,c.encodeLocation?c.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:Sr([p,c.encodeLocation?c.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),d,n,o);return r&&x?L.createElement(Ma.Provider,{value:{location:Kn({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:kr.Pop}},x):x}function L0(){let i=H0(),r=C0(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},r),n?L.createElement("pre",{style:c},n):null,null)}const $0=L.createElement(L0,null);class D0 extends L.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?L.createElement(tr.Provider,{value:this.props.routeContext},L.createElement(yf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U0(i){let{routeContext:r,match:n,children:o}=i,c=L.useContext(gc);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(tr.Provider,{value:r},o)}function F0(i,r,n,o){var c;if(r===void 0&&(r=[]),n===void 0&&(n=null),o===void 0&&(o=null),i==null){var d;if(!n)return null;if(n.errors)i=n.matches;else if((d=o)!=null&&d.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let h=i,m=(c=n)==null?void 0:c.errors;if(m!=null){let y=h.findIndex(b=>b.route.id&&m?.[b.route.id]!==void 0);y>=0||Be(!1),h=h.slice(0,Math.min(h.length,y+1))}let p=!1,v=-1;if(n&&o&&o.v7_partialHydration)for(let y=0;y<h.length;y++){let b=h[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(v=y),b.route.id){let{loaderData:k,errors:S}=n,_=b.route.loader&&k[b.route.id]===void 0&&(!S||S[b.route.id]===void 0);if(b.route.lazy||_){p=!0,v>=0?h=h.slice(0,v+1):h=[h[0]];break}}}return h.reduceRight((y,b,k)=>{let S,_=!1,x=null,j=null;n&&(S=m&&b.route.id?m[b.route.id]:void 0,x=b.route.errorElement||$0,p&&(v<0&&k===0?(K0("route-fallback"),_=!0,j=null):v===k&&(_=!0,j=b.route.hydrateFallbackElement||null)));let O=r.concat(h.slice(0,k+1)),M=()=>{let $;return S?$=x:_?$=j:b.route.Component?$=L.createElement(b.route.Component,null):b.route.element?$=b.route.element:$=y,L.createElement(U0,{match:b,routeContext:{outlet:y,matches:O,isDataRoute:n!=null},children:$})};return n&&(b.route.ErrorBoundary||b.route.errorElement||k===0)?L.createElement(D0,{location:n.location,revalidation:n.revalidation,component:x,error:S,children:M(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):M()},null)}var jf=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(jf||{}),Nf=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(Nf||{});function B0(i){let r=L.useContext(gc);return r||Be(!1),r}function W0(i){let r=L.useContext(R0);return r||Be(!1),r}function V0(i){let r=L.useContext(tr);return r||Be(!1),r}function _f(i){let r=V0(),n=r.matches[r.matches.length-1];return n.route.id||Be(!1),n.route.id}function H0(){var i;let r=L.useContext(yf),n=W0(),o=_f();return r!==void 0?r:(i=n.errors)==null?void 0:i[o]}function q0(){let{router:i}=B0(jf.UseNavigateStable),r=_f(Nf.UseNavigateStable),n=L.useRef(!1);return wf(()=>{n.current=!0}),L.useCallback(function(c,d){d===void 0&&(d={}),n.current&&(typeof c=="number"?i.navigate(c):i.navigate(c,Kn({fromRouteId:r},d)))},[i,r])}const Th={};function K0(i,r,n){Th[i]||(Th[i]=!0)}function G0(i,r){i?.v7_startTransition,i?.v7_relativeSplatPath}function Ql(i){let{to:r,replace:n,state:o,relative:c}=i;Ks()||Be(!1);let{future:d,static:h}=L.useContext(Cr),{matches:m}=L.useContext(tr),{pathname:p}=Gs(),v=vc(),y=xc(r,pc(m,d.v7_relativeSplatPath),p,c==="path"),b=JSON.stringify(y);return L.useEffect(()=>v(JSON.parse(b),{replace:n,state:o,relative:c}),[v,b,c,n,o]),null}function J0(i){return A0(i.context)}function yt(i){Be(!1)}function Q0(i){let{basename:r="/",children:n=null,location:o,navigationType:c=kr.Pop,navigator:d,static:h=!1,future:m}=i;Ks()&&Be(!1);let p=r.replace(/^\/*/,"/"),v=L.useMemo(()=>({basename:p,navigator:d,static:h,future:Kn({v7_relativeSplatPath:!1},m)}),[p,m,d,h]);typeof o=="string"&&(o=qs(o));let{pathname:y="/",search:b="",hash:k="",state:S=null,key:_="default"}=o,x=L.useMemo(()=>{let j=mc(y,p);return j==null?null:{location:{pathname:j,search:b,hash:k,state:S,key:_},navigationType:c}},[p,y,b,k,S,_,c]);return x==null?null:L.createElement(Cr.Provider,{value:v},L.createElement(Ma.Provider,{children:n,value:x}))}function X0(i){let{children:r,location:n}=i;return M0(Xl(r),n)}new Promise(()=>{});function Xl(i,r){r===void 0&&(r=[]);let n=[];return L.Children.forEach(i,(o,c)=>{if(!L.isValidElement(o))return;let d=[...r,c];if(o.type===L.Fragment){n.push.apply(n,Xl(o.props.children,d));return}o.type!==yt&&Be(!1),!o.props.index||!o.props.children||Be(!1);let h={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=Xl(o.props.children,d)),n.push(h)}),n}function Yl(){return Yl=Object.assign?Object.assign.bind():function(i){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},Yl.apply(this,arguments)}function Y0(i,r){if(i==null)return{};var n={},o=Object.keys(i),c,d;for(d=0;d<o.length;d++)c=o[d],!(r.indexOf(c)>=0)&&(n[c]=i[c]);return n}function Z0(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ex(i,r){return i.button===0&&(!r||r==="_self")&&!Z0(i)}const tx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rx="6";try{window.__reactRouterVersion=rx}catch{}const sx="startTransition",Rh=Jp[sx];function nx(i){let{basename:r,children:n,future:o,window:c}=i,d=L.useRef();d.current==null&&(d.current=s0({window:c,v5Compat:!0}));let h=d.current,[m,p]=L.useState({action:h.action,location:h.location}),{v7_startTransition:v}=o||{},y=L.useCallback(b=>{v&&Rh?Rh(()=>p(b)):p(b)},[p,v]);return L.useLayoutEffect(()=>h.listen(y),[h,y]),L.useEffect(()=>G0(o),[o]),L.createElement(Q0,{basename:r,children:n,location:m.location,navigationType:m.action,navigator:h,future:o})}const ix=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ax=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ox=L.forwardRef(function(r,n){let{onClick:o,relative:c,reloadDocument:d,replace:h,state:m,target:p,to:v,preventScrollReset:y,viewTransition:b}=r,k=Y0(r,tx),{basename:S}=L.useContext(Cr),_,x=!1;if(typeof v=="string"&&ax.test(v)&&(_=v,ix))try{let $=new URL(window.location.href),J=v.startsWith("//")?new URL($.protocol+v):new URL(v),se=mc(J.pathname,S);J.origin===$.origin&&se!=null?v=se+J.search+J.hash:x=!0}catch{}let j=O0(v,{relative:c}),O=lx(v,{replace:h,state:m,target:p,preventScrollReset:y,relative:c,viewTransition:b});function M($){o&&o($),$.defaultPrevented||O($)}return L.createElement("a",Yl({},k,{href:_||j,onClick:x||d?o:M,ref:n,target:p}))});var Oh;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Oh||(Oh={}));var Ih;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Ih||(Ih={}));function lx(i,r){let{target:n,replace:o,state:c,preventScrollReset:d,relative:h,viewTransition:m}=r===void 0?{}:r,p=vc(),v=Gs(),y=bf(i,{relative:h});return L.useCallback(b=>{if(ex(b,n)){b.preventDefault();let k=o!==void 0?o:Ca(v)===Ca(y);p(i,{replace:k,state:c,preventScrollReset:d,relative:h,viewTransition:m})}},[v,p,y,o,c,n,i,d,h,m])}var cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(i,r)=>{const n=L.forwardRef(({color:o="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:h,className:m="",children:p,...v},y)=>L.createElement("svg",{ref:y,...cx,width:c,height:c,stroke:o,strokeWidth:h?Number(d)*24/Number(c):d,className:["lucide",`lucide-${dx(i)}`,m].join(" "),...v},[...r.map(([b,k])=>L.createElement(b,k)),...Array.isArray(p)?p:[p]]));return n.displayName=`${i}`,n};const Zl=ne("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const Gn=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Ds=ne("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const ec=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const kf=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const za=ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const He=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const ux=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const yc=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const wc=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const hx=ne("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);const Er=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const fx=ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Ws=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const mx=ne("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);const Ph=ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Jn=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const es=ne("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);const px=ne("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const oi=ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const Ta=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const xx=ne("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const gx=ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const vx=ne("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const bc=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const jc=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const yx=ne("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Sf=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Zr=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Dt=ne("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const wx=ne("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const bx=ne("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Ml=ne("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const jx=ne("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);const Nx=ne("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const Ef=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Ra=ne("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const Ah=ne("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const Cf=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Oa=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Js=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const _x=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const kx=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const Sx=ne("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);const Qn=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const Vs=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Mh=ne("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Gr=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const zh=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Ea=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Hs=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Us=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Xn=ne("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const Ex=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Ht=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Cx={},Lh=i=>{let r;const n=new Set,o=(y,b)=>{const k=typeof y=="function"?y(r):y;if(!Object.is(k,r)){const S=r;r=b??(typeof k!="object"||k===null)?k:Object.assign({},r,k),n.forEach(_=>_(r,S))}},c=()=>r,p={setState:o,getState:c,getInitialState:()=>v,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(Cx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},v=r=i(o,c,p);return p},Tx=i=>i?Lh(i):Lh;var zl={exports:{}},Ll={},$l={exports:{}},Dl={};var $h;function Rx(){if($h)return Dl;$h=1;var i=ii();function r(b,k){return b===k&&(b!==0||1/b===1/k)||b!==b&&k!==k}var n=typeof Object.is=="function"?Object.is:r,o=i.useState,c=i.useEffect,d=i.useLayoutEffect,h=i.useDebugValue;function m(b,k){var S=k(),_=o({inst:{value:S,getSnapshot:k}}),x=_[0].inst,j=_[1];return d(function(){x.value=S,x.getSnapshot=k,p(x)&&j({inst:x})},[b,S,k]),c(function(){return p(x)&&j({inst:x}),b(function(){p(x)&&j({inst:x})})},[b]),h(S),S}function p(b){var k=b.getSnapshot;b=b.value;try{var S=k();return!n(b,S)}catch{return!0}}function v(b,k){return k()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:m;return Dl.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:y,Dl}var Dh;function Ox(){return Dh||(Dh=1,$l.exports=Rx()),$l.exports}var Uh;function Ix(){if(Uh)return Ll;Uh=1;var i=ii(),r=Ox();function n(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var o=typeof Object.is=="function"?Object.is:n,c=r.useSyncExternalStore,d=i.useRef,h=i.useEffect,m=i.useMemo,p=i.useDebugValue;return Ll.useSyncExternalStoreWithSelector=function(v,y,b,k,S){var _=d(null);if(_.current===null){var x={hasValue:!1,value:null};_.current=x}else x=_.current;_=m(function(){function O(Q){if(!M){if(M=!0,$=Q,Q=k(Q),S!==void 0&&x.hasValue){var ie=x.value;if(S(ie,Q))return J=ie}return J=Q}if(ie=J,o($,Q))return ie;var fe=k(Q);return S!==void 0&&S(ie,fe)?($=Q,ie):($=Q,J=fe)}var M=!1,$,J,se=b===void 0?null:b;return[function(){return O(y())},se===null?void 0:function(){return O(se())}]},[y,b,k,S]);var j=c(v,_[0],_[1]);return h(function(){x.hasValue=!0,x.value=j},[j]),p(j),j},Ll}var Fh;function Px(){return Fh||(Fh=1,zl.exports=Ix()),zl.exports}var Ax=Px();const Mx=hc(Ax),Tf={},{useDebugValue:zx}=ai,{useSyncExternalStoreWithSelector:Lx}=Mx;let Bh=!1;const $x=i=>i;function Dx(i,r=$x,n){(Tf?"production":void 0)!=="production"&&n&&!Bh&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Bh=!0);const o=Lx(i.subscribe,i.getState,i.getServerState||i.getInitialState,r,n);return zx(o),o}const Wh=i=>{(Tf?"production":void 0)!=="production"&&typeof i!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof i=="function"?Tx(i):i,n=(o,c)=>Dx(r,o,c);return Object.assign(n,r),n},Nc=i=>i?Wh(i):Wh,Ux={};function Fx(i,r){let n;try{n=i()}catch{return}return{getItem:c=>{var d;const h=p=>p===null?null:JSON.parse(p,void 0),m=(d=n.getItem(c))!=null?d:null;return m instanceof Promise?m.then(h):h(m)},setItem:(c,d)=>n.setItem(c,JSON.stringify(d,void 0)),removeItem:c=>n.removeItem(c)}}const Yn=i=>r=>{try{const n=i(r);return n instanceof Promise?n:{then(o){return Yn(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return Yn(o)(n)}}}},Bx=(i,r)=>(n,o,c)=>{let d={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:j=>j,version:0,merge:(j,O)=>({...O,...j}),...r},h=!1;const m=new Set,p=new Set;let v;try{v=d.getStorage()}catch{}if(!v)return i((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...j)},o,c);const y=Yn(d.serialize),b=()=>{const j=d.partialize({...o()});let O;const M=y({state:j,version:d.version}).then($=>v.setItem(d.name,$)).catch($=>{O=$});if(O)throw O;return M},k=c.setState;c.setState=(j,O)=>{k(j,O),b()};const S=i((...j)=>{n(...j),b()},o,c);let _;const x=()=>{var j;if(!v)return;h=!1,m.forEach(M=>M(o()));const O=((j=d.onRehydrateStorage)==null?void 0:j.call(d,o()))||void 0;return Yn(v.getItem.bind(v))(d.name).then(M=>{if(M)return d.deserialize(M)}).then(M=>{if(M)if(typeof M.version=="number"&&M.version!==d.version){if(d.migrate)return d.migrate(M.state,M.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return M.state}).then(M=>{var $;return _=d.merge(M,($=o())!=null?$:S),n(_,!0),b()}).then(()=>{O?.(_,void 0),h=!0,p.forEach(M=>M(_))}).catch(M=>{O?.(void 0,M)})};return c.persist={setOptions:j=>{d={...d,...j},j.getStorage&&(v=j.getStorage())},clearStorage:()=>{v?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>x(),hasHydrated:()=>h,onHydrate:j=>(m.add(j),()=>{m.delete(j)}),onFinishHydration:j=>(p.add(j),()=>{p.delete(j)})},x(),_||S},Wx=(i,r)=>(n,o,c)=>{let d={storage:Fx(()=>localStorage),partialize:x=>x,version:0,merge:(x,j)=>({...j,...x}),...r},h=!1;const m=new Set,p=new Set;let v=d.storage;if(!v)return i((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),n(...x)},o,c);const y=()=>{const x=d.partialize({...o()});return v.setItem(d.name,{state:x,version:d.version})},b=c.setState;c.setState=(x,j)=>{b(x,j),y()};const k=i((...x)=>{n(...x),y()},o,c);c.getInitialState=()=>k;let S;const _=()=>{var x,j;if(!v)return;h=!1,m.forEach(M=>{var $;return M(($=o())!=null?$:k)});const O=((j=d.onRehydrateStorage)==null?void 0:j.call(d,(x=o())!=null?x:k))||void 0;return Yn(v.getItem.bind(v))(d.name).then(M=>{if(M)if(typeof M.version=="number"&&M.version!==d.version){if(d.migrate)return[!0,d.migrate(M.state,M.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,M.state];return[!1,void 0]}).then(M=>{var $;const[J,se]=M;if(S=d.merge(se,($=o())!=null?$:k),n(S,!0),J)return y()}).then(()=>{O?.(S,void 0),S=o(),h=!0,p.forEach(M=>M(S))}).catch(M=>{O?.(void 0,M)})};return c.persist={setOptions:x=>{d={...d,...x},x.storage&&(v=x.storage)},clearStorage:()=>{v?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>_(),hasHydrated:()=>h,onHydrate:x=>(m.add(x),()=>{m.delete(x)}),onFinishHydration:x=>(p.add(x),()=>{p.delete(x)})},d.skipHydration||_(),S||k},Vx=(i,r)=>"getStorage"in r||"serialize"in r||"deserialize"in r?((Ux?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Bx(i,r)):Wx(i,r),Hx=Vx,Qs=Nc()(Hx((i,r)=>({user:null,loading:!0,login:async(n,o)=>{i({loading:!0}),await new Promise(h=>setTimeout(h,500)),console.log("Intento de login con:",n,o);const d=[{email:"admin@molino.com",password:"admin123",role:"admin"},{email:"operador@molino.com",password:"operador123",role:"operator"}].find(h=>h.email===n&&h.password===o);if(console.log("Credencial encontrada:",d),d){const h={email:d.email,role:d.role,nombre:d.email.split("@")[0]};return console.log("Usuario logueado:",h),i({user:h,loading:!1}),!0}return console.log("Credenciales incorrectas"),i({loading:!1}),!1},logout:()=>{console.log("Cerrando sesin"),i({user:null})},setLoading:n=>{i({loading:n})}}),{name:"auth-storage",onRehydrateStorage:()=>i=>{i&&i.setLoading(!1)}})),Ls=Nc(i=>({sidebarOpen:!1,setSidebarOpen:r=>i({sidebarOpen:r})})),qx=()=>{const i=Gs(),{user:r,logout:n}=Qs(),{sidebarOpen:o,setSidebarOpen:c}=Ls(),[d,h]=L.useState(!1);L.useEffect(()=>{const v=()=>{h(window.innerWidth<768)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const m=[{path:"/dashboard",icon:s.jsx(gx,{size:20,strokeWidth:1.5}),label:"Dashboard"},{path:"/moliendas",icon:s.jsx(es,{size:20,strokeWidth:1.5}),label:"Moliendas"},{path:"/registro-molienda",icon:s.jsx(Nx,{size:20,strokeWidth:1.5}),label:"Nueva Molienda"},{path:"/stock",icon:s.jsx(Dt,{size:20,strokeWidth:1.5}),label:"Stock"},{path:"/clientes",icon:s.jsx(hx,{size:20,strokeWidth:1.5}),label:"Clientes"},{path:"/reportes",icon:s.jsx(oi,{size:20,strokeWidth:1.5}),label:"Reportes"},{path:"/mantenimiento",icon:s.jsx(Xn,{size:20,strokeWidth:1.5}),label:"Mantenimiento"}];r?.role==="admin"&&m.push({path:"/usuarios",icon:s.jsx(Us,{size:20,strokeWidth:1.5}),label:"Usuarios"});const p=()=>c(!o);return s.jsxs(s.Fragment,{children:[d&&s.jsx("button",{onClick:p,className:"fixed top-4 left-4 z-50 p-2 bg-slate-900 text-white rounded-lg shadow-lg md:hidden","aria-label":o?"Cerrar men":"Abrir men",children:o?s.jsx(Ht,{size:20,strokeWidth:1.5}):s.jsx(Sf,{size:20,strokeWidth:1.5})}),d&&o&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-30 md:hidden",onClick:()=>c(!1)}),s.jsxs("aside",{className:`
          fixed md:sticky top-0 left-0 h-screen z-40
          bg-slate-900 text-slate-300 flex flex-col border-r border-slate-800
          transition-all duration-300 ease-in-out
          ${d?o?"w-64 translate-x-0":"-translate-x-full":o?"w-64":"w-20"}
        `,children:[s.jsx("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-800",children:s.jsxs("div",{className:`flex items-center ${!o&&"justify-center w-full"}`,children:[s.jsx("div",{className:"bg-indigo-600/20 p-2 rounded-lg text-indigo-400",children:s.jsx(es,{size:22,strokeWidth:1.5})}),o&&s.jsx("h1",{className:"text-white font-bold ml-3 text-base whitespace-nowrap tracking-wide",children:"Gestin Molino"})]})}),!d&&s.jsx("button",{onClick:p,className:"absolute -right-3 top-20 bg-slate-800 text-slate-400 border border-slate-700 p-1 rounded-full hover:bg-slate-700 hover:text-white transition-colors shadow-sm z-50",children:o?s.jsx(yc,{size:14}):s.jsx(wc,{size:14})}),s.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto custom-scrollbar",children:m.map(v=>{const y=i.pathname===v.path;return s.jsxs(ox,{to:v.path,onClick:()=>d&&c(!1),className:`
                  flex items-center ${o?"px-3":"justify-center px-2"} 
                  py-2.5 rounded-lg transition-all duration-200 group
                  ${y?"bg-indigo-600 text-white shadow-md shadow-indigo-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}
                `,title:o?"":v.label,children:[s.jsx("div",{className:`flex-shrink-0 transition-colors ${y?"text-white":"text-slate-400 group-hover:text-white"}`,children:v.icon}),o&&s.jsx("span",{className:`ml-3 text-sm font-medium whitespace-nowrap ${y?"text-white":"text-slate-300 group-hover:text-white"}`,children:v.label})]},v.path)})}),s.jsx("div",{className:"p-4 border-t border-slate-800",children:s.jsxs("button",{onClick:n,className:`
              flex items-center ${o?"px-3":"justify-center px-2"} 
              w-full py-2.5 rounded-lg text-slate-400 
              hover:bg-red-500/10 hover:text-red-400 transition-colors
              group
            `,title:o?"":"Cerrar sesin",children:[s.jsx(bc,{size:20,strokeWidth:1.5,className:"group-hover:text-red-400"}),o&&s.jsx("span",{className:"ml-3 text-sm font-medium",children:"Cerrar Sesin"})]})})]})]})},Kx=({isOpen:i,onClose:r,title:n,children:o,width:c="max-w-md",showCloseButton:d=!0})=>(L.useEffect(()=>{const h=m=>{m.key==="Escape"&&r()};return i&&(document.body.style.overflow="hidden",window.addEventListener("keydown",h)),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",h)}},[i,r]),i?r0.createPortal(s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:r}),s.jsxs("div",{className:`relative bg-white rounded-2xl shadow-xl w-full ${c} transform transition-all scale-100 opacity-100`,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:n}),d&&s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-lg p-2 transition-colors",children:s.jsx(Ht,{size:20})})]}),s.jsx("div",{className:"p-6",children:o})]})]}),document.body):null),Rf=({isOpen:i,onClose:r,onConfirm:n,title:o,message:c,confirmText:d="Confirmar",cancelText:h="Cancelar",showCancel:m=!0,type:p="danger",icon:v="alert"})=>{const y=()=>{switch(p){case"danger":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-orange-600 hover:bg-orange-700";case"info":return"bg-blue-600 hover:bg-blue-700";default:return"bg-gray-900 hover:bg-gray-800"}},b=()=>{const k=`p-3 rounded-full ${p==="danger"?"bg-red-100 text-red-600":p==="warning"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"} mb-4`;switch(v){case"trash":return s.jsx("div",{className:k,children:s.jsx(Vs,{size:24})});case"logout":return s.jsx("div",{className:k,children:s.jsx(bc,{size:24})});default:return s.jsx("div",{className:k,children:s.jsx(Ds,{size:24})})}};return s.jsx(Kx,{isOpen:i,onClose:r,title:"",showCloseButton:!1,width:"max-w-sm",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[b(),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:o}),s.jsx("p",{className:"text-gray-500 mb-6",children:c}),s.jsxs("div",{className:"flex space-x-3 w-full",children:[m&&s.jsx("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors",children:h}),s.jsx("button",{onClick:()=>{n(),r()},className:`flex-1 px-4 py-2 text-white rounded-xl font-medium transition-colors ${y()}`,children:d})]})]})})},Gx=()=>{const{user:i,logout:r}=Qs(),n=Ls(S=>S.notifications);Ls(S=>S.markNotificationAsRead);const o=Ls(S=>S.sidebarOpen),c=Ls(S=>S.setSidebarOpen),[d,h]=L.useState(!1),[m,p]=L.useState(!1),[v,y]=L.useState(!1),b=n?.filter(S=>!S.leida).length||0,k=()=>{r(),y(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200 shadow-sm w-full",children:s.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16 w-full",children:[s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("button",{onClick:()=>c(!o),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors md:hidden mr-3",title:o?"Cerrar men":"Abrir men",children:s.jsx(Sf,{size:24})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Gestin de Molino"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Sistema de molienda"})]})]}),s.jsx("div",{className:"hidden md:flex flex-1 max-w-2xl mx-4",children:s.jsxs("div",{className:"relative w-full",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"search",placeholder:"Buscar moliendas, clientes, reportes...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:()=>h(!d),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 relative transition-colors",children:[s.jsx(kf,{size:22}),b>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:b})]})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>p(!m),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Hs,{size:18,className:"text-blue-600"})}),s.jsxs("div",{className:"hidden md:block text-left",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:i?.nombre}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i?.rol?.toLowerCase()})]}),s.jsx(ux,{size:16,className:`text-gray-400 transition-transform duration-200 ${m?"rotate-180":""}`})]}),m&&s.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-lg py-1 border border-gray-100 ring-1 ring-black ring-opacity-5 focus:outline-none animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:i?.nombre}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:i?.email})]}),s.jsx("div",{className:"py-1",children:s.jsxs("button",{onClick:()=>p(!1),className:"flex w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 items-center",children:[s.jsx(Hs,{size:16,className:"mr-2 text-gray-400"}),"Mi Perfil"]})}),s.jsx("div",{className:"py-1 border-t border-gray-100",children:s.jsxs("button",{onClick:()=>{p(!1),y(!0)},className:"flex w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 items-center",children:[s.jsx(bc,{size:16,className:"mr-2"}),"Cerrar Sesin"]})})]})]})]})]})})}),s.jsx(Rf,{isOpen:v,onClose:()=>y(!1),onConfirm:k,title:"Cerrar Sesin?",message:"Ests seguro que deseas salir del sistema? Tendrs que iniciar sesin nuevamente para acceder.",confirmText:"Cerrar Sesin",cancelText:"Cancelar",type:"danger",icon:"logout"})]})},Jx=()=>{const{user:i,loading:r}=Qs(),{sidebarOpen:n}=Ls();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i?s.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[s.jsx(qx,{}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden relative",children:[s.jsx(Gx,{}),s.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 bg-slate-50 relative scroll-smooth",children:s.jsx("div",{className:"max-w-7xl mx-auto pb-10",children:s.jsx(J0,{})})})]})]}):s.jsx(Ql,{to:"/login",replace:!0})},Qx=()=>{const[i,r]=L.useState(""),[n,o]=L.useState(""),[c,d]=L.useState(!1),[h,m]=L.useState(""),[p,v]=L.useState(!1),y=Qs(S=>S.login),b=vc(),k=async S=>{S.preventDefault(),m(""),v(!0);try{await y(i,n)?b("/dashboard"):m("Credenciales incorrectas")}catch{m("Error al iniciar sesin")}finally{v(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-3 rounded-full shadow-lg",children:s.jsx(es,{className:"h-12 w-12 text-white"})})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Gestin de Molino"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sistema de gestin de molienda de minerales"})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl sm:px-10 border border-gray-200",children:[s.jsxs("form",{className:"space-y-6",onSubmit:k,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo electrnico"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:S=>r(S.target.value),className:"appearance-none block w-full px-3 py-2.5 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"admin@molino.com"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:S=>o(S.target.value),className:"appearance-none block w-full px-3 py-2.5 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:""})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:c,onChange:S=>d(S.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Recordar sesin"})]}),h&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:h})})]})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:p?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesin..."]}):"Ingresar al sistema"})})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Credenciales de prueba:"}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsx("p",{className:"text-xs font-mono bg-gray-100 p-2 rounded",children:"ADMIN: admin@molino.com / admin123"}),s.jsx("p",{className:"text-xs font-mono bg-gray-100 p-2 rounded",children:"OPERADOR: operador@molino.com / operador123"})]})]})})]})})]})},Xx=({mill:i})=>{const r={id:i?.id||"1",nombre:i?.nombre||i?.name||"Molino I",estado:i?.estado||i?.status||"LIBRE",clienteActual:i?.clienteActual||i?.current_client||null,sacosProcesando:i?.sacosProcesando||i?.sacks_processing||0,capacidad:i?.capacidad||i?.capacity||150,horaInicio:i?.horaInicio||i?.start_time||null,horaFinEstimada:i?.horaFinEstimada||i?.estimated_end||null,horasTrabajadas:i?.horasTrabajadas||i?.total_hours_worked||0,horasParaCambioAceite:i?.horasParaCambioAceite||i?.hours_to_oil_change||500,ultimoMantenimiento:i?.ultimoMantenimiento||i?.last_maintenance||"2024-01-15",proximoMantenimiento:i?.proximoMantenimiento||i?.next_maintenance||"2024-02-15",operativo:i?.operativo!==!1,necesitaMantenimiento:i?.necesitaMantenimiento||!1},o=(()=>{const b=r.estado.toString().toUpperCase();return b==="MANTENIMIENTO"||b==="MAINTENANCE"?"mantenimiento":r.operativo?r.clienteActual&&r.sacosProcesando>0?"ocupado":r.necesitaMantenimiento?"necesita_mantenimiento":"libre":"no_operativo"})(),d=(()=>{switch(o){case"ocupado":return{color:"bg-orange-50 border-orange-200",icon:s.jsx(jx,{className:"text-orange-600",size:20}),label:"Ocupado",badge:"bg-orange-100 text-orange-800",description:"Procesando mineral"};case"mantenimiento":return{color:"bg-red-50 border-red-200",icon:s.jsx(Xn,{className:"text-red-600",size:20}),label:"En Mantenimiento",badge:"bg-red-100 text-red-800",description:"No disponible"};case"necesita_mantenimiento":return{color:"bg-amber-50 border-amber-200",icon:s.jsx(Gn,{className:"text-amber-600",size:20}),label:"Necesita Mantenimiento",badge:"bg-amber-100 text-amber-800",description:"Prximo a revisin"};case"no_operativo":return{color:"bg-gray-100 border-gray-300",icon:s.jsx(wx,{className:"text-gray-600",size:20}),label:"No Operativo",badge:"bg-gray-200 text-gray-700",description:"Fuera de servicio"};default:return{color:"bg-green-50 border-green-200",icon:s.jsx(He,{className:"text-green-600",size:20}),label:"Libre",badge:"bg-green-100 text-green-800",description:"Disponible"}}})(),m=(()=>{const k=r.horasTrabajadas%500,S=k/500*100,_=500-k;return{progreso:Math.min(S,100),horasRestantes:_,necesitaCambio:_<50}})(),p=b=>{if(!b)return"--:--";try{return new Date(b).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},y=(()=>{if(!r.horaFinEstimada||o!=="ocupado")return null;try{const b=new Date(r.horaFinEstimada),k=new Date,S=b.getTime()-k.getTime();if(S<=0)return"Completado";const _=Math.floor(S/(1e3*60*60)),x=Math.floor(S%(1e3*60*60)/(1e3*60));return`${_}h ${x}m`}catch{return null}})();return s.jsxs("div",{className:`card-hover border rounded-xl p-5 ${d.color} h-full flex flex-col transition-all hover:shadow-sm`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2.5 rounded-lg ${d.badge} mr-3`,children:ai.cloneElement(d.icon,{strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:r.nombre}),s.jsx("div",{className:"flex items-center mt-1",children:s.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${d.badge}`,children:d.label})})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-bold text-slate-900",children:r.capacidad}),s.jsx("div",{className:"text-xs text-slate-500",children:"sacos/h"})]})]}),s.jsxs("div",{className:"space-y-3 mb-4",children:[o==="ocupado"&&r.clienteActual&&s.jsxs("div",{className:"flex items-center p-3 bg-white/50 rounded-lg border border-slate-200/50",children:[s.jsx(Hs,{className:"text-slate-400 mr-3",size:16,strokeWidth:1.5}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",title:r.clienteActual,children:r.clienteActual}),s.jsx("div",{className:"text-xs text-slate-500",children:"Cliente actual"})]})]}),o==="ocupado"&&r.sacosProcesando>0&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/50 rounded-lg border border-slate-200/50",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Dt,{className:"text-slate-400 mr-3",size:16,strokeWidth:1.5}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-slate-700",children:"Sacos procesando"}),s.jsxs("div",{className:"text-xs text-slate-500",children:[r.capacidad*8," max/da"]})]})]}),s.jsx("div",{className:"font-bold text-lg text-slate-900",children:r.sacosProcesando})]}),o==="ocupado"&&s.jsxs("div",{className:"grid grid-cols-2 gap-3 bg-white/50 p-3 rounded-lg border border-slate-200/50",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Inicio"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:p(r.horaInicio)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:y?"Finaliza en":"Fin estimado"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:y||p(r.horaFinEstimada)})]})]}),o==="mantenimiento"&&s.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xn,{size:16,strokeWidth:1.5,className:"text-red-500 mr-2"}),s.jsx("div",{className:"text-sm text-red-700",children:"En proceso de mantenimiento preventivo/correctivo"})]}),s.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["Prximo disponible: ",r.proximoMantenimiento]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-200/50 mt-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Er,{className:"text-slate-400 mr-2",size:16,strokeWidth:1.5}),s.jsx("span",{className:"text-sm text-slate-700",children:"Horas totales:"})]}),s.jsxs("div",{className:"font-bold text-slate-900",children:[r.horasTrabajadas,"h"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(mx,{className:"text-blue-500 mr-2",size:14,strokeWidth:1.5}),s.jsx("span",{className:"text-slate-700",children:"Cambio de aceite:"})]}),s.jsxs("span",{className:`font-semibold ${m.necesitaCambio?"text-red-600":"text-slate-700"}`,children:[m.horasRestantes,"h"]})]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full transition-all ${m.necesitaCambio?"bg-red-500":"bg-blue-500"}`,style:{width:`${m.progreso}%`}})}),m.necesitaCambio&&s.jsxs("div",{className:"flex items-center mt-2 text-xs",children:[s.jsx(Ds,{className:"text-red-500 mr-1",size:12,strokeWidth:1.5}),s.jsx("span",{className:"text-red-600 font-medium",children:"Prximo cambio requerido"})]})]}),s.jsxs("div",{className:"text-xs text-slate-500 flex justify-between items-center pt-2 border-t border-slate-100",children:[s.jsx("span",{children:"ltimo mantenimiento:"}),s.jsx("span",{className:"font-medium text-slate-700",children:r.ultimoMantenimiento})]})]}),s.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200/50",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-slate-500",children:["Estado operativo:",s.jsx("span",{className:`ml-1 font-medium ${r.operativo?"text-emerald-600":"text-red-600"}`,children:r.operativo?"Operativo":"No Operativo"})]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["ID: ",r.id.substring(0,6),"..."]})]})})]})},ja=({title:i,value:r,change:n,icon:o,color:c,description:d,trend:h="up"})=>{const m={blue:{bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-700",iconBg:"bg-blue-100",iconColor:"text-blue-600"},green:{bg:"bg-green-50",border:"border-green-100",text:"text-green-700",iconBg:"bg-green-100",iconColor:"text-green-600"},orange:{bg:"bg-orange-50",border:"border-orange-100",text:"text-orange-700",iconBg:"bg-orange-100",iconColor:"text-orange-600"},purple:{bg:"bg-purple-50",border:"border-purple-100",text:"text-purple-700",iconBg:"bg-purple-100",iconColor:"text-purple-600"},red:{bg:"bg-red-50",border:"border-red-100",text:"text-red-700",iconBg:"bg-red-100",iconColor:"text-red-600"},amber:{bg:"bg-amber-50",border:"border-amber-100",text:"text-amber-700",iconBg:"bg-amber-100",iconColor:"text-amber-600"}},p=m[c]||m.blue;return s.jsxs("div",{className:"card-hover border rounded-xl p-5 transition-all duration-200 hover:shadow-sm bg-white border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:i}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold mt-2 text-slate-900",children:r})]}),s.jsx("div",{className:`p-3 rounded-lg ${p.iconBg}`,children:s.jsx(o,{size:20,strokeWidth:1.5,className:p.iconColor})})]}),s.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[h==="up"?s.jsx(s.Fragment,{children:s.jsxs("span",{className:"text-emerald-600 font-semibold flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),n]})}):s.jsx(s.Fragment,{children:s.jsxs("span",{className:"text-red-600 font-semibold flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),n]})}),s.jsx("span",{className:"text-slate-500 ml-2",children:d})]})]})},Yx=()=>{const i=[{id:1,molino:"Molino I",cliente:"Minera Andina",sacos:25,mineral:"Sulfuro",estado:"FINALIZADO",hora:"10:30 - 13:15",tiempo:"2h 45m"},{id:2,molino:"Molino II",cliente:"Minerales del Sur",sacos:18,mineral:"xido",estado:"EN_PROCESO",hora:"11:00 - 12:40",tiempo:"1h 40m"},{id:3,molino:"Molino IV",cliente:"Compaa Extractora",sacos:30,mineral:"Sulfuro",estado:"FINALIZADO",hora:"08:00 - 11:30",tiempo:"3h 30m"}],r=o=>{switch(o){case"FINALIZADO":return s.jsx(He,{size:16,className:"text-green-500"});case"EN_PROCESO":return s.jsx(Er,{size:16,className:"text-orange-500"});default:return s.jsx(Gn,{size:16,className:"text-gray-500"})}},n=o=>{switch(o){case"FINALIZADO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return s.jsx("div",{className:"space-y-4",children:i.map(o=>s.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-100",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center mr-4 text-slate-600",children:s.jsx("span",{className:"font-semibold",children:o.molino.split(" ")[1]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h4",{className:"font-medium text-slate-900",children:o.cliente}),s.jsxs("span",{className:`ml-3 px-2 py-0.5 text-xs rounded-full flex items-center ${n(o.estado)}`,children:[ai.cloneElement(r(o.estado),{size:14,strokeWidth:1.5}),s.jsx("span",{className:"ml-1.5",children:o.estado.replace("_"," ")})]})]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-500 mt-1",children:[s.jsxs("span",{className:"mr-4 text-slate-600 font-medium",children:[o.sacos," sacos"]}),s.jsx("span",{className:"mr-4",children:o.mineral}),s.jsx("span",{children:o.hora})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-medium text-slate-900",children:o.tiempo}),s.jsx("div",{className:"text-xs text-slate-400",children:"duracin"})]})]},o.id))})},Zx=()=>{const i=[{name:"Molino I",value:420,color:"bg-blue-500"},{name:"Molino II",value:380,color:"bg-green-500"},{name:"Molino III",value:290,color:"bg-orange-500"},{name:"Molino IV",value:310,color:"bg-purple-500"}],r=Math.max(...i.map(n=>n.value));return s.jsxs("div",{children:[s.jsx("div",{className:"space-y-5",children:i.map((n,o)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-24",children:s.jsx("span",{className:"text-sm font-medium text-slate-600",children:n.name})}),s.jsx("div",{className:"flex-1 ml-4",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1.5",children:[s.jsxs("span",{className:"font-medium text-slate-700",children:[n.value.toLocaleString()," sacos"]}),s.jsxs("span",{children:[(n.value/r*100).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full ${n.color} transition-all duration-500`,style:{width:`${n.value/r*100}%`}})})]})})]},o))}),s.jsx("div",{className:"flex justify-center space-x-6 mt-8",children:i.map((n,o)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${n.color} mr-2`}),s.jsx("span",{className:"text-xs text-slate-500 font-medium",children:n.name})]},o))})]})};function La(i,r){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(i);c<o.length;c++)r.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(i,o[c])&&(n[o[c]]=i[o[c]]);return n}function eg(i,r,n,o){function c(d){return d instanceof n?d:new n(function(h){h(d)})}return new(n||(n=Promise))(function(d,h){function m(y){try{v(o.next(y))}catch(b){h(b)}}function p(y){try{v(o.throw(y))}catch(b){h(b)}}function v(y){y.done?d(y.value):c(y.value).then(m,p)}v((o=o.apply(i,r||[])).next())})}const tg=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);class _c extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class rg extends _c{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Vh extends _c{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Hh extends _c{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var tc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(tc||(tc={}));class sg{constructor(r,{headers:n={},customFetch:o,region:c=tc.Any}={}){this.url=r,this.headers=n,this.region=c,this.fetch=tg(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return eg(this,arguments,void 0,function*(n,o={}){var c;let d,h;try{const{headers:m,method:p,body:v,signal:y,timeout:b}=o;let k={},{region:S}=o;S||(S=this.region);const _=new URL(`${this.url}/${n}`);S&&S!=="any"&&(k["x-region"]=S,_.searchParams.set("forceFunctionRegion",S));let x;v&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",x=v):typeof v=="string"?(k["Content-Type"]="text/plain",x=v):typeof FormData<"u"&&v instanceof FormData?x=v:(k["Content-Type"]="application/json",x=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?x=JSON.stringify(v):x=v;let j=y;b&&(h=new AbortController,d=setTimeout(()=>h.abort(),b),y?(j=h.signal,y.addEventListener("abort",()=>h.abort())):j=h.signal);const O=yield this.fetch(_.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),m),body:x,signal:j}).catch(se=>{throw new rg(se)}),M=O.headers.get("x-relay-error");if(M&&M==="true")throw new Vh(O);if(!O.ok)throw new Hh(O);let $=((c=O.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),J;return $==="application/json"?J=yield O.json():$==="application/octet-stream"||$==="application/pdf"?J=yield O.blob():$==="text/event-stream"?J=O:$==="multipart/form-data"?J=yield O.formData():J=yield O.text(),{data:J,error:null,response:O}}catch(m){return{data:null,error:m,response:m instanceof Hh||m instanceof Vh?m.context:void 0}}finally{d&&clearTimeout(d)}})}}var ng=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},ig=class{constructor(i){var r,n;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(r=i.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=i.signal,this.isMaybeSingle=(n=i.isMaybeSingle)!==null&&n!==void 0?n:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,r){return this.headers=new Headers(this.headers),this.headers.set(i,r),this}then(i,r){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let c=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let h=null,m=null,p=null,v=d.status,y=d.statusText;if(d.ok){var b,k;if(n.method!=="HEAD"){var S;const O=await d.text();O===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((S=n.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?m=O:m=JSON.parse(O))}const x=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),j=(k=d.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");x&&j&&j.length>1&&(p=parseInt(j[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,v=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var _;const x=await d.text();try{h=JSON.parse(x),Array.isArray(h)&&d.status===404&&(m=[],h=null,v=200,y="OK")}catch{d.status===404&&x===""?(v=204,y="No Content"):h={message:x}}if(h&&n.isMaybeSingle&&(!(h==null||(_=h.details)===null||_===void 0)&&_.includes("0 rows"))&&(h=null,v=200,y="OK"),h&&n.shouldThrowOnError)throw new ng(h)}return{error:h,data:m,count:p,status:v,statusText:y}});return this.shouldThrowOnError||(c=c.catch(d=>{var h;let m="";const p=d?.cause;if(p){var v,y,b,k;const _=(v=p?.message)!==null&&v!==void 0?v:"",x=(y=p?.code)!==null&&y!==void 0?y:"";m=`${(b=d?.name)!==null&&b!==void 0?b:"FetchError"}: ${d?.message}`,m+=`

Caused by: ${(k=p?.name)!==null&&k!==void 0?k:"Error"}: ${_}`,x&&(m+=` (${x})`),p?.stack&&(m+=`
${p.stack}`)}else{var S;m=(S=d?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(h=d?.name)!==null&&h!==void 0?h:"FetchError"}: ${d?.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(i,r)}returns(){return this}overrideTypes(){return this}},ag=class extends ig{select(i){let r=!1;const n=(i??"*").split("").map(o=>/\s/.test(o)&&!r?"":(o==='"'&&(r=!r),o)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:r=!0,nullsFirst:n,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:n=r}={}){const o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${i}`),this}range(i,r,{foreignTable:n,referencedTable:o=n}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:r=!1,settings:n=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var h;const m=[i?"analyze":null,r?"verbose":null,n?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${m};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const qh=new RegExp("[,()]");var As=class extends ag{eq(i,r){return this.url.searchParams.append(i,`eq.${r}`),this}neq(i,r){return this.url.searchParams.append(i,`neq.${r}`),this}gt(i,r){return this.url.searchParams.append(i,`gt.${r}`),this}gte(i,r){return this.url.searchParams.append(i,`gte.${r}`),this}lt(i,r){return this.url.searchParams.append(i,`lt.${r}`),this}lte(i,r){return this.url.searchParams.append(i,`lte.${r}`),this}like(i,r){return this.url.searchParams.append(i,`like.${r}`),this}likeAllOf(i,r){return this.url.searchParams.append(i,`like(all).{${r.join(",")}}`),this}likeAnyOf(i,r){return this.url.searchParams.append(i,`like(any).{${r.join(",")}}`),this}ilike(i,r){return this.url.searchParams.append(i,`ilike.${r}`),this}ilikeAllOf(i,r){return this.url.searchParams.append(i,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(i,r){return this.url.searchParams.append(i,`ilike(any).{${r.join(",")}}`),this}regexMatch(i,r){return this.url.searchParams.append(i,`match.${r}`),this}regexIMatch(i,r){return this.url.searchParams.append(i,`imatch.${r}`),this}is(i,r){return this.url.searchParams.append(i,`is.${r}`),this}isDistinct(i,r){return this.url.searchParams.append(i,`isdistinct.${r}`),this}in(i,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&qh.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${n})`),this}notIn(i,r){const n=Array.from(new Set(r)).map(o=>typeof o=="string"&&qh.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`not.in.(${n})`),this}contains(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cs.{${r.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(r)}`),this}containedBy(i,r){return typeof r=="string"?this.url.searchParams.append(i,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(i,`cd.{${r.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(r)}`),this}rangeGt(i,r){return this.url.searchParams.append(i,`sr.${r}`),this}rangeGte(i,r){return this.url.searchParams.append(i,`nxl.${r}`),this}rangeLt(i,r){return this.url.searchParams.append(i,`sl.${r}`),this}rangeLte(i,r){return this.url.searchParams.append(i,`nxr.${r}`),this}rangeAdjacent(i,r){return this.url.searchParams.append(i,`adj.${r}`),this}overlaps(i,r){return typeof r=="string"?this.url.searchParams.append(i,`ov.${r}`):this.url.searchParams.append(i,`ov.{${r.join(",")}}`),this}textSearch(i,r,{config:n,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=n===void 0?"":`(${n})`;return this.url.searchParams.append(i,`${c}fts${d}.${r}`),this}match(i){return Object.entries(i).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(i,r,n){return this.url.searchParams.append(i,`not.${r}.${n}`),this}or(i,{foreignTable:r,referencedTable:n=r}={}){const o=n?`${n}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,r,n){return this.url.searchParams.append(i,`${r}.${n}`),this}},og=class{constructor(i,{headers:r={},schema:n,fetch:o}){this.url=i,this.headers=new Headers(r),this.schema=n,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,r){const{head:n=!1,count:o}=r??{},c=n?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(v=>/\s/.test(v)&&!d?"":(v==='"'&&(d=!d),v)).join(""),{url:m,headers:p}=this.cloneRequestState();return m.searchParams.set("select",h),o&&p.append("Prefer",`count=${o}`),new As({method:c,url:m,headers:p,schema:this.schema,fetch:this.fetch})}insert(i,{count:r,defaultToNull:n=!0}={}){var o;const c="POST",{url:d,headers:h}=this.cloneRequestState();if(r&&h.append("Prefer",`count=${r}`),n||h.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(m.length>0){const p=[...new Set(m)].map(v=>`"${v}"`);d.searchParams.set("columns",p.join(","))}}return new As({method:c,url:d,headers:h,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(i,{onConflict:r,ignoreDuplicates:n=!1,count:o,defaultToNull:c=!0}={}){var d;const h="POST",{url:m,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&m.searchParams.set("on_conflict",r),o&&p.append("Prefer",`count=${o}`),c||p.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(v.length>0){const y=[...new Set(v)].map(b=>`"${b}"`);m.searchParams.set("columns",y.join(","))}}return new As({method:h,url:m,headers:p,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:r}={}){var n;const o="PATCH",{url:c,headers:d}=this.cloneRequestState();return r&&d.append("Prefer",`count=${r}`),new As({method:o,url:c,headers:d,schema:this.schema,body:i,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:i}={}){var r;const n="DELETE",{url:o,headers:c}=this.cloneRequestState();return i&&c.append("Prefer",`count=${i}`),new As({method:n,url:o,headers:c,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},lg=class Of{constructor(r,{headers:n={},schema:o,fetch:c}={}){this.url=r,this.headers=new Headers(n),this.schemaName=o,this.fetch=c}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new og(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new Of(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,n={},{head:o=!1,get:c=!1,count:d}={}){var h;let m;const p=new URL(`${this.url}/rpc/${r}`);let v;const y=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(y)),b=o&&Object.values(n).some(y);b?(m="POST",v=n):o||c?(m=o?"HEAD":"GET",Object.entries(n).filter(([S,_])=>_!==void 0).map(([S,_])=>[S,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([S,_])=>{p.searchParams.append(S,_)})):(m="POST",v=n);const k=new Headers(this.headers);return b?k.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&k.set("Prefer",`count=${d}`),new As({method:m,url:p,headers:k,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class cg{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const o=n.versions;if(o&&o.node){const c=o.node,d=parseInt(c.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const dg="2.91.1",ug=`realtime-js/${dg}`,hg="1.0.0",If="2.0.0",Kh=If,rc=1e4,fg=1e3,mg=100;var Nr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Nr||(Nr={}));var Ge;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Ge||(Ge={}));var $t;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})($t||($t={}));var sc;(function(i){i.websocket="websocket"})(sc||(sc={}));var Jr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Jr||(Jr={}));class pg{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o;const c=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(r){var n,o;const c=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(r,n,o){var c,d;const h=r.topic,m=(c=r.ref)!==null&&c!==void 0?c:"",p=(d=r.join_ref)!==null&&d!==void 0?d:"",v=r.payload.event,y=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},b=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+h.length+v.length+b.length,S=new ArrayBuffer(this.HEADER_LENGTH+k);let _=new DataView(S),x=0;_.setUint8(x++,this.KINDS.userBroadcastPush),_.setUint8(x++,p.length),_.setUint8(x++,m.length),_.setUint8(x++,h.length),_.setUint8(x++,v.length),_.setUint8(x++,b.length),_.setUint8(x++,n),Array.from(p,O=>_.setUint8(x++,O.charCodeAt(0))),Array.from(m,O=>_.setUint8(x++,O.charCodeAt(0))),Array.from(h,O=>_.setUint8(x++,O.charCodeAt(0))),Array.from(v,O=>_.setUint8(x++,O.charCodeAt(0))),Array.from(b,O=>_.setUint8(x++,O.charCodeAt(0)));var j=new Uint8Array(S.byteLength+o.byteLength);return j.set(new Uint8Array(S),0),j.set(new Uint8Array(o),S.byteLength),j.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[c,d,h,m,p]=o;return n({join_ref:c,ref:d,topic:h,event:m,payload:p})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),c=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,n,c)}_decodeUserBroadcast(r,n,o){const c=n.getUint8(1),d=n.getUint8(2),h=n.getUint8(3),m=n.getUint8(4);let p=this.HEADER_LENGTH+4;const v=o.decode(r.slice(p,p+c));p=p+c;const y=o.decode(r.slice(p,p+d));p=p+d;const b=o.decode(r.slice(p,p+h));p=p+h;const k=r.slice(p,r.byteLength),S=m===this.JSON_ENCODING?JSON.parse(o.decode(k)):k,_={type:this.BROADCAST_EVENT,event:y,payload:S};return h>0&&(_.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>n.includes(o)))}}class Pf{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Te||(Te={}));const Gh=(i,r,n={})=>{var o;const c=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((d,h)=>(d[h]=xg(h,i,r,c),d),{}):{}},xg=(i,r,n,o)=>{const c=r.find(m=>m.name===i),d=c?.type,h=n[i];return d&&!o.includes(d)?Af(d,h):nc(h)},Af=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return wg(r,n)}switch(i){case Te.bool:return gg(r);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return vg(r);case Te.json:case Te.jsonb:return yg(r);case Te.timestamp:return bg(r);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return nc(r);default:return nc(r)}},nc=i=>i,gg=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},vg=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},yg=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},wg=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let d;const h=i.slice(1,n);try{d=JSON.parse("["+h+"]")}catch{d=h?h.split(","):[]}return d.map(m=>Af(r,m))}return i},bg=i=>typeof i=="string"?i.replace(" ","T"):i,Mf=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Ul{constructor(r,n,o={},c=rc){this.channel=r,this.event=n,this.payload=o,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Jh;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Jh||(Jh={}));class Wn{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},c=>{const{onJoin:d,onLeave:h,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wn.syncState(this.state,c,d,h),this.pendingDiffs.forEach(p=>{this.state=Wn.syncDiff(this.state,p,d,h)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},c=>{const{onJoin:d,onLeave:h,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=Wn.syncDiff(this.state,c,d,h),m())}),this.onJoin((c,d,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:d,newPresences:h})}),this.onLeave((c,d,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:d,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,c){const d=this.cloneDeep(r),h=this.transformState(n),m={},p={};return this.map(d,(v,y)=>{h[v]||(p[v]=y)}),this.map(h,(v,y)=>{const b=d[v];if(b){const k=y.map(j=>j.presence_ref),S=b.map(j=>j.presence_ref),_=y.filter(j=>S.indexOf(j.presence_ref)<0),x=b.filter(j=>k.indexOf(j.presence_ref)<0);_.length>0&&(m[v]=_),x.length>0&&(p[v]=x)}else m[v]=y}),this.syncDiff(d,{joins:m,leaves:p},o,c)}static syncDiff(r,n,o,c){const{joins:d,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),c||(c=()=>{}),this.map(d,(m,p)=>{var v;const y=(v=r[m])!==null&&v!==void 0?v:[];if(r[m]=this.cloneDeep(p),y.length>0){const b=r[m].map(S=>S.presence_ref),k=y.filter(S=>b.indexOf(S.presence_ref)<0);r[m].unshift(...k)}o(m,y,p)}),this.map(h,(m,p)=>{let v=r[m];if(!v)return;const y=p.map(b=>b.presence_ref);v=v.filter(b=>y.indexOf(b.presence_ref)<0),r[m]=v,c(m,v,p),v.length===0&&delete r[m]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const c=r[o];return"metas"in c?n[o]=c.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):n[o]=c,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Qh||(Qh={}));var Vn;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Vn||(Vn={}));var er;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(er||(er={}));class $s{constructor(r,n={config:{}},o){var c,d;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ul(this,$t.join,this.params,this.timeout),this.rejoinTimer=new Pf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on($t.reply,{},(h,m)=>{this._trigger(this._replyEventName(m),h)}),this.presence=new Wn(this),this.broadcastEndpointURL=Mf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,c,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:h,presence:m,private:p}}=this.params,v=(c=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(S=>S.filter))!==null&&c!==void 0?c:[],y=!!this.bindings[Vn.PRESENCE]&&this.bindings[Vn.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,b={},k={broadcast:h,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:v,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(S=>r?.(er.CHANNEL_ERROR,S)),this._onClose(()=>r?.(er.CLOSED)),this.updateJoinPayload(Object.assign({config:k},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){r?.(er.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,j=(_=x?.length)!==null&&_!==void 0?_:0,O=[];for(let M=0;M<j;M++){const $=x[M],{filter:{event:J,schema:se,table:Q,filter:ie}}=$,fe=S&&S[M];if(fe&&fe.event===J&&$s.isFilterValueEqual(fe.schema,se)&&$s.isFilterValueEqual(fe.table,Q)&&$s.isFilterValueEqual(fe.filter,ie))O.push(Object.assign(Object.assign({},$),{id:fe.id}));else{this.unsubscribe(),this.state=Ge.errored,r?.(er.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,r&&r(er.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ge.errored,r?.(er.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{r?.(er.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===Ge.joined&&r===Vn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var c;if(n==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const v=await m.json();p=v.error||v.message||p}catch{}return Promise.reject(new Error(p))}async send(r,n={}){var o,c;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:h}=r,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((c=v.body)===null||c===void 0?void 0:c.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var h,m,p;const v=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(h=this.params)===null||h===void 0?void 0:h.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&d("ok"),v.receive("ok",()=>d("ok")),v.receive("error",()=>d("error")),v.receive("timeout",()=>d("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($t.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(c=>{o=new Ul(this,$t.leave,{},r),o.receive("ok",()=>{n(),c("ok")}).receive("timeout",()=>{n(),c("timed out")}).receive("error",()=>{c("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const c=new AbortController,d=setTimeout(()=>c.abort(),o),h=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:c.signal}));return clearTimeout(d),h}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Ul(this,r,n,o);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>mg){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var c,d;const h=r.toLocaleLowerCase(),{close:m,error:p,leave:v,join:y}=$t;if(o&&[m,p,v,y].indexOf(h)>=0&&o!==this._joinRef())return;let k=this._onMessage(h,n,o);if(n&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(S=>{var _,x,j;return((_=S.filter)===null||_===void 0?void 0:_.event)==="*"||((j=(x=S.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===h}).map(S=>S.callback(k,o)):(d=this.bindings[h])===null||d===void 0||d.filter(S=>{var _,x,j,O,M,$,J,se;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in S){const Q=S.id,ie=(_=S.filter)===null||_===void 0?void 0:_.event;return Q&&((x=n.ids)===null||x===void 0?void 0:x.includes(Q))&&(ie==="*"||ie?.toLocaleLowerCase()===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))&&(!(!((O=S.filter)===null||O===void 0)&&O.table)||S.filter.table===((M=n.data)===null||M===void 0?void 0:M.table))}else{const Q=(J=($=S?.filter)===null||$===void 0?void 0:$.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return Q==="*"||Q===((se=n?.event)===null||se===void 0?void 0:se.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===h}).map(S=>{if(typeof k=="object"&&"ids"in k){const _=k.data,{schema:x,table:j,commit_timestamp:O,type:M,errors:$}=_;k=Object.assign(Object.assign({},{schema:x,table:j,commit_timestamp:O,eventType:M,new:{},old:{},errors:$}),this._getPayloadRecords(_))}S.callback(k,o)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const c=r.toLocaleLowerCase(),d={type:c,filter:n,callback:o};return this.bindings[c]?this.bindings[c].push(d):this.bindings[c]=[d],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(c=>{var d;return!(((d=c.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&$s.isEqual(c.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}static isFilterValueEqual(r,n){return(r??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on($t.close,{},r)}_onError(r){this._on($t.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Gh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Gh(r.columns,r.old_record)),n}}const Fl=()=>{},Na={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jg=[1e3,2e3,5e3,1e4],Ng=1e4,_g=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kg{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rc,this.transport=null,this.heartbeatIntervalMs=Na.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fl,this.ref=0,this.reconnectTimer=null,this.vsn=Kh,this.logger=Fl,this.conn=null,this.sendBuffer=[],this.serializer=new pg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=c=>c?(...d)=>c(...d):(...d)=>fetch(...d),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${sc.websocket}`,this.httpEndpoint=Mf(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cg.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Nr.connecting:return Jr.Connecting;case Nr.open:return Jr.Open;case Nr.closing:return Jr.Closing;default:return Jr.Closed}}isConnected(){return this.connectionState()===Jr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,c=this.getChannels().find(d=>d.topic===o);if(c)return c;{const d=new $s(`realtime:${r}`,n,this);return this.channels.push(d),d}}push(r){const{topic:n,event:o,payload:c,ref:d}=r,h=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${o} (${d})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(fg,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Na.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",v)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:c,payload:d,ref:h}=n,m=h?`(${h})`:"",p=d.status||"";this.log("receive",`${p} ${o} ${c} ${m}`.trim(),d),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(c,d,h)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Nr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Nr.open||this.conn.readyState===Nr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger($t.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",c=new URLSearchParams(n);return`${r}${o}${c}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([_g],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n,o=!1;if(r)n=r,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(c=>{const d={access_token:n,version:ug};n&&c.updateJoinPayload(d),c.joinedOnce&&c._isJoined()&&c._push($t.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(c){this.log("error",`error in ${r} callback`,c)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Pf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Na.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,c,d,h,m,p,v,y,b,k,S;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:rc,this.heartbeatIntervalMs=(c=r?.heartbeatIntervalMs)!==null&&c!==void 0?c:Na.HEARTBEAT_INTERVAL,this.worker=(d=r?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(h=r?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(m=r?.heartbeatCallback)!==null&&m!==void 0?m:Fl,this.vsn=(p=r?.vsn)!==null&&p!==void 0?p:Kh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(_=>jg[_-1]||Ng),this.vsn){case hg:this.encode=(y=r?.encode)!==null&&y!==void 0?y:((_,x)=>x(JSON.stringify(_))),this.decode=(b=r?.decode)!==null&&b!==void 0?b:((_,x)=>x(JSON.parse(_)));break;case If:this.encode=(k=r?.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(S=r?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var Zn=class extends Error{constructor(i,r){super(i),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Sg(i,r,n){const o=new URL(r,i);if(n)for(const[c,d]of Object.entries(n))d!==void 0&&o.searchParams.set(c,d);return o.toString()}async function Eg(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function Cg(i){const r=i.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:c,body:d,headers:h}){const m=Sg(i.baseUrl,o,c),p=await Eg(i.auth),v=await r(m,{method:n,headers:{...d?{"Content-Type":"application/json"}:{},...p,...h},body:d?JSON.stringify(d):void 0}),y=await v.text(),b=(v.headers.get("content-type")||"").includes("application/json"),k=b&&y?JSON.parse(y):y;if(!v.ok){const S=b?k:void 0,_=S?.error;throw new Zn(_?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:_?.type,icebergCode:_?.code,details:S})}return{status:v.status,headers:v.headers,data:k}}}}function _a(i){return i.join("")}var Tg=class{constructor(i,r=""){this.client=i,this.prefix=r}async listNamespaces(i){const r=i?{parent:_a(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(i,r){const n={namespace:i.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_a(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_a(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_a(i.namespace)}`}),!0}catch(r){if(r instanceof Zn&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(i,r){try{return await this.createNamespace(i,r)}catch(n){if(n instanceof Zn&&n.status===409)return;throw n}}};function Cs(i){return i.join("")}var Rg=class{constructor(i,r="",n){this.client=i,this.prefix=r,this.accessDelegation=n}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(i.namespace)}/tables`})).data.identifiers}async createTable(i,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(i.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(i,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Cs(i.namespace)}/tables/${i.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(i,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cs(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cs(i.namespace)}/tables/${i.name}`,headers:r})).data.metadata}async tableExists(i){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cs(i.namespace)}/tables/${i.name}`,headers:r}),!0}catch(n){if(n instanceof Zn&&n.status===404)return!1;throw n}}async createTableIfNotExists(i,r){try{return await this.createTable(i,r)}catch(n){if(n instanceof Zn&&n.status===409)return await this.loadTable({namespace:i.namespace,name:r.name});throw n}}},Og=class{constructor(i){let r="v1";i.catalogName&&(r+=`/${i.catalogName}`);const n=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=Cg({baseUrl:n,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new Tg(this.client,r),this.tableOps=new Rg(this.client,r,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,r){return this.namespaceOps.createNamespace(i,r)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,r){return this.tableOps.createTable(i,r)}async updateTable(i,r){return this.tableOps.updateTable(i,r)}async dropTable(i,r){await this.tableOps.dropTable(i,r)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,r){return this.namespaceOps.createNamespaceIfNotExists(i,r)}async createTableIfNotExists(i,r){return this.tableOps.createTableIfNotExists(i,r)}},$a=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function Me(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Ig=class extends $a{constructor(i,r,n){super(i),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ic=class extends $a{constructor(i,r){super(i),this.name="StorageUnknownError",this.originalError=r}};const kc=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Pg=()=>Response,ac=i=>{if(Array.isArray(i))return i.map(n=>ac(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,o])=>{const c=n.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));r[c]=ac(o)}),r},Ag=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Mg=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function ei(i){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ei(i)}function zg(i,r){if(ei(i)!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var o=n.call(i,r);if(ei(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function Lg(i){var r=zg(i,"string");return ei(r)=="symbol"?r:r+""}function $g(i,r,n){return(r=Lg(r))in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i}function Xh(i,r){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);r&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),n.push.apply(n,o)}return n}function de(i){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Xh(Object(n),!0).forEach(function(o){$g(i,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Xh(Object(n)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))})}return i}const Bl=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},Dg=async(i,r,n)=>{i instanceof await Pg()&&!n?.noResolveJson?i.json().then(o=>{const c=i.status||500,d=o?.statusCode||c+"";r(new Ig(Bl(o),c,d))}).catch(o=>{r(new ic(Bl(o),o))}):r(new ic(Bl(i),i))},Ug=(i,r,n,o)=>{const c={method:i,headers:r?.headers||{}};return i==="GET"||!o?c:(Ag(o)?(c.headers=de({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(o)):c.body=o,r?.duplex&&(c.duplex=r.duplex),de(de({},c),n))};async function li(i,r,n,o,c,d){return new Promise((h,m)=>{i(n,Ug(r,o,c,d)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>h(p)).catch(p=>Dg(p,m,o))})}async function ti(i,r,n,o){return li(i,"GET",r,n,o)}async function Lt(i,r,n,o,c){return li(i,"POST",r,o,c,n)}async function oc(i,r,n,o,c){return li(i,"PUT",r,o,c,n)}async function Fg(i,r,n,o){return li(i,"HEAD",r,de(de({},n),{},{noResolveJson:!0}),o)}async function Sc(i,r,n,o,c){return li(i,"DELETE",r,o,c,n)}var Bg=class{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r}then(i,r){return this.execute().then(i,r)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}};let zf;zf=Symbol.toStringTag;var Wg=class{constructor(i,r){this.downloadFn=i,this.shouldThrowOnError=r,this[zf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Bg(this.downloadFn,this.shouldThrowOnError)}then(i,r){return this.getPromise().then(i,r)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}}};const Vg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Hg=class{constructor(i,r={},n,o){this.shouldThrowOnError=!1,this.url=i,this.headers=r,this.bucketId=n,this.fetch=kc(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,r,n,o){var c=this;try{let d;const h=de(de({},Yh),o);let m=de(de({},c.headers),i==="POST"&&{"x-upsert":String(h.upsert)});const p=h.metadata;typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),p&&d.append("metadata",c.encodeMetadata(p)),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.has("cacheControl")||d.append("cacheControl",h.cacheControl),p&&!d.has("metadata")&&d.append("metadata",c.encodeMetadata(p))):(d=n,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType,p&&(m["x-metadata"]=c.toBase64(c.encodeMetadata(p))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!h.duplex&&(h.duplex="half")),o?.headers&&(m=de(de({},m),o.headers));const v=c._removeEmptyFolders(r),y=c._getFinalPath(v),b=await(i=="PUT"?oc:Lt)(c.fetch,`${c.url}/object/${y}`,d,de({headers:m},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:b.Id,fullPath:b.Key},error:null}}catch(d){if(c.shouldThrowOnError)throw d;if(Me(d))return{data:null,error:d};throw d}}async upload(i,r,n){return this.uploadOrUpdate("POST",i,r,n)}async uploadToSignedUrl(i,r,n,o){var c=this;const d=c._removeEmptyFolders(i),h=c._getFinalPath(d),m=new URL(c.url+`/object/upload/sign/${h}`);m.searchParams.set("token",r);try{let p;const v=de({upsert:Yh.upsert},o),y=de(de({},c.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",v.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",v.cacheControl)):(p=n,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType),{data:{path:d,fullPath:(await oc(c.fetch,m.toString(),p,{headers:y})).Key},error:null}}catch(p){if(c.shouldThrowOnError)throw p;if(Me(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(i,r){var n=this;try{let o=n._getFinalPath(i);const c=de({},n.headers);r?.upsert&&(c["x-upsert"]="true");const d=await Lt(n.fetch,`${n.url}/object/upload/sign/${o}`,{},{headers:c}),h=new URL(n.url+d.url),m=h.searchParams.get("token");if(!m)throw new $a("No token returned by API");return{data:{signedUrl:h.toString(),path:i,token:m},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}}async update(i,r,n){return this.uploadOrUpdate("PUT",i,r,n)}async move(i,r,n){var o=this;try{return{data:await Lt(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:i,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:o.headers}),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}}async copy(i,r,n){var o=this;try{return{data:{path:(await Lt(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:i,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}}async createSignedUrl(i,r,n){var o=this;try{let c=o._getFinalPath(i),d=await Lt(o.fetch,`${o.url}/object/sign/${c}`,de({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:o.headers});const h=n?.download?`&download=${n.download===!0?"":n.download}`:"";return d={signedUrl:encodeURI(`${o.url}${d.signedURL}${h}`)},{data:d,error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}}async createSignedUrls(i,r,n){var o=this;try{const c=await Lt(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:r,paths:i},{headers:o.headers}),d=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:c.map(h=>de(de({},h),{},{signedUrl:h.signedURL?encodeURI(`${o.url}${h.signedURL}${d}`):null})),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}}download(i,r){const n=typeof r?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(r?.transform||{}),c=o?`?${o}`:"",d=this._getFinalPath(i),h=()=>ti(this.fetch,`${this.url}/${n}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new Wg(h,this.shouldThrowOnError)}async info(i){var r=this;const n=r._getFinalPath(i);try{return{data:ac(await ti(r.fetch,`${r.url}/object/info/${n}`,{headers:r.headers})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}}async exists(i){var r=this;const n=r._getFinalPath(i);try{return await Fg(r.fetch,`${r.url}/object/${n}`,{headers:r.headers}),{data:!0,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Me(o)&&o instanceof ic){const c=o.originalError;if([400,404].includes(c?.status))return{data:!1,error:o}}throw o}}getPublicUrl(i,r){const n=this._getFinalPath(i),o=[],c=r?.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&o.push(c);const d=typeof r?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(r?.transform||{});h!==""&&o.push(h);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${m}`)}}}async remove(i){var r=this;try{return{data:await Sc(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:i},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async list(i,r,n){var o=this;try{const c=de(de(de({},Vg),r),{},{prefix:i||""});return{data:await Lt(o.fetch,`${o.url}/object/list/${o.bucketId}`,c,{headers:o.headers},n),error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}}async listV2(i,r){var n=this;try{const o=de({},i);return{data:await Lt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,o,{headers:n.headers},r),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const r=[];return i.width&&r.push(`width=${i.width}`),i.height&&r.push(`height=${i.height}`),i.resize&&r.push(`resize=${i.resize}`),i.format&&r.push(`format=${i.format}`),i.quality&&r.push(`quality=${i.quality}`),r.join("&")}};const Lf="2.91.1",$f={"X-Client-Info":`storage-js/${Lf}`};var qg=class{constructor(i,r={},n,o){this.shouldThrowOnError=!1;const c=new URL(i);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=de(de({},$f),r),this.fetch=kc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var r=this;try{const n=r.listBucketOptionsToQueryString(i);return{data:await ti(r.fetch,`${r.url}/bucket${n}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async getBucket(i){var r=this;try{return{data:await ti(r.fetch,`${r.url}/bucket/${i}`,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async createBucket(i,r={public:!1}){var n=this;try{return{data:await Lt(n.fetch,`${n.url}/bucket`,{id:i,name:i,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}}async updateBucket(i,r){var n=this;try{return{data:await oc(n.fetch,`${n.url}/bucket/${i}`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}}async emptyBucket(i){var r=this;try{return{data:await Lt(r.fetch,`${r.url}/bucket/${i}/empty`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async deleteBucket(i){var r=this;try{return{data:await Sc(r.fetch,`${r.url}/bucket/${i}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(i){const r={};return i&&("limit"in i&&(r.limit=String(i.limit)),"offset"in i&&(r.offset=String(i.offset)),i.search&&(r.search=i.search),i.sortColumn&&(r.sortColumn=i.sortColumn),i.sortOrder&&(r.sortOrder=i.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},Kg=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=de(de({},$f),r),this.fetch=kc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var r=this;try{return{data:await Lt(r.fetch,`${r.url}/bucket`,{name:i},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async listBuckets(i){var r=this;try{const n=new URLSearchParams;i?.limit!==void 0&&n.set("limit",i.limit.toString()),i?.offset!==void 0&&n.set("offset",i.offset.toString()),i?.sortColumn&&n.set("sortColumn",i.sortColumn),i?.sortOrder&&n.set("sortOrder",i.sortOrder),i?.search&&n.set("search",i.search);const o=n.toString(),c=o?`${r.url}/bucket?${o}`:`${r.url}/bucket`;return{data:await ti(r.fetch,c,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async deleteBucket(i){var r=this;try{return{data:await Sc(r.fetch,`${r.url}/bucket/${i}`,{},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}from(i){var r=this;if(!Mg(i))throw new $a("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Og({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(c,d){const h=c[d];return typeof h!="function"?h:async(...m)=>{try{return{data:await h.apply(c,m),error:null}}catch(p){if(o)throw p;return{data:null,error:p}}}}})}};const Ec={"X-Client-Info":`storage-js/${Lf}`,"Content-Type":"application/json"};var Df=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function bt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Wl=class extends Df{constructor(i,r,n){super(i),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Gg=class extends Df{constructor(i,r){super(i),this.name="StorageVectorsUnknownError",this.originalError=r}};const Cc=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Jg=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Zh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Qg=async(i,r,n)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!n?.noResolveJson){const o=i.status||500,c=i;if(typeof c.json=="function")c.json().then(d=>{const h=d?.statusCode||d?.code||o+"";r(new Wl(Zh(d),o,h))}).catch(()=>{const d=o+"";r(new Wl(c.statusText||`HTTP ${o} error`,o,d))});else{const d=o+"";r(new Wl(c.statusText||`HTTP ${o} error`,o,d))}}else r(new Gg(Zh(i),i))},Xg=(i,r,n,o)=>{const c={method:i,headers:r?.headers||{}};return o?(Jg(o)?(c.headers=de({"Content-Type":"application/json"},r?.headers),c.body=JSON.stringify(o)):c.body=o,de(de({},c),n)):c};async function Yg(i,r,n,o,c,d){return new Promise((h,m)=>{i(n,Xg(r,o,c,d)).then(p=>{if(!p.ok)throw p;if(o?.noResolveJson)return p;const v=p.headers.get("content-type");return!v||!v.includes("application/json")?{}:p.json()}).then(p=>h(p)).catch(p=>Qg(p,m,o))})}async function jt(i,r,n,o,c){return Yg(i,"POST",r,o,c,n)}var Zg=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=de(de({},Ec),r),this.fetch=Cc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/CreateIndex`,i,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async getIndex(i,r){var n=this;try{return{data:await jt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:i,indexName:r},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}}async listIndexes(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/ListIndexes`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async deleteIndex(i,r){var n=this;try{return{data:await jt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:i,indexName:r},{headers:n.headers})||{},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}}},ev=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=de(de({},Ec),r),this.fetch=Cc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var r=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await jt(r.fetch,`${r.url}/PutVectors`,i,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async getVectors(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/GetVectors`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async listVectors(i){var r=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await jt(r.fetch,`${r.url}/ListVectors`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async queryVectors(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/QueryVectors`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async deleteVectors(i){var r=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await jt(r.fetch,`${r.url}/DeleteVectors`,i,{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}},tv=class{constructor(i,r={},n){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=de(de({},Ec),r),this.fetch=Cc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async getBucket(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:i},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async listBuckets(i={}){var r=this;try{return{data:await jt(r.fetch,`${r.url}/ListVectorBuckets`,i,{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async deleteBucket(i){var r=this;try{return{data:await jt(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}},rv=class extends tv{constructor(i,r={}){super(i,r.headers||{},r.fetch)}from(i){return new sv(this.url,this.headers,i,this.fetch)}async createBucket(i){var r=()=>super.createBucket,n=this;return r().call(n,i)}async getBucket(i){var r=()=>super.getBucket,n=this;return r().call(n,i)}async listBuckets(i={}){var r=()=>super.listBuckets,n=this;return r().call(n,i)}async deleteBucket(i){var r=()=>super.deleteBucket,n=this;return r().call(n,i)}},sv=class extends Zg{constructor(i,r,n,o){super(i,r,o),this.vectorBucketName=n}async createIndex(i){var r=()=>super.createIndex,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(i={}){var r=()=>super.listIndexes,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(i){var r=()=>super.getIndex,n=this;return r().call(n,n.vectorBucketName,i)}async deleteIndex(i){var r=()=>super.deleteIndex,n=this;return r().call(n,n.vectorBucketName,i)}index(i){return new nv(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},nv=class extends ev{constructor(i,r,n,o,c){super(i,r,c),this.vectorBucketName=n,this.indexName=o}async putVectors(i){var r=()=>super.putVectors,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(i){var r=()=>super.getVectors,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(i={}){var r=()=>super.listVectors,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(i){var r=()=>super.queryVectors,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(i){var r=()=>super.deleteVectors,n=this;return r().call(n,de(de({},i),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},iv=class extends qg{constructor(i,r={},n,o){super(i,r,n,o)}from(i){return new Hg(this.url,this.headers,i,this.fetch)}get vectors(){return new rv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Kg(this.url+"/iceberg",this.headers,this.fetch)}};const Uf="2.91.1",Ms=30*1e3,lc=3,Vl=lc*Ms,av="http://localhost:9999",ov="supabase.auth.token",lv={"X-Client-Info":`gotrue-js/${Uf}`},cc="X-Supabase-Api-Version",Ff={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dv=600*1e3;class ri extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function re(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class uv extends ri{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function hv(i){return re(i)&&i.name==="AuthApiError"}class Qr extends ri{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class rr extends ri{constructor(r,n,o,c){super(r,o,c),this.name=n,this.status=o}}class wt extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fv(i){return re(i)&&i.name==="AuthSessionMissingError"}class Ts extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ka extends rr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Sa extends rr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mv(i){return re(i)&&i.name==="AuthImplicitGrantRedirectError"}class ef extends rr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pv extends rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class dc extends rr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function Hl(i){return re(i)&&i.name==="AuthRetryableFetchError"}class tf extends rr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class uc extends rr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rf=` 	
\r=`.split(""),xv=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<rf.length;r+=1)i[rf[r].charCodeAt(0)]=-2;for(let r=0;r<Ia.length;r+=1)i[Ia[r].charCodeAt(0)]=r;return i})();function sf(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Ia[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(Ia[o]),r.queuedBits-=6}}function Bf(i,r,n){const o=xv[i];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function nf(i){const r=[],n=h=>{r.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},d=h=>{yv(h,o,n)};for(let h=0;h<i.length;h+=1)Bf(i.charCodeAt(h),c,d);return r.join("")}function gv(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function vv(i,r){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const c=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|c)+65536,n+=1}gv(o,r)}}function yv(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function Fs(i){const r=[],n={queue:0,queuedBits:0},o=c=>{r.push(c)};for(let c=0;c<i.length;c+=1)Bf(i.charCodeAt(c),n,o);return new Uint8Array(r)}function wv(i){const r=[];return vv(i,n=>r.push(n)),new Uint8Array(r)}function Xr(i){const r=[],n={queue:0,queuedBits:0},o=c=>{r.push(c)};return i.forEach(c=>sf(c,n,o)),sf(null,n,o),r.join("")}function bv(i){return Math.round(Date.now()/1e3)+i}function jv(){return Symbol("auth-callback")}const tt=()=>typeof window<"u"&&typeof document<"u",Vr={tested:!1,writable:!1},Wf=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vr.tested)return Vr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Vr.tested=!0,Vr.writable=!0}catch{Vr.tested=!0,Vr.writable=!1}return Vr.writable};function Nv(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((c,d)=>{r[d]=c})}catch{}return n.searchParams.forEach((o,c)=>{r[c]=o}),r}const Vf=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),_v=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",zs=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},Hr=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},et=async(i,r)=>{await i.removeItem(r)};class Da{constructor(){this.promise=new Da.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}Da.promiseConstructor=Promise;function ql(i){const r=i.split(".");if(r.length!==3)throw new uc("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!cv.test(r[o]))throw new uc("JWT not in base64url format");return{header:JSON.parse(nf(r[0])),payload:JSON.parse(nf(r[1])),signature:Fs(r[2]),raw:{header:r[0],payload:r[1]}}}async function kv(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function Sv(i,r){return new Promise((o,c)=>{(async()=>{for(let d=0;d<1/0;d++)try{const h=await i(d);if(!r(d,null,h)){o(h);return}}catch(h){if(!r(d,h)){c(h);return}}})()})}function Ev(i){return("0"+i.toString(16)).substr(-2)}function Cv(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let c="";for(let d=0;d<56;d++)c+=n.charAt(Math.floor(Math.random()*o));return c}return crypto.getRandomValues(r),Array.from(r,Ev).join("")}async function Tv(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),c=new Uint8Array(o);return Array.from(c).map(d=>String.fromCharCode(d)).join("")}async function Rv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await Tv(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rs(i,r,n=!1){const o=Cv();let c=o;n&&(c+="/PASSWORD_RECOVERY"),await zs(i,`${r}-code-verifier`,c);const d=await Rv(o);return[d,o===d?"plain":"s256"]}const Ov=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Iv(i){const r=i.headers.get(cc);if(!r||!r.match(Ov))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Pv(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function Av(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Os(i){if(!Mv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kl(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zv(i,r){return new Proxy(i,{get:(n,o,c)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,c)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,c)}})}function af(i){return JSON.parse(JSON.stringify(i))}const Kr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Lv=[502,503,504];async function of(i){var r;if(!_v(i))throw new dc(Kr(i),0);if(Lv.includes(i.status))throw new dc(Kr(i),i.status);let n;try{n=await i.json()}catch(d){throw new Qr(Kr(d),d)}let o;const c=Iv(i);if(c&&c.getTime()>=Ff["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new tf(Kr(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new wt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((d,h)=>d&&typeof h=="string",!0))throw new tf(Kr(n),i.status,n.weak_password.reasons);throw new uv(Kr(n),i.status||500,o)}const $v=(i,r,n,o)=>{const c={method:i,headers:r?.headers||{}};return i==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),c.body=JSON.stringify(o),Object.assign(Object.assign({},c),n))};async function ce(i,r,n,o){var c;const d=Object.assign({},o?.headers);d[cc]||(d[cc]=Ff["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const h=(c=o?.query)!==null&&c!==void 0?c:{};o?.redirectTo&&(h.redirect_to=o.redirectTo);const m=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",p=await Dv(i,r,n+m,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function Dv(i,r,n,o,c,d){const h=$v(r,o,c,d);let m;try{m=await i(n,Object.assign({},h))}catch(p){throw console.error(p),new dc(Kr(p),0)}if(m.ok||await of(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await of(p)}}function zt(i){var r;let n=null;Bv(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=bv(i.expires_in)));const o=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:o},error:null}}function lf(i){const r=zt(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=i.weak_password),r}function _r(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function Uv(i){return{data:i,error:null}}function Fv(i){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:c,verification_type:d}=i,h=La(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:n,hashed_token:o,redirect_to:c,verification_type:d},p=Object.assign({},h);return{data:{properties:m,user:p},error:null}}function cf(i){return i}function Bv(i){return i.access_token&&i.refresh_token&&i.expires_in}const Gl=["global","local","others"];class Wv{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=Vf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=Gl[0]){if(Gl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gl.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_r})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=La(r,["options"]),c=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(c.new_email=o?.newEmail,delete c.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:Fv,redirectTo:n?.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:_r})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,c,d,h,m,p;try{const v={nextPage:null,lastPage:0,total:0},y=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:cf});if(y.error)throw y.error;const b=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(_=>{const x=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);v[`${j}Page`]=x}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(re(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){Os(r);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:_r})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Os(r);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:_r})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){Os(r);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:_r})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Os(r.userId);try{const{data:n,error:o}=await ce(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:n,error:o}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Os(r.userId),Os(r.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,c,d,h,m,p;try{const v={nextPage:null,lastPage:0,total:0},y=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(d=(c=r?.perPage)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""},xform:cf});if(y.error)throw y.error;const b=await y.json(),k=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(_=>{const x=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);v[`${j}Page`]=x}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},b),v),error:null}}catch(v){if(re(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(re(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}}function df(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}const Is={debug:!!(globalThis&&Wf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Vv extends Hf{}async function Hv(i,r,n){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Is.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async c=>{if(c){Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,c.name);try{return await n()}finally{Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,c.name)}}else{if(r===0)throw Is.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Vv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Is.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function qv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qf(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Kv(i){return parseInt(i,16)}function Gv(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function Jv(i){var r;const{chainId:n,domain:o,expirationTime:c,issuedAt:d=new Date,nonce:h,notBefore:m,requestId:p,resources:v,scheme:y,uri:b,version:k}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const S=qf(i.address),_=y?`${y}://${o}`:o,x=i.statement?`${i.statement}
`:"",j=`${_} wants you to sign in with your Ethereum account:
${S}

${x}`;let O=`URI: ${b}
Version: ${k}
Chain ID: ${n}${h?`
Nonce: ${h}`:""}
Issued At: ${d.toISOString()}`;if(c&&(O+=`
Expiration Time: ${c.toISOString()}`),m&&(O+=`
Not Before: ${m.toISOString()}`),p&&(O+=`
Request ID: ${p}`),v){let M=`
Resources:`;for(const $ of v){if(!$||typeof $!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${$}`);M+=`
- ${$}`}O+=M}return`${j}
${O}`}class Ve extends Error{constructor({message:r,code:n,cause:o,name:c}){var d;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=c??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=n}}class Pa extends Ve{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function Qv({error:i,options:r}){var n,o,c;const{publicKey:d}=r;if(!d)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=d.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((c=d.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new Ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Ve({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return d.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const h=window.location.hostname;if(Kf(h)){if(d.rp.id!==h)return new Ve({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new Ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Xv({error:i,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Ve({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(Kf(o)){if(n.rpId!==o)return new Ve({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Yv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Zv=new Yv;function ey(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:n,excludeCredentials:o}=i,c=La(i,["challenge","user","excludeCredentials"]),d=Fs(r).buffer,h=Object.assign(Object.assign({},n),{id:Fs(n.id).buffer}),m=Object.assign(Object.assign({},c),{challenge:d,user:h});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const v=o[p];m.excludeCredentials[p]=Object.assign(Object.assign({},v),{id:Fs(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return m}function ty(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:n}=i,o=La(i,["challenge","allowCredentials"]),c=Fs(r).buffer,d=Object.assign(Object.assign({},o),{challenge:c});if(n&&n.length>0){d.allowCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const m=n[h];d.allowCredentials[h]=Object.assign(Object.assign({},m),{id:Fs(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function ry(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:Xr(new Uint8Array(i.response.attestationObject)),clientDataJSON:Xr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function sy(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),c=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Xr(new Uint8Array(c.authenticatorData)),clientDataJSON:Xr(new Uint8Array(c.clientDataJSON)),signature:Xr(new Uint8Array(c.signature)),userHandle:c.userHandle?Xr(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Kf(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function uf(){var i,r;return!!(tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function ny(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Pa("Browser returned unexpected credential type",r)}:{data:null,error:new Pa("Empty credential response",r)}}catch(r){return{data:null,error:Qv({error:r,options:i})}}}async function iy(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Pa("Browser returned unexpected credential type",r)}:{data:null,error:new Pa("Empty credential response",r)}}catch(r){return{data:null,error:Xv({error:r,options:i})}}}const ay={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},oy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Aa(...i){const r=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),n=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),o={};for(const c of i)if(c)for(const d in c){const h=c[d];if(h!==void 0)if(Array.isArray(h))o[d]=h;else if(n(h))o[d]=h;else if(r(h)){const m=o[d];r(m)?o[d]=Aa(m,h):o[d]=Aa(h)}else o[d]=h}return o}function ly(i,r){return Aa(ay,i,r||{})}function cy(i,r){return Aa(oy,i,r||{})}class dy{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:c},d){try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!h)return{data:null,error:m};const p=c??Zv.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${o}`),v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=ly(h.webauthn.credential_options.publicKey,d?.create),{data:y,error:b}=await ny({publicKey:v,signal:p});return y?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}case"request":{const v=cy(h.webauthn.credential_options.publicKey,d?.request),{data:y,error:b}=await iy(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:p}));return y?{data:{factorId:r,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new Qr("Unexpected error in challenge",h)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new ri("rpId is required for WebAuthn authentication")};try{if(!uf())return{data:null,error:new Qr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:c},{request:d});if(!h)return{data:null,error:m};const{webauthn:p}=h;return this._verify({factorId:r,challengeId:h.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:o,credential_response:p.credential_response}})}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new Qr("Unexpected error in authenticate",h)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},d){if(!n)return{data:null,error:new ri("rpId is required for WebAuthn registration")};try{if(!uf())return{data:null,error:new Qr("Browser does not support WebAuthn",null)};const{data:h,error:m}=await this._enroll({friendlyName:r});if(!h)return await this.client.mfa.listFactors().then(y=>{var b;return(b=y.data)===null||b===void 0?void 0:b.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===r&&k.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:m};const{data:p,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:c},{create:d});return p?this._verify({factorId:h.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:v}}catch(h){return re(h)?{data:null,error:h}:{data:null,error:new Qr("Unexpected error in register",h)}}}}qv();const uy={url:av,storageKey:ov,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function hf(i,r,n){return await n()}const Ps={};class si{get jwks(){var r,n;return(n=(r=Ps[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=Ps[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Ps[this.storageKey]=Object.assign(Object.assign({},Ps[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},uy),r);if(this.storageKey=d.storageKey,this.instanceID=(n=si.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,si.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&tt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new Wv({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Vf(d.fetch),this.lock=d.lock||hf,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&tt()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=Hv:this.lock=hf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Wf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=df(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=df(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Uf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(tt()&&(n=Nv(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),tt()&&this.detectSessionInUrl&&o!=="none"){const{data:c,error:d}=await this._getSessionFromURL(n,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),mv(d)){const p=(r=d.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:h,redirectType:m}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",m),await this._saveSession(h),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?this._returnResult({error:n}):this._returnResult({error:new Qr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,c;try{const d=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(c=r?.options)===null||c===void 0?void 0:c.captchaToken}},xform:zt}),{data:h,error:m}=d;if(m||!h)return this._returnResult({data:{user:null,session:null},error:m});const p=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:v,session:p},error:null})}catch(d){if(re(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(r){var n,o,c;try{let d;if("email"in r){const{email:y,password:b,options:k}=r;let S=null,_=null;this.flowType==="pkce"&&([S,_]=await Rs(this.storage,this.storageKey)),d=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:y,password:b,data:(n=k?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:S,code_challenge_method:_},xform:zt})}else if("phone"in r){const{phone:y,password:b,options:k}=r;d=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(c=k?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:zt})}else throw new ka("You must provide either an email or phone number and a password");const{data:h,error:m}=d;if(m||!h)return await et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:v,session:p},error:null})}catch(d){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(r){try{let n;if("email"in r){const{email:d,password:h,options:m}=r;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:lf})}else if("phone"in r){const{phone:d,password:h,options:m}=r;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:lf})}else throw new ka("You must provide either an email or phone number and a password");const{data:o,error:c}=n;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o||!o.session||!o.user){const d=new Ts;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:c})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,c,d;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=r.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(d=r.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,c,d,h,m,p,v,y,b,k;let S,_;if("message"in r)S=r.message,_=r.signature;else{const{chain:x,wallet:j,statement:O,options:M}=r;let $;if(tt())if(typeof j=="object")$=j;else{const _e=window;if("ethereum"in _e&&typeof _e.ethereum=="object"&&"request"in _e.ethereum&&typeof _e.ethereum.request=="function")$=_e.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=j}const J=new URL((n=M?.url)!==null&&n!==void 0?n:window.location.href),se=await $.request({method:"eth_requestAccounts"}).then(_e=>_e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!se||se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Q=qf(se[0]);let ie=(o=M?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!ie){const _e=await $.request({method:"eth_chainId"});ie=Kv(_e)}const fe={domain:J.host,address:Q,statement:O,uri:J.href,version:"1",chainId:ie,nonce:(c=M?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(d=M?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(m=M?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=M?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(v=M?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=M?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=Jv(fe),_=await $.request({method:"personal_sign",params:[Gv(S),Q]})}try{const{data:x,error:j}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:_},!((b=r.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(k=r.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:zt});if(j)throw j;if(!x||!x.session||!x.user){const O=new Ts;return this._returnResult({data:{user:null,session:null},error:O})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:j})}catch(x){if(re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(r){var n,o,c,d,h,m,p,v,y,b,k,S;let _,x;if("message"in r)_=r.message,x=r.signature;else{const{chain:j,wallet:O,statement:M,options:$}=r;let J;if(tt())if(typeof O=="object")J=O;else{const Q=window;if("solana"in Q&&typeof Q.solana=="object"&&("signIn"in Q.solana&&typeof Q.solana.signIn=="function"||"signMessage"in Q.solana&&typeof Q.solana.signMessage=="function"))J=Q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=O}const se=new URL((n=$?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in J&&J.signIn){const Q=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$?.signInWithSolana),{version:"1",domain:se.host,uri:se.href}),M?{statement:M}:null));let ie;if(Array.isArray(Q)&&Q[0]&&typeof Q[0]=="object")ie=Q[0];else if(Q&&typeof Q=="object"&&"signedMessage"in Q&&"signature"in Q)ie=Q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ie&&"signature"in ie&&(typeof ie.signedMessage=="string"||ie.signedMessage instanceof Uint8Array)&&ie.signature instanceof Uint8Array)_=typeof ie.signedMessage=="string"?ie.signedMessage:new TextDecoder().decode(ie.signedMessage),x=ie.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${se.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${se.href}`,`Issued At: ${(c=(o=$?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((d=$?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((h=$?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((m=$?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((p=$?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((v=$?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((b=(y=$?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...$.signInWithSolana.resources.map(ie=>`- ${ie}`)]:[]].join(`
`);const Q=await J.signMessage(new TextEncoder().encode(_),"utf8");if(!Q||!(Q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=Q}}try{const{data:j,error:O}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Xr(x)},!((k=r.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(S=r.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:zt});if(O)throw O;if(!j||!j.session||!j.user){const M=new Ts;return this._returnResult({data:{user:null,session:null},error:M})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:O})}catch(j){if(re(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(r){const n=await Hr(this.storage,`${this.storageKey}-code-verifier`),[o,c]=(n??"").split("/");try{if(!o&&this.flowType==="pkce")throw new pv;const{data:d,error:h}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:zt});if(await et(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!d||!d.session||!d.user){const m=new Ts;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:c??null}),error:h})}catch(d){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(r){try{const{options:n,provider:o,token:c,access_token:d,nonce:h}=r,m=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:c,access_token:d,nonce:h,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:zt}),{data:p,error:v}=m;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!p||!p.session||!p.user){const y=new Ts;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:v})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,c,d,h;try{if("email"in r){const{email:m,options:p}=r;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Rs(this.storage,this.storageKey));const{error:b}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p?.data)!==null&&n!==void 0?n:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in r){const{phone:m,options:p}=r,{data:v,error:y}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(c=p?.data)!==null&&c!==void 0?c:{},create_user:(d=p?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(h=p?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:y})}throw new ka("You must provide either an email or phone number.")}catch(m){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(r){var n,o;try{let c,d;"options"in r&&(c=(n=r.options)===null||n===void 0?void 0:n.redirectTo,d=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:m}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:d}}),redirectTo:c,xform:zt});if(m)throw m;if(!h)throw new Error("An error occurred on token verification.");const p=h.session,v=h.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:v,session:p},error:null})}catch(c){if(re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(r){var n,o,c,d,h;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Rs(this.storage,this.storageKey));const v=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((c=r?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:Uv});return!((d=v.data)===null||d===void 0)&&d.url&&tt()&&!(!((h=r.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(m){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new wt;const{error:c}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:c,options:d}=r,{error:h}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in r){const{phone:o,type:c,options:d}=r,{data:h,error:m}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:c,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:m})}throw new ka("You must provide either an email or phone number and a type")}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<Vl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const h=await Hr(this.userStorage,this.storageKey+"-user");h?.user?r.user=h.user:r.user=Kl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};r.user=zv(r.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:c,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:_r}):await this._useSession(async n=>{var o,c,d;const{data:h,error:m}=n;if(m)throw m;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wt}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0,xform:_r})})}catch(n){if(re(n))return fv(n)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:c,error:d}=o;if(d)throw d;if(!c.session)throw new wt;const h=c.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await Rs(this.storage,this.storageKey));const{data:v,error:y}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:h.access_token,xform:_r});if(y)throw y;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new wt;const n=Date.now()/1e3;let o=n,c=!0,d=null;const{payload:h}=ql(r.access_token);if(h.exp&&(o=h.exp,c=o<=n),c){const{data:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};d=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;d={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(n){if(re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:h,error:m}=n;if(m)throw m;r=(o=h.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new wt;const{data:c,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!tt())throw new Sa("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Sa(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sa("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new ef("No code detected.");const{data:M,error:$}=await this._exchangeCodeForSession(r.code);if($)throw $;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:c,access_token:d,refresh_token:h,expires_in:m,expires_at:p,token_type:v}=r;if(!d||!m||!h||!v)throw new Sa("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(m);let k=y+b;p&&(k=parseInt(p));const S=k-y;S*1e3<=Ms&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${b}s`);const _=k-b;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,k,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,k,y);const{data:x,error:j}=await this._getUser(d);if(j)throw j;const O={provider_token:o,provider_refresh_token:c,access_token:d,expires_in:b,expires_at:k,refresh_token:h,token_type:v,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:r.type},error:null})}catch(o){if(re(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Hr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({error:d});const h=(o=c.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:m}=await this.admin.signOut(h,r);if(m&&!(hv(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return r!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=jv(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,c;try{const{data:{session:d},error:h}=n;if(h)throw h;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",r,"session",d)}catch(d){await((c=this.stateChangeEmitters.get(r))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",d),console.error(d)}})}async resetPasswordForEmail(r,n={}){let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Rs(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:c,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(d){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:c}=await this._useSession(async d=>{var h,m,p,v,y;const{data:b,error:k}=d;if(k)throw k;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(h=r.options)===null||h===void 0?void 0:h.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(v=b.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(c)throw c;return tt()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(re(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:c,data:{session:d}}=n;if(c)throw c;const{options:h,provider:m,token:p,access_token:v,nonce:y}=r,b=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:p,access_token:v,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:zt}),{data:k,error:S}=b;return S?this._returnResult({data:{user:null,session:null},error:S}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new Ts}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:S}))}catch(c){if(await et(this.storage,`${this.storageKey}-code-verifier`),re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,c;const{data:d,error:h}=n;if(h)throw h;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(c=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await Sv(async c=>(c>0&&await kv(200*Math.pow(2,c-1)),this._debug(n,"refreshing attempt",c),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:zt})),(c,d)=>{const h=200*Math.pow(2,c);return d&&Hl(d)&&Date.now()+h-o<Ms})}catch(o){if(this._debug(n,"error",o),re(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),tt()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const c=await Hr(this.storage,this.storageKey);if(c&&this.userStorage){let h=await Hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await zs(this.userStorage,this.storageKey+"-user",h)),c.user=(r=h?.user)!==null&&r!==void 0?r:Kl()}else if(c&&!c.user&&!c.user){const h=await Hr(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await et(this.storage,this.storageKey+"-user"),await zs(this.storage,this.storageKey,c)):c.user=Kl()}if(this._debug(o,"session from storage",c),!this._isValidSession(c)){this._debug(o,"session is not valid"),c!==null&&await this._removeSession();return}const d=((n=c.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Vl;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${Vl}s`),d){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),Hl(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:m}=await this._getUser(c.access_token);!m&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(o,"error",c),console.error(c);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Da;const{data:d,error:h}=await this._refreshAccessToken(r);if(h)throw h;if(!d.session)throw new wt;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const m={data:d.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(d){if(this._debug(c,"error",d),re(d)){const h={data:null,error:d};return Hl(d)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(r,n,o=!0){const c=`#_notifyAllSubscribers(${r})`;this._debug(c,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const d=[],h=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,n)}catch(p){d.push(p)}});if(await Promise.all(h),d.length>0){for(let m=0;m<d.length;m+=1)console.error(d[m]);throw d[0]}}finally{this._debug(c,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await et(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await zs(this.userStorage,this.storageKey+"-user",{user:n.user});const c=Object.assign({},n);delete c.user;const d=af(c);await zs(this.storage,this.storageKey,d)}else{const c=af(n);await zs(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&tt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Ms);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((o.expires_at*1e3-r)/Ms);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${Ms}ms, refresh threshold is ${lc} ticks`),c<=lc&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Hf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const c=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&c.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,h]=await Rs(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(m.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);c.push(d.toString())}return o?.skipBrowserRedirect&&c.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${c.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;return d?this._returnResult({data:null,error:d}):await ce(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,c;const{data:d,error:h}=n;if(h)return this._returnResult({data:null,error:h});const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:v}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&p.type==="totp"&&(!((c=p?.totp)===null||c===void 0)&&c.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const h=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?ry(r.webauthn.credential_response):sy(r.webauthn.credential_response)})}:{code:r.code}),{data:m,error:p}=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var o;const{data:c,error:d}=n;if(d)return this._returnResult({data:null,error:d});const h=await ce(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=c?.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:m}=h;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ey(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ty(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const c={all:[],phone:[],totp:[],webauthn:[]};for(const d of(r=n?.factors)!==null&&r!==void 0?r:[])c.all.push(d),d.status==="verified"&&c[d.factor_type].push(d);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=ql(o.access_token);let h=null;d.aal&&(h=d.aal);let m=h;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const v=d.amr||[];return{data:{currentLevel:h,nextLevel:m,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new wt})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:c},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new wt});const h=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&tt()&&!n?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:c},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!c)return this._returnResult({data:null,error:new wt});const h=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return h.data&&h.data.redirect_url&&tt()&&!n?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new wt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new wt})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(m=>m.kid===r);if(o)return o;const c=Date.now();if(o=this.jwks.keys.find(m=>m.kid===r),o&&this.jwks_cached_at+dv>c)return o;const{data:d,error:h}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=c,o=d.keys.find(m=>m.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:S,error:_}=await this.getSession();if(_||!S.session)return this._returnResult({data:null,error:_});o=S.session.access_token}const{header:c,payload:d,signature:h,raw:{header:m,payload:p}}=ql(o);n?.allowExpired||Pv(d.exp);const v=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!v){const{error:S}=await this.getUser(o);if(S)throw S;return{data:{claims:d,header:c,signature:h},error:null}}const y=Av(c.alg),b=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,h,wv(`${m}.${p}`)))throw new uc("Invalid JWT signature");return{data:{claims:d,header:c,signature:h},error:null}}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}}si.nextInstanceID={};const hy=si,fy="2.91.1";let Bn="";typeof Deno<"u"?Bn="deno":typeof document<"u"?Bn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bn="react-native":Bn="node";const my={"X-Client-Info":`supabase-js-${Bn}/${fy}`},py={headers:my},xy={schema:"public"},gy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vy={};function ni(i){"@babel/helpers - typeof";return ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ni(i)}function yy(i,r){if(ni(i)!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var o=n.call(i,r);if(ni(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function wy(i){var r=yy(i,"string");return ni(r)=="symbol"?r:r+""}function by(i,r,n){return(r=wy(r))in i?Object.defineProperty(i,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[r]=n,i}function ff(i,r){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);r&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(i,c).enumerable})),n.push.apply(n,o)}return n}function $e(i){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ff(Object(n),!0).forEach(function(o){by(i,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):ff(Object(n)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))})}return i}const jy=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Ny=()=>Headers,_y=(i,r,n)=>{const o=jy(n),c=Ny();return async(d,h)=>{var m;const p=(m=await r())!==null&&m!==void 0?m:i;let v=new c(h?.headers);return v.has("apikey")||v.set("apikey",i),v.has("Authorization")||v.set("Authorization",`Bearer ${p}`),o(d,$e($e({},h),{},{headers:v}))}};function ky(i){return i.endsWith("/")?i:i+"/"}function Sy(i,r){var n,o;const{db:c,auth:d,realtime:h,global:m}=i,{db:p,auth:v,realtime:y,global:b}=r,k={db:$e($e({},p),c),auth:$e($e({},v),d),realtime:$e($e({},y),h),storage:{},global:$e($e($e({},b),m),{},{headers:$e($e({},(n=b?.headers)!==null&&n!==void 0?n:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?k.accessToken=i.accessToken:delete k.accessToken,k}function Ey(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ky(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Cy=class extends hy{constructor(i){super(i)}},Ty=class{constructor(i,r,n){var o,c;this.supabaseUrl=i,this.supabaseKey=r;const d=Ey(i);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:xy,realtime:vy,auth:$e($e({},gy),{},{storageKey:h}),global:py},p=Sy(n??{},m);if(this.storageKey=(o=p.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(c=p.global.headers)!==null&&c!==void 0?c:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(y,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=p.auth)!==null&&v!==void 0?v:{},this.headers,p.global.fetch)}this.fetch=_y(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient($e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new lg(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new iv(this.storageUrl.href,this.headers,this.fetch,n?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new sg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,r,n)}channel(i,r={config:{}}){return this.realtime.channel(i,r)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,r,n;if(i.accessToken)return await i.accessToken();const{data:o}=await i.auth.getSession();return(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:c,storageKey:d,flowType:h,lock:m,debug:p,throwOnError:v},y,b){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cy({url:this.authUrl.href,headers:$e($e({},k),y),storageKey:d,autoRefreshToken:i,persistSession:r,detectSessionInUrl:n,storage:o,userStorage:c,flowType:h,lock:m,debug:p,throwOnError:v,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new kg(this.realtimeUrl.href,$e($e({},i),{},{params:$e($e({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,r)=>{this._handleTokenChanged(i,"CLIENT",r?.access_token)})}_handleTokenChanged(i,r,n){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ry=(i,r,n)=>new Ty(i,r,n);function Oy(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const r=i.version;if(r==null)return!1;const n=r.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Oy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Iy="https://rdcwtvmbilfbybzjxltc.supabase.co",Py="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJkY3d0dm1iaWxmYnliemp4bHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgzMzc1NjYsImV4cCI6MjA4MzkxMzU2Nn0._Quxv_OMncC6WPtxaINRr8nJnKQEwxmV4l-h9RbuN5k",qr=Ry(Iy,Py,{auth:{persistSession:!0,autoRefreshToken:!0}}),Gf=Nc((i,r)=>({mills:[],clients:[],loading:!1,error:null,fetchMills:async()=>{i({loading:!0,error:null});try{const{data:n,error:o}=await qr.from("mills").select("*").order("name");if(o)throw o;i({mills:n})}catch(n){console.error(" Error fetchMills:",n),i({error:n.message})}finally{i({loading:!1})}},fetchClients:async()=>{try{const{data:n,error:o}=await qr.from("clients").select("*").eq("is_active",!0).order("name");if(o)throw o;i({clients:n})}catch(n){console.error(" Error fetchClients:",n)}},registerMilling:async n=>{i({loading:!0,error:null});try{const{data:o,error:c}=await qr.from("clients").select("stock_cuarzo, stock_llampo").eq("id",n.clientId).single();if(c)throw c;const d=n.mills.map(b=>({mill_id:b.id,cuarzo:b.cuarzo,llampo:b.llampo})),{error:h}=await qr.from("milling_logs").insert({client_id:n.clientId,mineral_type:n.mineralType,total_sacks:n.totalSacos,total_cuarzo:n.totalCuarzo,total_llampo:n.totalLlampo,mills_used:d,status:"IN_PROGRESS",observations:n.observations});if(h)throw h;const m=(o.stock_cuarzo||0)-n.totalCuarzo,p=(o.stock_llampo||0)-n.totalLlampo,{error:v}=await qr.from("clients").update({stock_cuarzo:Math.max(0,m),stock_llampo:Math.max(0,p)}).eq("id",n.clientId);if(v)throw v;const y=n.mills.map(async b=>qr.from("mills").update({status:"ocupado",current_client_id:n.clientId,current_cuarzo:b.cuarzo,current_llampo:b.llampo,start_time:new Date().toISOString()}).eq("id",b.id));return await Promise.all(y),await r().fetchMills(),await r().fetchClients(),!0}catch(o){return console.error(" Error registerMilling:",o),i({error:o.message}),!1}finally{i({loading:!1})}},updateMillStatus:async(n,o)=>{try{const c={status:o};o==="libre"&&(c.current_cuarzo=0,c.current_llampo=0,c.current_client_id=null,c.current_client=null),await qr.from("mills").update(c).eq("id",n),r().fetchMills()}catch(c){console.error("Error updating mill status:",c)}}})),Ay=()=>{const{mills:i,loading:r,fetchMills:n}=Gf();if(L.useEffect(()=>{n()},[n]),r)return s.jsx("div",{className:"flex justify-center items-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-amber-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando dashboard..."})]})});const o=i&&i.length>0?i:[{id:"1",nombre:"Molino I",estado:"OCUPADO",sacosProcesados:320,horasTrabajadas:125,status:"ocupado",name:"Molino I",capacity:150,total_hours_worked:320},{id:"2",nombre:"Molino II",estado:"LIBRE",sacosProcesados:0,horasTrabajadas:98,status:"libre",name:"Molino II",capacity:120,total_hours_worked:280},{id:"3",nombre:"Molino III",estado:"MANTENIMIENTO",sacosProcesados:0,horasTrabajadas:156,status:"mantenimiento",name:"Molino III",capacity:180,total_hours_worked:310},{id:"4",nombre:"Molino IV",estado:"LIBRE",sacosProcesados:0,horasTrabajadas:203,status:"libre",name:"Molino IV",capacity:160,total_hours_worked:290}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Dashboard"}),s.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Resumen general del sistema de molienda"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-600 rounded-xl text-sm font-medium hover:bg-slate-50 hover:text-slate-900 transition-colors shadow-sm",children:[s.jsx(Ws,{size:18,strokeWidth:1.5,className:"mr-2"}),"Exportar"]}),s.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-white text-indigo-600 rounded-xl text-sm font-medium border border-indigo-100 shadow-sm",children:[s.jsx(za,{size:18,strokeWidth:1.5,className:"mr-2"}),new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ja,{title:"Total Moliendo",value:"145",change:"+12.5%",icon:es,color:"blue",description:"esta semana",trend:"up"}),s.jsx(ja,{title:"Stock Actual",value:"1,250",change:"-2%",icon:Sx,color:"orange",description:"sacos disponibles",trend:"down"}),s.jsx(ja,{title:"Clientes Activos",value:"28",change:"+3",icon:Us,color:"green",description:"nuevos este mes",trend:"up"}),s.jsx(ja,{title:"Ingresos Mensuales",value:"$45,280",change:"+8.5%",icon:fx,color:"purple",description:"vs mes pasado",trend:"up"})]}),s.jsxs("div",{className:"card-hover bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Estado de Molinos"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Tiempo real - Actualizado ahora"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full mr-2"}),s.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Libre"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full mr-2"}),s.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Ocupado"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-2.5 h-2.5 bg-red-500 rounded-full mr-2"}),s.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Mantenimiento"})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map(c=>s.jsx(Xx,{mill:c},c.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card-hover bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Actividad Semanal"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Sacos procesados ltimos 7 das"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ec,{className:"text-indigo-600",size:20,strokeWidth:1.5}),s.jsxs("select",{className:"text-xs font-medium border border-slate-200 rounded-lg px-3 py-1.5 bg-white text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20",children:[s.jsx("option",{children:"Esta semana"}),s.jsx("option",{children:"Este mes"}),s.jsx("option",{children:"Este ao"})]})]})]}),s.jsx("div",{className:"h-80",children:s.jsx(Zx,{})})]}),s.jsxs("div",{className:"card-hover bg-white rounded-xl p-6 border border-slate-200 shadow-sm flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Moliendas Recientes"}),s.jsx("p",{className:"text-sm text-slate-500",children:"ltimas 5 registradas"})]}),s.jsxs("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center",children:["Ver todas ",s.jsx(Zl,{className:"ml-1",size:16,strokeWidth:1.5})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-1",children:s.jsx(Yx,{})}),s.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100",children:s.jsx("button",{className:"w-full inline-flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700 transition-colors shadow-sm active:scale-[0.98]",children:s.jsx("span",{children:"+ Nueva Molienda"})})})]})]}),s.jsxs("div",{className:"card-hover bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"bg-red-50 p-2 rounded-lg mr-3",children:s.jsx(kf,{className:"text-red-600",size:20,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Notificaciones Recientes"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Alertas del sistema"})]})]}),s.jsx("div",{className:"bg-red-50 text-red-700 text-xs font-bold px-2.5 py-1 rounded-full border border-red-100",children:"3 nuevas"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-start p-4 hover:bg-red-50/50 rounded-xl transition-colors border border-red-100 bg-red-50/30",children:[s.jsx("div",{className:"bg-red-100 p-2 rounded-lg mr-3 shrink-0",children:s.jsx(Ds,{size:18,strokeWidth:1.5,className:"text-red-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"font-bold text-slate-900 text-sm",children:"Stock bajo"}),s.jsx("span",{className:"text-[10px] text-red-700 bg-red-100 px-1.5 py-0.5 rounded font-medium",children:"Crtico"})]}),s.jsx("p",{className:"text-xs text-slate-600 mt-1 mb-2",children:"Nivel crtico en bodega 3 - Requiere atencin."}),s.jsx("span",{className:"text-[10px] text-slate-400",children:"Hace 2 horas"})]})]}),s.jsxs("div",{className:"flex items-start p-4 hover:bg-emerald-50/50 rounded-xl transition-colors border border-emerald-100 bg-emerald-50/30",children:[s.jsx("div",{className:"bg-emerald-100 p-2 rounded-lg mr-3 shrink-0",children:s.jsx(He,{size:18,strokeWidth:1.5,className:"text-emerald-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"font-bold text-slate-900 text-sm",children:"Nuevo cliente"}),s.jsx("span",{className:"text-[10px] text-emerald-700 bg-emerald-100 px-1.5 py-0.5 rounded font-medium",children:"Info"})]}),s.jsx("p",{className:"text-xs text-slate-600 mt-1 mb-2",children:"Minera Santa Rosa registrada."}),s.jsx("span",{className:"text-[10px] text-slate-400",children:"Hace 4 horas"})]})]}),s.jsxs("div",{className:"flex items-start p-4 hover:bg-blue-50/50 rounded-xl transition-colors border border-blue-100 bg-blue-50/30",children:[s.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-3 shrink-0",children:s.jsx(es,{size:18,strokeWidth:1.5,className:"text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"font-bold text-slate-900 text-sm",children:"Fin Molienda"}),s.jsx("span",{className:"text-[10px] text-blue-700 bg-blue-100 px-1.5 py-0.5 rounded font-medium",children:"Proceso"})]}),s.jsx("p",{className:"text-xs text-slate-600 mt-1 mb-2",children:"320 sacos en Molino I."}),s.jsx("span",{className:"text-[10px] text-slate-400",children:"Hace 6 horas"})]})]})]})]})]})},My=()=>{const[i,r]=L.useState(""),[n,o]=L.useState("all"),[c,d]=L.useState(1),h=10,p=Array.from({length:48},(_,x)=>({id:`#${(1e3+x).toString().padStart(3,"0")}`,molinoId:`${x%4+1}`,clienteId:`${x+1}`,clienteNombre:`Cliente ${String.fromCharCode(65+x%5)}`,cantidadSacos:15+Math.floor(Math.random()*20),mineral:x%2===0?"OXIDO":"SULFURO",subMineral:x%2===0?"CUARZO":"LLAMPO",horaInicio:new Date(Date.now()-Math.random()*7*24*60*60*1e3),horaFinCalculada:new Date(Date.now()+Math.random()*24*60*60*1e3),duracionMinutos:x%2===0?100:120+Math.floor(Math.random()*30),estado:x%3===0?"EN_PROCESO":"FINALIZADO",operadorId:"1",operadorNombre:"Operador "+(x%3+1),createdAt:new Date(Date.now()-Math.random()*30*24*60*60*1e3)})).filter(_=>{const x=_.clienteNombre.toLowerCase().includes(i.toLowerCase())||_.id.toLowerCase().includes(i.toLowerCase()),j=n==="all"||_.estado===n;return x&&j}),v=Math.ceil(p.length/h),y=(c-1)*h,b=p.slice(y,y+h),k=_=>{switch(_){case"EN_PROCESO":return s.jsx("span",{className:"px-2.5 py-0.5 bg-amber-50 text-amber-700 border border-amber-100 text-xs font-semibold rounded-full",children:"En Proceso"});case"FINALIZADO":return s.jsx("span",{className:"px-2.5 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-100 text-xs font-semibold rounded-full",children:"Finalizado"});default:return s.jsx("span",{className:"px-2.5 py-0.5 bg-slate-50 text-slate-700 border border-slate-100 text-xs font-semibold rounded-full",children:_})}},S=_=>s.jsx("span",{className:`px-2.5 py-0.5 text-xs font-semibold rounded-full border ${_==="OXIDO"?"bg-blue-50 text-blue-700 border-blue-100":"bg-purple-50 text-purple-700 border-purple-100"}`,children:_});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Moliendas"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Historial completo de procesos de molienda"})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[s.jsxs("button",{className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors shadow-sm",children:[s.jsx(Zr,{size:18,strokeWidth:1.5,className:"mr-2"}),"Enviar WhatsApp"]}),s.jsxs("button",{className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors shadow-sm",children:[s.jsx(Ws,{size:18,strokeWidth:1.5,className:"mr-2"}),"Exportar"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20,strokeWidth:1.5}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, ID, molino...",value:i,onChange:_=>r(_.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all placeholder:text-slate-400"})]})}),s.jsx("div",{children:s.jsxs("div",{className:"relative",children:[s.jsx(Ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20,strokeWidth:1.5}),s.jsxs("select",{value:n,onChange:_=>o(_.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all appearance-none cursor-pointer",children:[s.jsx("option",{value:"all",children:"Todos los estados"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"FINALIZADO",children:"Finalizado"})]})]})}),s.jsx("div",{children:s.jsxs("div",{className:"relative",children:[s.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20,strokeWidth:1.5}),s.jsxs("select",{className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all appearance-none cursor-pointer",children:[s.jsx("option",{children:"ltimos 7 das"}),s.jsx("option",{children:"Este mes"}),s.jsx("option",{children:"Mes anterior"}),s.jsx("option",{children:"Rango personalizado"})]})]})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsx("button",{className:"px-4 py-1.5 bg-indigo-50 text-indigo-700 rounded-lg text-sm font-medium border border-indigo-100",children:"Hoy"}),s.jsx("button",{className:"px-4 py-1.5 bg-white text-slate-600 rounded-lg text-sm font-medium border border-slate-200 hover:bg-slate-50",children:"Esta semana"}),s.jsx("button",{className:"px-4 py-1.5 bg-white text-slate-600 rounded-lg text-sm font-medium border border-slate-200 hover:bg-slate-50",children:"Este mes"}),s.jsxs("button",{className:"px-4 py-1.5 bg-white text-slate-600 rounded-lg text-sm font-medium border border-slate-200 hover:bg-slate-50 flex items-center",children:[s.jsx(Ta,{size:14,strokeWidth:1.5,className:"mr-2"}),"Ms filtros"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Molino"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Sacos"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Mineral"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Duracin"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Operador"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100",children:b.map(_=>s.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"font-mono text-sm font-medium text-slate-600",children:_.id})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center mr-3 border border-slate-200",children:s.jsxs("span",{className:"font-semibold text-xs text-slate-600",children:["M",_.molinoId]})}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Molino ",_.molinoId]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:_.clienteNombre}),s.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:_.horaInicio.toLocaleDateString()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm font-semibold text-slate-700",children:_.cantidadSacos})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S(_.mineral)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-slate-600 font-medium",children:[Math.floor(_.duracionMinutos/60),"h ",_.duracionMinutos%60,"m"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k(_.estado)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-slate-600",children:_.operadorNombre})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver detalles",children:s.jsx(Jn,{size:18,strokeWidth:1.5})}),s.jsx("button",{className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:s.jsx(Qn,{size:18,strokeWidth:1.5})}),s.jsx("button",{className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:s.jsx(Vs,{size:18,strokeWidth:1.5})})]})})]},_.id))})]})}),s.jsxs("div",{className:"px-6 py-4 border-t border-slate-100 flex items-center justify-between bg-white",children:[s.jsxs("div",{className:"text-sm text-slate-500",children:["Mostrando ",s.jsxs("span",{className:"font-medium text-slate-700",children:[y+1,"-",Math.min(y+h,p.length)]})," de ",s.jsx("span",{className:"font-medium text-slate-700",children:p.length})," registros"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>d(_=>Math.max(_-1,1)),disabled:c===1,className:"p-2 rounded-lg border border-slate-200 text-slate-500 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(yc,{size:18,strokeWidth:1.5})}),Array.from({length:Math.min(5,v)},(_,x)=>{let j;return v<=5||c<=3?j=x+1:c>=v-2?j=v-4+x:j=c-2+x,s.jsx("button",{onClick:()=>d(j),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${c===j?"bg-indigo-600 text-white shadow-sm shadow-indigo-200":"border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:j},x)}),s.jsx("button",{onClick:()=>d(_=>Math.min(_+1,v)),disabled:c===v,className:"p-2 rounded-lg border border-slate-200 text-slate-500 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(wc,{size:18,strokeWidth:1.5})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm flex items-center",children:[s.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl mr-4 border border-indigo-100",children:s.jsx("span",{className:"text-indigo-600 font-bold",children:""})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total sacos procesados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:"4,220"})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm flex items-center",children:[s.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl mr-4 border border-emerald-100",children:s.jsx("span",{className:"text-emerald-600 font-bold",children:""})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Moliendas finalizadas"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:"156"})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 shadow-sm flex items-center",children:[s.jsx("div",{className:"p-3 bg-amber-50 rounded-xl mr-4 border border-amber-100",children:s.jsx("span",{className:"text-amber-600 font-bold",children:""})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tiempo promedio"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:"2.1h"})]})]})]})]})},Fn=[{id:"1",nombre:"Molino I"},{id:"2",nombre:"Molino II"},{id:"3",nombre:"Molino III"},{id:"4",nombre:"Molino IV"}],mf=[{value:"ADMIN",label:"Administrador",color:"bg-purple-100 text-purple-800"},{value:"OPERADOR",label:"Operador",color:"bg-blue-100 text-blue-800"},{value:"GERENCIA",label:"Gerencia",color:"bg-green-100 text-green-800"}],Bs=[{value:"MINERO",label:"Minero"},{value:"PALLAQUERO",label:"Pallaquero"}],Yr=[{value:"OXIDO",label:"xido"},{value:"SULFURO",label:"Sulfuro"}],Hn=[{id:"1",nombre:"Minera Andina SA",tipo:"MINERO",stock:500},{id:"2",nombre:"Compaa Minerales del Sur",tipo:"MINERO",stock:320},{id:"3",nombre:"Juan Prez (Pallaquero)",tipo:"PALLAQUERO",stock:150},{id:"4",nombre:"Carlos Lpez (Minero)",tipo:"MINERO",stock:280}],zy=[{id:"1",nombre:"Molino I",capacidadMaxima:200,estado:"LIBRE",clienteActual:null,inicioProceso:null},{id:"2",nombre:"Molino II",capacidadMaxima:200,estado:"LIBRE",clienteActual:null,inicioProceso:null},{id:"3",nombre:"Molino III",capacidadMaxima:180,estado:"LIBRE",clienteActual:null,inicioProceso:null},{id:"4",nombre:"Molino IV",capacidadMaxima:180,estado:"LIBRE",clienteActual:null,inicioProceso:null}],Ly=()=>{const{user:i}=Qs(),{mills:r,clients:n,fetchMills:o,fetchClients:c,registerMilling:d}=Gf(),[h,m]=L.useState(!1),[p,v]=L.useState(""),[y,b]=L.useState(""),[k,S]=L.useState({isOpen:!1,title:"",message:"",type:"info",onConfirm:()=>{},showCancel:!1,confirmText:"Aceptar",cancelText:"Cancelar"});L.useEffect(()=>{o(),c()},[o,c]);const _=(w,C,V="warning")=>{S({isOpen:!0,title:w,message:C,type:V,onConfirm:()=>S(G=>({...G,isOpen:!1})),showCancel:!1,confirmText:"Aceptar",cancelText:""})},[x,j]=L.useState({clienteId:"",clienteNombre:"",tipoCliente:"",mineral:"",tiempos:{oxido:{hora40:!0,hora00:!1},sulfuro:{hora00:!1,hora30:!0}},fechaInicio:null,horaInicio:null,horaFin:null,stockTotal:0,stockCuarzo:0,stockLlampo:0,stockRestanteTotal:0,stockRestanteCuarzo:0,stockRestanteLlampo:0,molinos:zy.map(w=>({id:w.id,nombre:w.nombre,activo:!1,cuarzo:0,llampo:0,total:0,capacidadMaxima:w.capacidadMaxima,disponible:!0,estado:"LIBRE",tiempoEstimado:0,horaFin:null})),observaciones:"",totalSacos:0,totalCuarzo:0,totalLlampo:0,tiempoPorMolino:0,procesoIniciado:!1,procesoId:null,estado:"PROCESANDO"});L.useEffect(()=>{r.length>0&&j(w=>{if(w.molinos.length===0)return{...w,molinos:r.map(V=>({id:V.id,nombre:V.name,activo:!1,cuarzo:0,llampo:0,total:0,capacidadMaxima:V.capacity,disponible:V.status==="libre",estado:V.status,tiempoEstimado:0,horaFin:null,current_client:V.current_client,current_sacks:V.current_sacks}))};const C=w.molinos.map(V=>{const G=r.find(U=>U.id===V.id);if(G){const U=G.status!=="libre";return{...V,disponible:!U,estado:G.status,activo:U?!1:V.activo}}return V});return{...w,molinos:C}})},[r]);const O=(w,C)=>{if(!w||C<=0)return"--:--";const[V,G]=w.split(":").map(Number),U=V*60+G+C;let H=Math.floor(U/60);const F=U%60;return H=H%24,`${H.toString().padStart(2,"0")}:${F.toString().padStart(2,"0")}`},M=w=>{const C=Math.floor(w/60),V=w%60;return C>0?`${C}h ${V}min`:`${V}min`},$=()=>x.mineral==="OXIDO"?x.tiempos.oxido.hora40&&x.tiempos.oxido.hora00||x.tiempos.oxido.hora40?100:x.tiempos.oxido.hora00?60:100:x.mineral==="SULFURO"?x.tiempos.sulfuro.hora00&&x.tiempos.sulfuro.hora30||x.tiempos.sulfuro.hora30?150:x.tiempos.sulfuro.hora00?120:150:0;L.useEffect(()=>{let w=0,C=0,V=0;const G=$();x.molinos.forEach(ae=>{ae.activo&&(w+=ae.total,C+=ae.cuarzo,V+=ae.llampo)});const U=x.stockTotal-w,H=x.stockCuarzo-C,F=x.stockLlampo-V;let R=null;x.horaInicio&&G>0&&(R=O(x.horaInicio,G));const D=x.molinos.map(ae=>ae.activo&&x.horaInicio?{...ae,horaFin:R,tiempoEstimado:G}:{...ae,horaFin:ae.activo&&x.horaInicio?R:null,tiempoEstimado:ae.activo?G:0});j(ae=>({...ae,totalSacos:w,totalCuarzo:C,totalLlampo:V,stockRestanteTotal:U,stockRestanteCuarzo:H,stockRestanteLlampo:F,tiempoPorMolino:G,horaFin:R,molinos:D}))},[x.molinos,x.stockTotal,x.stockCuarzo,x.stockLlampo,x.tiempos,x.mineral,x.horaInicio]);const J=w=>{const C=n.find(V=>V.id===w);if(C){const V=(C.stock_cuarzo||0)+(C.stock_llampo||0);j(G=>({...G,clienteId:C.id,clienteNombre:C.name,tipoCliente:C.type,stockTotal:V,stockCuarzo:C.stock_cuarzo||0,stockLlampo:C.stock_llampo||0,stockRestanteTotal:V,stockRestanteCuarzo:C.stock_cuarzo||0,stockRestanteLlampo:C.stock_llampo||0}))}},se=(w,C,V)=>{j(G=>w==="OXIDO"?{...G,tiempos:{...G.tiempos,oxido:{...G.tiempos.oxido,[C]:V}}}:w==="SULFURO"?{...G,tiempos:{...G.tiempos,sulfuro:{...G.tiempos.sulfuro,[C]:V}}}:G)},Q=(w,C,V)=>{j(G=>{const U=G.molinos.map(H=>{if(H.id===w){let F={...H};if(C==="activo")if(F.activo=V,!V)F.cuarzo=0,F.llampo=0,F.total=0,F.tiempoEstimado=0,F.horaFin=null;else{const R=$();F.tiempoEstimado=R,G.horaInicio&&(F.horaFin=O(G.horaInicio,R))}else if(C==="cuarzo"){const R=Math.max(0,Math.min(V,F.capacidadMaxima));F.cuarzo=R,F.total=F.cuarzo+F.llampo}else if(C==="llampo"){const R=Math.max(0,Math.min(V,F.capacidadMaxima));F.llampo=R,F.total=F.cuarzo+F.llampo}return F}return H});return{...G,molinos:U}})},ie=()=>{if(!x.clienteId)return _("Faltan Datos","Debe seleccionar un cliente para continuar.","warning"),!1;if(!x.mineral)return _("Faltan Datos","Debe seleccionar el tipo de mineral.","warning"),!1;if(x.mineral==="OXIDO"){if(!x.tiempos.oxido.hora40&&!x.tiempos.oxido.hora00)return _("Tiempo no seleccionado","Debe seleccionar al menos un tiempo para xido (1:40 o 1:00).","warning"),!1}else if(x.mineral==="SULFURO"&&!x.tiempos.sulfuro.hora00&&!x.tiempos.sulfuro.hora30)return _("Tiempo no seleccionado","Debe seleccionar al menos un tiempo para Sulfuro (2:00 o 2:30).","warning"),!1;const w=x.molinos.filter(G=>G.activo);if(w.length===0)return _("Sin Molinos","Debe seleccionar al menos un molino para procesar.","warning"),!1;if(w.filter(G=>G.total>0).length===0)return _("Molinos Vacos","Debe ingresar la cantidad de sacos en los molinos seleccionados.","warning"),!1;if(x.stockRestanteTotal<0)return _("Stock Insuficiente","La cantidad total de sacos excede el stock disponible del cliente.","danger"),!1;if(x.stockRestanteCuarzo<0)return _("Falta Cuarzo","No hay suficiente stock de mineral Cuarzo para cubrir la demanda.","danger"),!1;if(x.stockRestanteLlampo<0)return _("Falta Llampo","No hay suficiente stock de mineral Llampo para cubrir la demanda.","danger"),!1;const V=w.filter(G=>!G.disponible).map(G=>G.nombre);return V.length>0?(_("Molinos Ocupados",`Los siguientes molinos no estn disponibles: ${V.join(", ")}`,"warning"),!1):!0},fe=()=>{const w=new Date,C=w.getDate().toString().padStart(2,"0"),V=(w.getMonth()+1).toString().padStart(2,"0"),G=w.getFullYear();return`MOL-${C}${V}${G}-1`},_e=async()=>{if(!ie())return;const w=new Date;fe();const C=w.toTimeString().slice(0,5),V=$(),G=O(C,V),U=x.molinos.filter(F=>F.activo);if(await d({clientId:x.clienteId,mineralType:x.mineral,totalSacos:x.totalSacos,totalCuarzo:x.totalCuarzo,totalLlampo:x.totalLlampo,mills:U.map(F=>({id:F.id,cuarzo:F.cuarzo,llampo:F.llampo,total:F.total})),observations:x.observaciones})){const F=U.map(R=>` ${R.nombre}: ${R.total} sacos`).join(`
`);S({isOpen:!0,title:"Proceso Iniciado!",message:`La molienda ha comenzado correctamente.

Hora inicio: ${C}
Hora fin estimada: ${G}

DETALLE:
${F}`,type:"info",onConfirm:()=>{S(R=>({...R,isOpen:!1})),De()},showCancel:!1,confirmText:"Aceptar",cancelText:""})}else _("Error","Hubo un error al registrar la molienda. Intntelo de nuevo.","danger")},De=()=>{j(w=>({...w,clienteId:"",clienteNombre:"",stockTotal:0,stockCuarzo:0,stockLlampo:0,totalSacos:0,totalCuarzo:0,totalLlampo:0,stockRestanteTotal:0,stockRestanteCuarzo:0,stockRestanteLlampo:0,molinos:w.molinos.map(C=>({...C,activo:!1,total:0,cuarzo:0,llampo:0,tiempoEstimado:0})),observaciones:"",procesoIniciado:!1}))},we=()=>{if(!x.clienteId||x.totalSacos===0){_("Molienda Vaca","Complete los datos de la molienda antes de enviar el reporte.","warning");return}let w=` *DETALLE DE MOLIENDA*

`;if(w+=`*Cliente:* ${x.clienteNombre}
`,w+=`*Tipo Cliente:* ${Bs.find(H=>H.value===x.tipoCliente)?.label}
`,w+=`*Mineral:* ${Yr.find(H=>H.value===x.mineral)?.label}
`,w+="*Tiempo por molino:* ",x.mineral==="OXIDO"){const H=[];x.tiempos.oxido.hora40&&H.push("1:40"),x.tiempos.oxido.hora00&&H.push("1:00"),w+=H.join(" | ")}else if(x.mineral==="SULFURO"){const H=[];x.tiempos.sulfuro.hora00&&H.push("2:00"),x.tiempos.sulfuro.hora30&&H.push("2:30"),w+=H.join(" | ")}w+=`
`,w+=`
*DETALLE POR MOLINO:*
`,x.molinos.forEach((H,F)=>{if(H.activo&&H.total>0){const R=Math.floor(H.tiempoEstimado/60),D=H.tiempoEstimado%60;w+=`
${F+1}. ${H.nombre}:
`,w+=`    Total: ${H.total} sacos
`,w+=`    Cuarzo: ${H.cuarzo} sacos
`,w+=`    Llampo: ${H.llampo} sacos
`,w+=`    Tiempo: ${R}h ${D}min
`,w+=`    Hora fin: ${H.horaFin||"--:--"}
`}}),w+=`
*TOTALES:*
`,w+=` Total sacos: ${x.totalSacos}
`,w+=` Cuarzo: ${x.totalCuarzo} sacos
`,w+=` Llampo: ${x.totalLlampo} sacos
`,w+=` Molinos activos: ${x.molinos.filter(H=>H.activo).length}
`;const C=Math.floor(x.tiempoPorMolino/60),V=x.tiempoPorMolino%60;w+=` Tiempo por molino: ${C}h ${V}min
`,x.horaInicio&&x.horaFin&&(w+=` Horario: ${x.horaInicio} - ${x.horaFin}
`),w+=`
*STOCK:*
`,w+=` Stock inicial: ${x.stockTotal} sacos
`,w+=` A procesar: ${x.totalSacos} sacos
`,w+=` Stock restante: ${x.stockRestanteTotal} sacos

`,w+=`*Observaciones:* ${x.observaciones||"Ninguna"}

`,w+=` *Vista Previa* - ${new Date().toLocaleString()}
`;const U=`https://wa.me/?text=${encodeURIComponent(w)}`;window.open(U,"_blank")},Ee=()=>{if(x.totalSacos===0){_("Sin Datos","No hay datos de molienda para generar comprobante.","warning");return}m(!0)},he=()=>{`${x.procesoId||"PENDIENTE"}${x.fechaInicio||new Date().toLocaleDateString()}${x.estado}${x.clienteNombre}${Bs.find(C=>C.value===x.tipoCliente)?.label||"-"}${Yr.find(C=>C.value===x.mineral)?.label||"-"}`,x.mineral==="OXIDO"?(x.tiempos.oxido.hora40,x.tiempos.oxido.hora00):(x.tiempos.sulfuro.hora00,x.tiempos.sulfuro.hora30),`${M(x.tiempoPorMolino)}${x.horaInicio||"--:--"}${x.horaFin||"--:--"}${x.molinos.filter(C=>C.activo).map((C,V)=>`${V+1}. ${C.nombre}:
   - Total: ${C.total} sacos (C:${C.cuarzo} L:${C.llampo})
   - Tiempo: ${M(C.tiempoEstimado)}
   - Hora fin: ${C.horaFin||"--:--"}
`).join(`
`)}${x.totalSacos}${x.totalCuarzo}${x.totalLlampo}${x.molinos.filter(C=>C.activo).length}${M(x.tiempoPorMolino)}${x.stockTotal}${x.totalSacos}${x.stockRestanteTotal}${x.observaciones||"Ninguna observacin registrada."}${p||"___________________"}${y||"___________________"}${i?.email}${x.clienteNombre}${new Date().toLocaleDateString()}${new Date().toLocaleTimeString()}`;const w=window.open("","_blank");w&&(w.document.write(`
        <html>
          <head>
            <title>Comprobante de Molienda ${x.procesoId}</title>
            <style>
              @import url('https://fonts.googleapis.com/css2?family=Courier+New&display=swap');
              body { 
                font-family: 'Courier New', monospace; 
                margin: 0; 
                padding: 20px;
                font-size: 12px;
                line-height: 1.4;
                text-align: center;
              }
              .comprobante { 
                max-width: 800px; 
                margin: 0 auto;
                border: 1px solid #000;
                padding: 20px;
              }
              .header { 
                text-align: center; 
                margin-bottom: 20px;
                border-bottom: 2px solid #000;
                padding-bottom: 10px;
              }
              .section { 
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid #ccc;
                text-align: left;
              }
              .section-title {
                font-weight: bold;
                text-align: center;
                padding: 5px;
                margin-bottom: 8px;
                background: #f0f0f0;
              }
              .center-title {
                text-align: center;
                font-weight: bold;
                margin: 10px 0;
              }
              .firmas {
                display: flex;
                justify-content: space-between;
                margin-top: 40px;
                padding-top: 20px;
                border-top: 2px solid #000;
              }
              .firma {
                width: 45%;
                text-align: center;
              }
              .firma-line {
                border-top: 1px solid #000;
                margin-top: 60px;
                padding-top: 5px;
              }
              .nota {
                font-size: 10px;
                text-align: center;
                margin-top: 20px;
                color: #666;
              }
              .molino-detalle {
                font-size: 11px;
                margin-left: 20px;
              }
              @media print {
                body { margin: 0; padding: 0; }
                button { display: none; }
                .comprobante { border: none; }
              }
            </style>
          </head>
          <body>
            <div class="comprobante">
              <div class="header">
                <h2>PLANTA DE PROCESAMIENTO DE MINERALES</h2>
                <h3>COMPROBANTE DE MOLIENDA</h3>
                <h4>EN PROCESO</h4>
              </div>
              
              <div class="center-title">
                <p>N: ${x.procesoId}</p>
                <p>Fecha: ${x.fechaInicio}</p>
                <p>Estado: ${x.estado}</p>
              </div>
              
              <div class="section">
                <div class="section-title">INFORMACIN DEL CLIENTE</div>
                <p style="text-align: center;"><strong>Cliente:</strong> ${x.clienteNombre}</p>
                <p style="text-align: center;"><strong>Tipo:</strong> ${Bs.find(C=>C.value===x.tipoCliente)?.label}</p>
                <p style="text-align: center;"><strong>Mineral:</strong> ${Yr.find(C=>C.value===x.mineral)?.label}</p>
              </div>
              
              <div class="section">
                <div class="section-title">TIEMPO DE PROCESO</div>
                <p style="text-align: center;">
                  ${x.mineral==="OXIDO"?`xido: ${x.tiempos.oxido.hora40?" 1:40":" 1:40"} | ${x.tiempos.oxido.hora00?" 1:00":" 1:00"}`:`Sulfuro: ${x.tiempos.sulfuro.hora00?" 2:00":" 2:00"} | ${x.tiempos.sulfuro.hora30?" 2:30":" 2:30"}`}
                </p>
                <p style="text-align: center;"><strong>Tiempo por molino:</strong> ${M(x.tiempoPorMolino)}</p>
              </div>
              
              <div class="section">
                <div class="section-title">HORARIO ESTIMADO</div>
                <p style="text-align: center;"><strong>Hora inicio:</strong> ${x.horaInicio}</p>
                <p style="text-align: center;"><strong>Hora fin:</strong> ${x.horaFin}</p>
                <p style="text-align: center; font-size: 10px; color: #666;">
                  (Todos los molinos terminan a la misma hora)
                </p>
              </div>
              
              <div class="section">
                <div class="section-title">DETALLE POR MOLINO</div>
                <div class="molino-detalle">
                  ${x.molinos.filter(C=>C.activo).map((C,V)=>`<p>${V+1}. ${C.nombre}:</p>
                     <p style="margin-left: 20px;">- Total: ${C.total} sacos (C:${C.cuarzo} L:${C.llampo})</p>
                     <p style="margin-left: 20px;">- Tiempo: ${M(C.tiempoEstimado)}</p>
                     <p style="margin-left: 20px;">- Hora fin: ${C.horaFin||"--:--"}</p>`).join("")}
                </div>
              </div>
              
              <div class="section">
                <div class="section-title">RESUMEN GENERAL</div>
                <p style="text-align: center;"><strong>Total sacos:</strong> ${x.totalSacos}</p>
                <p style="text-align: center;">- Cuarzo: ${x.totalCuarzo} sacos</p>
                <p style="text-align: center;">- Llampo: ${x.totalLlampo} sacos</p>
                <p style="text-align: center;"><strong>Molinos activos:</strong> ${x.molinos.filter(C=>C.activo).length}</p>
                <p style="text-align: center;"><strong>Tiempo por molino:</strong> ${M(x.tiempoPorMolino)}</p>
              </div>
              
              <div class="section">
                <div class="section-title">CONTROL DE STOCK</div>
                <p style="text-align: center;"><strong>Stock inicial:</strong> ${x.stockTotal} sacos</p>
                <p style="text-align: center;"><strong>A procesar:</strong> ${x.totalSacos} sacos</p>
                <p style="text-align: center;"><strong>Stock restante:</strong> ${x.stockRestanteTotal} sacos</p>
              </div>
              
              <div class="section">
                <div class="section-title">OBSERVACIONES</div>
                <p style="text-align: center;">${x.observaciones||"Ninguna observacin registrada."}</p>
              </div>
              
              <div class="firmas">
                <div class="firma">
                  <p><strong>OPERADOR</strong></p>
                  <div class="firma-line"></div>
                  <p>${p||""}</p>
                  <p><small>Nombre: ${i?.email}</small></p>
                </div>
                
                <div class="firma">
                  <p><strong>CLIENTE</strong></p>
                  <div class="firma-line"></div>
                  <p>${y||""}</p>
                  <p><small>Nombre: ${x.clienteNombre}</small></p>
                </div>
              </div>
              
              <div class="nota">
                <p>Fecha de emisin: ${new Date().toLocaleDateString()}</p>
                <p>Hora de emisin: ${new Date().toLocaleTimeString()}</p>
                <p><em>Este documento certifica el inicio del proceso de molienda. Todos los molinos activos terminan a la misma hora.</em></p>
              </div>
            </div>
          </body>
        </html>
      `),w.document.close(),w.print()),m(!1)};return s.jsxs("div",{className:"space-y-6 pb-20",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Nueva Molienda"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Registro de proceso de molienda"})]}),s.jsxs("div",{className:"flex space-x-3 mt-4 md:mt-0",children:[s.jsxs("button",{onClick:Ee,className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors shadow-sm",children:[s.jsx(Ra,{size:18,strokeWidth:1.5,className:"mr-2"}),"Imprimir Comprobante"]}),s.jsxs("button",{onClick:we,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors shadow-sm",children:[s.jsx(Zr,{size:18,strokeWidth:1.5,className:"mr-2"}),"Enviar WhatsApp"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-6 flex items-center",children:[s.jsx(Hs,{size:20,strokeWidth:1.5,className:"mr-2 text-indigo-600"}),"Informacin del Cliente"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6",children:[s.jsxs("div",{className:"lg:col-span-5",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cliente"}),s.jsxs("select",{value:x.clienteId,onChange:w=>J(w.target.value),className:"input-field",disabled:x.procesoIniciado,children:[s.jsxs("option",{value:"",children:["Seleccione Cliente (",Hn.filter(w=>w.stock>0).length," con stock)"]}),Hn.filter(w=>w.stock>0).map(w=>s.jsx("option",{value:w.id,children:w.nombre},w.id))]})]}),s.jsxs("div",{className:"lg:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fecha"}),s.jsx("input",{type:"date",value:x.fechaInicio||new Date().toISOString().slice(0,10),onChange:w=>j({...x,fechaInicio:w.target.value}),className:"input-field",disabled:x.procesoIniciado})]}),s.jsxs("div",{className:"lg:col-span-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Stock Disponible"}),x.clienteId?s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 bg-indigo-50 border border-indigo-100 rounded-xl p-2.5 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-xs font-semibold text-indigo-700 uppercase",children:"Cuarzo"}),s.jsx("span",{className:"text-lg font-bold text-indigo-900",children:x.stockCuarzo})]}),s.jsxs("div",{className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl p-2.5 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-600 uppercase",children:"Llampo"}),s.jsx("span",{className:"text-lg font-bold text-slate-800",children:x.stockLlampo})]})]}):s.jsx("div",{className:"h-[52px] border border-dashed border-slate-300 rounded-xl flex items-center justify-center text-slate-400 text-sm",children:"Seleccione un cliente"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center",children:[s.jsx(Er,{size:20,strokeWidth:1.5,className:"mr-2 text-indigo-600"}),"Configuracin de Proceso"]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[s.jsxs("div",{className:"w-full md:w-1/3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Mineral"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Yr.map(w=>s.jsx("button",{onClick:()=>j({...x,mineral:w.value}),disabled:x.procesoIniciado,className:`
                      py-2 px-3 rounded-lg border text-sm font-bold transition-all
                      ${x.mineral===w.value?"border-indigo-600 bg-indigo-600 text-white shadow-md":"border-slate-200 text-slate-600 hover:bg-slate-50"}
                    `,children:w.label},w.value))})]}),x.mineral&&s.jsxs("div",{className:"w-full md:w-2/3 animate-fadeIn",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tiempo de Molienda"}),s.jsx("div",{className:"flex flex-wrap gap-4",children:x.mineral==="OXIDO"?s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer bg-slate-50 px-4 py-2 rounded-lg border border-slate-200 hover:border-indigo-300 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:x.tiempos.oxido.hora40,onChange:w=>se("OXIDO","hora40",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded"}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["1h 40m ",s.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"(Estndar)"})]})]}),s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer bg-slate-50 px-4 py-2 rounded-lg border border-slate-200 hover:border-indigo-300 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:x.tiempos.oxido.hora00,onChange:w=>se("OXIDO","hora00",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded"}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["1h 00m ",s.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"(Reducido)"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer bg-slate-50 px-4 py-2 rounded-lg border border-slate-200 hover:border-indigo-300 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:x.tiempos.sulfuro.hora00,onChange:w=>se("SULFURO","hora00",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded"}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["2h 00m ",s.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"(Reducido)"})]})]}),s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer bg-slate-50 px-4 py-2 rounded-lg border border-slate-200 hover:border-indigo-300 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:x.tiempos.sulfuro.hora30,onChange:w=>se("SULFURO","hora30",w.target.checked),className:"w-4 h-4 text-indigo-600 rounded"}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["2h 30m ",s.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"(Estndar)"})]})]})]})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 flex items-center",children:[s.jsx(es,{size:20,strokeWidth:1.5,className:"mr-2 text-indigo-600"}),"Distribucin en Molinos"]}),s.jsxs("div",{className:"bg-slate-100 text-slate-600 px-3 py-1 rounded-lg text-sm font-medium",children:["Total: ",s.jsx("span",{className:"text-indigo-700 font-bold",children:x.totalSacos})," sacos"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:x.molinos.map(w=>s.jsxs("div",{className:`
                border rounded-xl p-4 transition-all duration-200 relative
                ${w.disponible?w.activo?"bg-white border-indigo-500 ring-2 ring-indigo-500/20 shadow-md":"bg-white border-slate-200 hover:border-indigo-300":"bg-slate-50 border-slate-200 opacity-60"}
              `,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:w.activo,onChange:C=>Q(w.id,"activo",C.target.checked),disabled:!w.disponible||x.procesoIniciado,className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500 border-slate-300 mr-2 cursor-pointer"}),s.jsx("span",{className:`font-bold ${w.activo?"text-indigo-900":"text-slate-700"}`,children:w.nombre})]}),w.disponible?s.jsx("span",{className:"text-[10px] uppercase font-bold text-emerald-700 bg-emerald-100 px-1.5 py-0.5 rounded",children:"Libre"}):s.jsx("span",{className:"text-[10px] uppercase font-bold text-amber-700 bg-amber-100 px-1.5 py-0.5 rounded",children:"Ocupado"})]}),s.jsxs("div",{className:`space-y-3 ${w.activo?"opacity-100":"opacity-40 pointer-events-none"}`,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 w-14",children:"Cuarzo"}),s.jsx("input",{type:"number",min:"0",placeholder:"0",value:w.cuarzo||"",onChange:C=>Q(w.id,"cuarzo",parseInt(C.target.value)||0),className:"flex-1 text-sm border border-slate-300 rounded-lg px-2 py-1.5 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500 w-14",children:"Llampo"}),s.jsx("input",{type:"number",min:"0",placeholder:"0",value:w.llampo||"",onChange:C=>Q(w.id,"llampo",parseInt(C.target.value)||0),className:"flex-1 text-sm border border-slate-300 rounded-lg px-2 py-1.5 focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-100 flex justify-between items-center text-xs",children:[s.jsx("span",{className:"text-slate-500",children:"Total:"}),s.jsxs("span",{className:"font-bold text-slate-900",children:[w.total," sacos"]})]})]})]},w.id))}),s.jsxs("div",{className:"mt-6 flex flex-wrap gap-4",children:[s.jsxs("div",{className:"bg-indigo-50 px-4 py-2.5 rounded-xl border border-indigo-100 flex items-center",children:[s.jsx("span",{className:"text-sm text-indigo-700 font-medium",children:"Total a procesar: "}),s.jsxs("span",{className:"text-lg font-bold text-indigo-900 ml-2",children:[x.totalSacos," sacos"]})]}),s.jsxs("div",{className:"bg-slate-50 px-4 py-2.5 rounded-xl border border-slate-200 flex items-center",children:[s.jsx("span",{className:"text-sm text-slate-600 font-medium",children:"Stock restante: "}),s.jsxs("span",{className:`text-lg font-bold ml-2 ${x.stockRestanteTotal<0?"text-red-600":"text-emerald-600"}`,children:[x.stockRestanteTotal," sacos"]})]})]})]}),x.tiempoPorMolino>0&&x.molinos.some(w=>w.activo)&&s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-6 flex items-center",children:[s.jsx(Gr,{size:20,strokeWidth:1.5,className:"mr-2 text-indigo-600"}),"Estimacin de Proceso"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex items-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsx(Er,{size:24,strokeWidth:1.5,className:"text-slate-400 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Tiempo p/ Molino"}),s.jsx("p",{className:"text-xl font-bold text-slate-900",children:M(x.tiempoPorMolino)})]})]}),s.jsxs("div",{className:"flex items-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsx(Er,{size:24,strokeWidth:1.5,className:"text-indigo-500 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Hora Inicio"}),s.jsx("p",{className:"text-xl font-bold text-indigo-600",children:x.horaInicio||new Date().toLocaleTimeString().slice(0,5)})]})]}),s.jsxs("div",{className:"flex items-center p-4 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsx(He,{size:24,strokeWidth:1.5,className:"text-emerald-500 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Hora Fin Estimada"}),s.jsx("p",{className:"text-xl font-bold text-emerald-600",children:x.horaFin||(x.tiempoPorMolino>0?O(new Date().toLocaleTimeString().slice(0,5),x.tiempoPorMolino):"--:--")})]})]})]}),s.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-100 text-blue-800 text-sm rounded-lg flex items-center",children:[s.jsx(Gn,{size:16,strokeWidth:1.5,className:"mr-2 flex-shrink-0"}),s.jsx("span",{children:"Nota: Todos los molinos activos iniciarn y terminarn simultneamente."})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-6 flex items-center",children:[s.jsx(oi,{size:20,strokeWidth:1.5,className:"mr-2 text-indigo-600"}),"Observaciones"]}),s.jsx("div",{children:s.jsx("textarea",{value:x.observaciones,onChange:w=>j({...x,observaciones:w.target.value}),className:"input-field min-h-[100px]",placeholder:"Observaciones adicionales sobre la molienda...",disabled:x.procesoIniciado})})]}),s.jsx("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3",children:s.jsxs("button",{onClick:_e,disabled:!x.clienteId||x.totalSacos===0||x.procesoIniciado,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed text-lg font-semibold shadow-md hover:shadow-lg transition-all transform active:scale-[0.98]",children:[s.jsx(Oa,{size:20,strokeWidth:1.5,className:"mr-2"}),x.procesoIniciado?"Proceso Iniciado":"Registrar Molienda"]})}),h&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative bg-white border border-slate-200 w-full max-w-2xl shadow-xl rounded-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Completar Firmas para Imprimir"}),s.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx(Ht,{size:24,strokeWidth:1.5})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 p-4 rounded-xl flex items-start",children:[s.jsx(Gn,{size:20,className:"text-indigo-600 mr-3 mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-indigo-700",children:"Complete las firmas para generar el comprobante impreso."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Firma del Operador *"}),s.jsx("div",{className:"border border-slate-300 rounded-xl p-4 min-h-[100px] bg-slate-50 focus-within:ring-2 focus-within:ring-indigo-500/20 focus-within:border-indigo-500 transition-all",children:s.jsx("input",{type:"text",value:p,onChange:w=>v(w.target.value),className:"w-full h-full border-none bg-transparent focus:outline-none text-lg text-slate-900 placeholder:text-slate-400 font-handwriting",placeholder:"Nombre del operador"})}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Operador: ",i?.email]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Firma del Cliente *"}),s.jsx("div",{className:"border border-slate-300 rounded-xl p-4 min-h-[100px] bg-slate-50 focus-within:ring-2 focus-within:ring-indigo-500/20 focus-within:border-indigo-500 transition-all",children:s.jsx("input",{type:"text",value:y,onChange:w=>b(w.target.value),className:"w-full h-full border-none bg-transparent focus:outline-none text-lg text-slate-900 placeholder:text-slate-400",placeholder:"Nombre del cliente"})}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Cliente: ",x.clienteNombre]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-100",children:[s.jsx("button",{onClick:()=>m(!1),className:"px-5 py-2.5 border border-slate-200 rounded-xl text-slate-700 hover:bg-slate-50 font-medium transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:he,disabled:!p||!y,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 flex items-center disabled:opacity-50 font-medium shadow-sm transition-colors",children:[s.jsx(Ra,{size:18,strokeWidth:1.5,className:"mr-2"}),"Generar e Imprimir"]})]})]})]})}),s.jsx(Rf,{isOpen:k.isOpen,onClose:()=>S(w=>({...w,isOpen:!1})),onConfirm:k.onConfirm,title:k.title,message:k.message,confirmText:k.confirmText,cancelText:k.cancelText,showCancel:k.showCancel,type:k.type,icon:(k.type==="danger"||k.type==="warning","alert")}),s.jsxs("div",{className:"mt-8 bg-slate-900 rounded-2xl p-6 text-white shadow-lg",children:[s.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center",children:[s.jsx(es,{size:20,strokeWidth:1.5,className:"mr-2 text-indigo-400"}),"Procesos en Curso"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:x.molinos.filter(w=>!w.disponible).length===0?s.jsx("p",{className:"text-slate-400 italic",children:"No hay molinos ocupados."}):x.molinos.filter(w=>!w.disponible).map(w=>s.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[s.jsx("p",{className:"font-bold text-lg mb-1",children:w.nombre}),s.jsxs("div",{className:"text-sm text-slate-300",children:[s.jsxs("p",{className:"flex justify-between",children:[s.jsx("span",{children:"Cliente:"}),s.jsx("span",{className:"text-white font-medium",children:w.current_client||"Desconocido"})]}),s.jsxs("p",{className:"flex justify-between mt-1",children:[s.jsx("span",{children:"Carga:"}),s.jsx("span",{className:"text-white font-medium",children:w.current_sacks?`${w.current_sacks} sacos`:"-"})]}),s.jsxs("p",{className:"flex justify-between mt-1",children:[s.jsx("span",{children:"Estado:"}),s.jsx("span",{className:"text-amber-300 font-bold text-xs uppercase bg-amber-900/40 border border-amber-900/50 px-2 py-0.5 rounded-full",children:"EN PROCESO"})]})]})]},w.id))})]})]})},$y=()=>{const{user:i}=Qs(),[r,n]=L.useState(!1),[o,c]=L.useState(""),[d,h]=L.useState("all"),[m,p]=L.useState("all"),[v,y]=L.useState([]),[b,k]=L.useState(!1),[S,_]=L.useState(null),[x,j]=L.useState({fechaRecepcion:new Date().toISOString().slice(0,10),tipoCliente:"",clienteId:"",zona:"",mineral:"",cuarzo:0,llampo:0,total:0,clienteNombre:"",transportista:"",placaCamion:"",observaciones:""}),[O,M]=L.useState([{id:"1",fechaRecepcion:new Date("2024-01-15"),tipoCliente:"MINERO",clienteId:"1",clienteNombre:"Minera Andina SA",zona:"Norte",mineral:"OXIDO",cuarzo:300,llampo:200,total:500,transportista:"Transportes Per",placaCamion:"ABC-123",observaciones:"Entrega completa",fechaRegistro:new Date("2024-01-15")},{id:"2",fechaRecepcion:new Date("2024-01-16"),tipoCliente:"MINERO",clienteId:"2",clienteNombre:"Compaa Minerales del Sur",zona:"Sur",mineral:"SULFURO",cuarzo:200,llampo:120,total:320,transportista:"Logstica Minera",placaCamion:"DEF-456",observaciones:"Falta verificar",fechaRegistro:new Date("2024-01-16")},{id:"3",fechaRecepcion:new Date("2024-01-14"),tipoCliente:"PALLAQUERO",clienteId:"3",clienteNombre:"Juan Prez (Pallaquero)",zona:"Centro",mineral:"OXIDO",cuarzo:80,llampo:70,total:150,transportista:"Envos Rpidos",placaCamion:"GHI-789",observaciones:"",fechaRegistro:new Date("2024-01-14")}]),$=[{clienteId:"1",zonas:["Norte","Sur","Centro"]},{clienteId:"2",zonas:["Sur","Este"]},{clienteId:"3",zonas:["Centro","Oeste"]}],J=w=>{const C=$.find(V=>V.clienteId===w);return C?C.zonas:[]};L.useEffect(()=>{const w=(x.cuarzo||0)+(x.llampo||0);j(C=>({...C,total:w}))},[x.cuarzo,x.llampo]);const se=O.filter(w=>{const C=w.clienteNombre.toLowerCase().includes(o.toLowerCase())||(w.transportista?.toLowerCase()||"").includes(o.toLowerCase())||(w.placaCamion?.toLowerCase()||"").includes(o.toLowerCase())||(w.zona?.toLowerCase()||"").includes(o.toLowerCase()),V=d==="all"||w.tipoCliente===d,G=m==="all"||w.mineral===m;return C&&V&&G}),Q=O.reduce((w,C)=>w+(C.total||0),0),ie=O.reduce((w,C)=>w+(C.cuarzo||0),0),fe=O.reduce((w,C)=>w+(C.llampo||0),0),_e=()=>{j({fechaRecepcion:new Date().toISOString().slice(0,10),tipoCliente:"",clienteId:"",zona:"",mineral:"",cuarzo:0,llampo:0,total:0,clienteNombre:"",transportista:"",placaCamion:"",observaciones:""}),k(!1),_(null),n(!0)},De=w=>{j({fechaRecepcion:new Date(w.fechaRecepcion).toISOString().slice(0,10),tipoCliente:w.tipoCliente,clienteId:w.clienteId,zona:w.zona||"",mineral:w.mineral,cuarzo:w.cuarzo||0,llampo:w.llampo||0,total:w.total||0,clienteNombre:w.clienteNombre,transportista:w.transportista||"",placaCamion:w.placaCamion||"",observaciones:w.observaciones||""}),k(!0),_(w.id),n(!0)},we=()=>{if(!x.fechaRecepcion){alert("La fecha de recepcin es requerida");return}if(!x.tipoCliente){alert("El tipo de cliente es requerido");return}if(!x.clienteId){alert("Debe seleccionar un cliente");return}if(!x.mineral){alert("El tipo de mineral es requerido");return}if(x.cuarzo<0||x.llampo<0){alert("Las cantidades deben ser positivas");return}if(x.total<=0){alert("Debe ingresar al menos una cantidad de Cuarzo o Llampo");return}const w=Hn.find(C=>C.id===x.clienteId);if(b&&S)M(C=>C.map(V=>V.id===S?{...V,fechaRecepcion:new Date(x.fechaRecepcion),tipoCliente:x.tipoCliente,clienteId:x.clienteId,clienteNombre:w?.nombre||x.clienteNombre,zona:x.zona||void 0,mineral:x.mineral,cuarzo:x.cuarzo,llampo:x.llampo,total:x.total,transportista:x.transportista,placaCamion:x.placaCamion,observaciones:x.observaciones}:V));else{const C={id:Date.now().toString(),fechaRecepcion:new Date(x.fechaRecepcion),tipoCliente:x.tipoCliente,clienteId:x.clienteId,clienteNombre:w?.nombre||"",zona:x.zona||void 0,mineral:x.mineral,cuarzo:x.cuarzo||0,llampo:x.llampo||0,total:x.total||0,transportista:x.transportista,placaCamion:x.placaCamion,observaciones:x.observaciones,fechaRegistro:new Date};M(V=>[C,...V])}n(!1),alert(b?"Stock actualizado correctamente":"Nuevo ingreso registrado")},Ee=w=>{if(i?.role!=="admin"){alert("Solo el administrador puede eliminar registros");return}window.confirm("Est seguro de eliminar este registro?")&&M(C=>C.filter(V=>V.id!==w))},he=()=>{const C=[["Fecha Recepcin","Cliente","Tipo","Zona","Mineral","Cuarzo","Llampo","Total","Transportista","Placa","Observaciones"].join(","),...se.map(H=>[new Date(H.fechaRecepcion).toLocaleDateString(),H.clienteNombre,H.tipoCliente,H.zona||"",H.mineral,H.cuarzo||0,H.llampo||0,H.total||0,H.transportista||"",H.placaCamion||"",H.observaciones||""].join(","))].join(`
`),V=new Blob([C],{type:"text/csv"}),G=window.URL.createObjectURL(V),U=document.createElement("a");U.href=G,U.download=`stock_${new Date().toISOString().slice(0,10)}.csv`,U.click()};return s.jsxs("div",{className:"space-y-6 pb-20",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Gestin de Stock"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Control de ingresos y existencias"})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[s.jsxs("button",{onClick:he,className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors shadow-sm font-medium",children:[s.jsx(Ws,{size:18,strokeWidth:1.5,className:"mr-2"}),"Exportar Excel"]}),s.jsxs("button",{onClick:_e,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-sm font-medium",children:[s.jsx(Ef,{size:18,strokeWidth:1.5,className:"mr-2"}),"Nuevo Ingreso"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl mr-4 border border-indigo-100",children:s.jsx(Dt,{className:"text-indigo-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Stock Total"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:Q.toLocaleString()})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-amber-50 rounded-xl mr-4 border border-amber-100",children:s.jsx(Dt,{className:"text-amber-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Cuarzo"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:ie.toLocaleString()})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-slate-50 rounded-xl mr-4 border border-slate-100",children:s.jsx(Dt,{className:"text-slate-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Llampo"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:fe.toLocaleString()})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-violet-50 rounded-xl mr-4 border border-violet-100",children:s.jsx(Hs,{className:"text-violet-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Clientes Activos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:[...new Set(O.map(w=>w.clienteId))].length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18,strokeWidth:1.5}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, transportista...",value:o,onChange:w=>c(w.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all placeholder:text-slate-400"})]}),s.jsx("div",{children:s.jsxs("select",{value:d,onChange:w=>h(w.target.value),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",children:[s.jsx("option",{value:"all",children:"Todos los tipos"}),Bs.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))]})}),s.jsx("div",{children:s.jsxs("select",{value:m,onChange:w=>p(w.target.value),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",children:[s.jsx("option",{value:"all",children:"Todos los minerales"}),Yr.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))]})}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("button",{onClick:()=>{c(""),h("all"),p("all")},className:"flex items-center px-4 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-colors",children:[s.jsx(Cf,{size:18,className:"mr-2",strokeWidth:1.5}),"Limpiar"]})})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:s.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",onChange:w=>{w.target.checked?y(se.map(C=>C.id)):y([])}})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Fecha Recepcin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Zona"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Mineral"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Cuarzo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Llampo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Transportista"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:se.map(w=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:v.includes(w.id),onChange:C=>{C.target.checked?y([...v,w.id]):y(v.filter(V=>V!==w.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 font-medium",children:new Date(w.fechaRecepcion).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-900",children:w.clienteNombre}),s.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:Bs.find(C=>C.value===w.tipoCliente)?.label})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2.5 py-0.5 text-xs font-semibold rounded-full border ${w.zona?"bg-indigo-50 text-indigo-700 border-indigo-100":"bg-slate-100 text-slate-600 border-slate-200"}`,children:w.zona||"Sin zona"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2.5 py-0.5 text-xs font-semibold rounded-full border ${w.mineral==="OXIDO"?"bg-amber-50 text-amber-700 border-amber-100":"bg-slate-100 text-slate-700 border-slate-200"}`,children:Yr.find(C=>C.value===w.mineral)?.label})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 font-medium",children:(w.cuarzo||0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 font-medium",children:(w.llampo||0).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-bold text-slate-900",children:(w.total||0).toLocaleString()})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-slate-900 font-medium",children:w.transportista||"-"}),w.placaCamion&&s.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:w.placaCamion})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>De(w),className:"p-1 text-slate-400 hover:text-indigo-600 transition-colors rounded-lg hover:bg-indigo-50",title:"Editar",children:s.jsx(Qn,{size:18,strokeWidth:1.5})}),s.jsx("button",{onClick:()=>Ee(w.id),className:"p-1 text-slate-400 hover:text-rose-600 transition-colors rounded-lg hover:bg-rose-50",title:i?.role==="admin"?"Eliminar":"Solo admin puede eliminar",disabled:i?.role!=="admin",children:s.jsx(Vs,{size:18,strokeWidth:1.5})})]})})]},w.id))})]})}),se.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Dt,{className:"mx-auto h-12 w-12 text-slate-300",strokeWidth:1.5}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-slate-900",children:"No hay registros"}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:o||d!=="all"||m!=="all"?"Intenta con otros filtros":"Comienza agregando un nuevo ingreso"})]})]}),r&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative bg-white border border-slate-200 w-full max-w-2xl shadow-xl rounded-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:b?"Editar Registro de Stock":"Nuevo Ingreso de Stock"}),s.jsxs("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:[s.jsx(He,{size:24,className:"rotate-45",strokeWidth:1.5})," ",s.jsx("span",{className:"text-2xl leading-none",children:""})]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fecha Recepcin *"}),s.jsx("input",{type:"date",value:x.fechaRecepcion,onChange:w=>j({...x,fechaRecepcion:w.target.value}),max:new Date().toISOString().slice(0,10),className:"input-field",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo Cliente *"}),s.jsxs("select",{value:x.tipoCliente,onChange:w=>{j({...x,tipoCliente:w.target.value}),x.clienteId&&Hn.find(V=>V.id===x.clienteId)?.tipo!==w.target.value&&j({...x,tipoCliente:w.target.value,clienteId:""})},className:"input-field",required:!0,children:[s.jsx("option",{value:"",children:"Seleccionar"}),Bs.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cliente *"}),s.jsxs("select",{value:x.clienteId,onChange:w=>{j({...x,clienteId:w.target.value}),x.zona&&j(C=>({...C,zona:""}))},className:"input-field",required:!0,disabled:!x.tipoCliente,children:[s.jsx("option",{value:"",children:"Seleccionar cliente"}),Hn.filter(w=>!x.tipoCliente||w.tipo===x.tipoCliente).map(w=>s.jsxs("option",{value:w.id,children:[w.nombre," (",w.stock," sacos)"]},w.id)),x.tipoCliente&&s.jsx("option",{value:"new",children:"+ Crear nuevo cliente"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Zona (opcional)"}),s.jsxs("select",{value:x.zona||"",onChange:w=>j({...x,zona:w.target.value}),className:"input-field",disabled:!x.clienteId||x.clienteId==="new",children:[s.jsx("option",{value:"",children:"Seleccionar zona"}),x.clienteId&&x.clienteId!=="new"&&s.jsxs(s.Fragment,{children:[J(x.clienteId).map((w,C)=>s.jsx("option",{value:w,children:w},C)),s.jsx("option",{value:"new_zone",children:"+ Agregar nueva zona"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mineral *"}),s.jsxs("select",{value:x.mineral,onChange:w=>j({...x,mineral:w.target.value}),className:"input-field",required:!0,children:[s.jsx("option",{value:"",children:"Seleccionar"}),Yr.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cuarzo (sacos) *"}),s.jsx("input",{type:"number",min:"0",step:"1",value:x.cuarzo||"",onChange:w=>j({...x,cuarzo:parseInt(w.target.value)||0}),className:"input-field text-center font-bold text-amber-600",placeholder:"0",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Llampo (sacos) *"}),s.jsx("input",{type:"number",min:"0",step:"1",value:x.llampo||"",onChange:w=>j({...x,llampo:parseInt(w.target.value)||0}),className:"input-field text-center font-bold text-slate-700",placeholder:"0",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Total (automtico)"}),s.jsxs("div",{className:"px-4 py-2.5 bg-slate-100 border border-slate-200 rounded-xl flex items-center justify-between",children:[s.jsx("span",{className:"text-lg font-bold text-slate-900",children:(x.total||0).toLocaleString()}),s.jsx(Dt,{className:"text-slate-400",size:20,strokeWidth:1.5})]}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Cuarzo: ",x.cuarzo||0," + Llampo: ",x.llampo||0]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Transportista"}),s.jsx("input",{type:"text",value:x.transportista,onChange:w=>j({...x,transportista:w.target.value}),className:"input-field",placeholder:"Nombre del transportista"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Placa Camin (opcional)"}),s.jsx("input",{type:"text",value:x.placaCamion,onChange:w=>j({...x,placaCamion:w.target.value}),className:"input-field",placeholder:"ABC-123"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observaciones"}),s.jsx("textarea",{value:x.observaciones,onChange:w=>j({...x,observaciones:w.target.value}),className:"input-field min-h-[100px]",placeholder:"Observaciones adicionales..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-slate-100",children:[s.jsx("button",{onClick:()=>n(!1),className:"px-5 py-2.5 border border-slate-200 rounded-xl text-slate-700 hover:bg-slate-50 font-medium transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:we,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 flex items-center shadow-md hover:shadow-lg transition-all transform active:scale-[0.98] font-medium",children:b?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{size:18,className:"mr-2",strokeWidth:1.5}),"Actualizar"]}):s.jsxs(s.Fragment,{children:[s.jsx(He,{size:18,className:"mr-2",strokeWidth:1.5}),"Guardar Ingreso"]})})]})]})]})})]})},Dy=()=>{const[i,r]=L.useState("month"),[n,o]=L.useState("general"),c=[{month:"Ene",sacos:420,clientes:8},{month:"Feb",sacos:380,clientes:7},{month:"Mar",sacos:450,clientes:9},{month:"Abr",sacos:520,clientes:10},{month:"May",sacos:480,clientes:9},{month:"Jun",sacos:600,clientes:12}],d=[{name:"Molino I",value:1250,color:"bg-blue-500"},{name:"Molino II",value:980,color:"bg-green-500"},{name:"Molino III",value:890,color:"bg-orange-500"},{name:"Molino IV",value:1100,color:"bg-purple-500"}],h=[{name:"xido",value:65,color:"bg-blue-500"},{name:"Sulfuro",value:35,color:"bg-yellow-500"}],m=[{name:"Minera Andina SA",sacos:1250,change:"+12%"},{name:"Compaa Minerales",sacos:980,change:"+8%"},{name:"Empresa Extractora",sacos:890,change:"+15%"},{name:"Minerales del Sur",sacos:850,change:"-5%"},{name:"Sociedad Minera",sacos:750,change:"+20%"}],p=Math.max(...c.map(O=>O.sacos)),v=Math.max(...d.map(O=>O.value)),y=()=>{console.log("Exportando a Excel..."),alert("Funcionalidad de exportar a Excel activada")},b=()=>{console.log("Enviando por WhatsApp..."),alert("Funcionalidad de WhatsApp activada")},k=()=>{console.log("Imprimiendo reporte..."),window.print()},S=()=>{console.log("Generando PDF..."),alert("Funcionalidad de generar PDF activada")},_=()=>{console.log("Aplicando filtros..."),alert("Filtros aplicados")},x=()=>{console.log("Limpiando filtros..."),r("month"),o("general"),alert("Filtros limpiados")},j=()=>{console.log("Enviando reportes masivos..."),alert("Envo masivo de reportes activado")};return s.jsxs("div",{className:"space-y-6 pb-20",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Reportes Analticos"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Estadsticas y anlisis de produccin"})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-wrap gap-3",children:[s.jsxs("button",{className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-sm font-medium whitespace-nowrap",onClick:y,children:[s.jsx(Ws,{size:18,strokeWidth:1.5,className:"mr-2"}),"Exportar Excel"]}),s.jsxs("button",{className:"flex items-center px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl hover:bg-slate-50 transition-colors shadow-sm font-medium whitespace-nowrap",onClick:b,children:[s.jsx(Zr,{size:18,strokeWidth:1.5,className:"mr-2"}),"Enviar WhatsApp"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Perodo"}),s.jsxs("div",{className:"relative",children:[s.jsx(za,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18,strokeWidth:1.5}),s.jsxs("select",{value:i,onChange:O=>r(O.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all cursor-pointer",children:[s.jsx("option",{value:"week",children:"ltima semana"}),s.jsx("option",{value:"month",children:"Este mes"}),s.jsx("option",{value:"quarter",children:"Este trimestre"}),s.jsx("option",{value:"year",children:"Este ao"}),s.jsx("option",{value:"custom",children:"Personalizado"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Tipo de Reporte"}),s.jsxs("select",{value:n,onChange:O=>o(O.target.value),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all cursor-pointer",children:[s.jsx("option",{value:"general",children:"General"}),s.jsx("option",{value:"production",children:"Produccin"}),s.jsx("option",{value:"clients",children:"Clientes"}),s.jsx("option",{value:"maintenance",children:"Mantenimiento"}),s.jsx("option",{value:"efficiency",children:"Eficiencia"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Molino"}),s.jsxs("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all cursor-pointer",children:[s.jsx("option",{value:"all",children:"Todos los molinos"}),s.jsx("option",{value:"1",children:"Molino I"}),s.jsx("option",{value:"2",children:"Molino II"}),s.jsx("option",{value:"3",children:"Molino III"}),s.jsx("option",{value:"4",children:"Molino IV"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Mineral"}),s.jsxs("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all cursor-pointer",children:[s.jsx("option",{value:"all",children:"Todos"}),s.jsx("option",{value:"OXIDO",children:"xido"}),s.jsx("option",{value:"SULFURO",children:"Sulfuro"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-6 pt-4 border-t border-slate-100",children:[s.jsxs("button",{className:"px-4 py-2 bg-indigo-50 text-indigo-700 hover:bg-indigo-100 rounded-xl text-sm font-medium flex items-center whitespace-nowrap transition-colors",onClick:_,children:[s.jsx(Ta,{size:16,strokeWidth:1.5,className:"inline mr-2"}),"Aplicar filtros"]}),s.jsx("button",{className:"px-4 py-2 bg-slate-100 text-slate-700 hover:bg-slate-200 rounded-xl text-sm font-medium whitespace-nowrap transition-colors",onClick:x,children:"Limpiar filtros"}),s.jsx("div",{className:"flex-grow"}),s.jsxs("button",{className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 rounded-xl text-sm font-medium flex items-center whitespace-nowrap transition-colors shadow-sm",onClick:k,children:[s.jsx(Ra,{size:16,strokeWidth:1.5,className:"inline mr-2"}),"Imprimir"]}),s.jsxs("button",{className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 rounded-xl text-sm font-medium flex items-center whitespace-nowrap transition-colors shadow-sm",onClick:S,children:[s.jsx(oi,{size:16,strokeWidth:1.5,className:"inline mr-2"}),"Generar PDF"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Sacos Procesados"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:"4,220"}),s.jsxs("div",{className:"flex flex-wrap items-center mt-2 text-xs font-medium",children:[s.jsxs("span",{className:"flex items-center text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full border border-emerald-100",children:[s.jsx(Gr,{size:14,strokeWidth:1.5,className:"mr-1"}),"+12%"]}),s.jsx("span",{className:"text-slate-400 ml-2 whitespace-nowrap",children:"vs mes anterior"})]})]}),s.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl border border-indigo-100",children:s.jsx(ec,{className:"text-indigo-600",size:24,strokeWidth:1.5})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Clientes Activos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:"12"}),s.jsxs("div",{className:"flex flex-wrap items-center mt-2 text-xs font-medium",children:[s.jsxs("span",{className:"flex items-center text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full border border-emerald-100",children:[s.jsx(Gr,{size:14,strokeWidth:1.5,className:"mr-1"}),"+2"]}),s.jsx("span",{className:"text-slate-400 ml-2 whitespace-nowrap",children:"nuevos este mes"})]})]}),s.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl border border-emerald-100",children:s.jsx(Ml,{className:"text-emerald-600",size:24,strokeWidth:1.5})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Eficiencia"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:"94%"}),s.jsxs("div",{className:"flex flex-wrap items-center mt-2 text-xs font-medium",children:[s.jsxs("span",{className:"flex items-center text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full border border-emerald-100",children:[s.jsx(Gr,{size:14,strokeWidth:1.5,className:"mr-1"}),"+3%"]}),s.jsx("span",{className:"text-slate-400 ml-2 whitespace-nowrap",children:"mejora"})]})]}),s.jsx("div",{className:"p-3 bg-amber-50 rounded-xl border border-amber-100",children:s.jsx(Gr,{className:"text-amber-600",size:24,strokeWidth:1.5})})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tiempo Promedio"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-2",children:"2.1h"}),s.jsxs("div",{className:"flex flex-wrap items-center mt-2 text-xs font-medium",children:[s.jsxs("span",{className:"flex items-center text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full border border-emerald-100",children:[s.jsx(Mh,{size:14,strokeWidth:1.5,className:"mr-1"}),"-0.3h"]}),s.jsx("span",{className:"text-slate-400 ml-2 whitespace-nowrap",children:"optimizacin"})]})]}),s.jsx("div",{className:"p-3 bg-violet-50 rounded-xl border border-violet-100",children:s.jsx(Ml,{className:"text-violet-600",size:24,strokeWidth:1.5})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Produccin Mensual"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Sacos procesados por mes"})]}),s.jsx("div",{className:"p-2 bg-slate-50 rounded-lg",children:s.jsx(ec,{className:"text-indigo-600",size:20,strokeWidth:1.5})})]}),s.jsx("div",{className:"space-y-4",children:c.map((O,M)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-16 min-w-[4rem]",children:s.jsx("span",{className:"text-sm font-medium text-slate-700",children:O.month})}),s.jsx("div",{className:"flex-1 ml-4",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500 mb-1.5",children:[s.jsxs("span",{children:[O.sacos.toLocaleString()," sacos"]}),s.jsxs("span",{children:[O.clientes," clientes"]})]}),s.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full transition-all duration-500 hover:bg-indigo-500",style:{width:`${O.sacos/p*100}%`}})})]})})]},M))})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Produccin por Molino"}),s.jsx("p",{className:"text-slate-500 text-sm",children:"Distribucin total"})]}),s.jsx("div",{className:"p-2 bg-slate-50 rounded-lg",children:s.jsx(Ml,{className:"text-indigo-600",size:20,strokeWidth:1.5})})]}),s.jsx("div",{className:"space-y-4",children:d.map((O,M)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-24 min-w-[6rem]",children:s.jsx("span",{className:"text-sm font-medium text-slate-700",children:O.name})}),s.jsx("div",{className:"flex-1 ml-4",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-500 mb-1.5",children:[s.jsxs("span",{children:[O.value.toLocaleString()," sacos"]}),s.jsxs("span",{children:[(O.value/v*100).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full ${O.color} transition-all duration-500 opacity-90 hover:opacity-100`,style:{width:`${O.value/v*100}%`}})})]})})]},M))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Distribucin por Mineral"}),s.jsx("div",{className:"space-y-5",children:h.map((O,M)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${O.color} mr-3 ring-2 ring-white ring-offset-1`}),s.jsx("span",{className:"text-slate-700 font-medium",children:O.name})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("span",{className:"font-bold text-slate-900",children:[O.value,"%"]}),s.jsx("div",{className:"w-20 md:w-24 h-2 bg-slate-100 rounded-full ml-3 overflow-hidden",children:s.jsx("div",{className:`h-2 rounded-full ${O.color}`,style:{width:`${O.value}%`}})})]})]},M))})]}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm lg:col-span-2",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Top 5 Clientes"}),s.jsx("div",{className:"space-y-3",children:m.map((O,M)=>s.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-100",children:[s.jsxs("div",{className:"flex items-center min-w-0",children:[s.jsx("div",{className:`
                    w-10 h-10 rounded-lg flex items-center justify-center mr-4 flex-shrink-0 font-bold text-sm border
                    ${M===0?"bg-amber-50 text-amber-700 border-amber-100":M===1?"bg-slate-100 text-slate-600 border-slate-200":M===2?"bg-orange-50 text-orange-700 border-orange-100":"bg-slate-50 text-slate-500 border-slate-100"}
                  `,children:M+1}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-slate-900 truncate",children:O.name}),s.jsxs("div",{className:"text-sm font-medium text-slate-500",children:[O.sacos.toLocaleString()," sacos procecesados"]})]})]}),s.jsxs("div",{className:`flex items-center flex-shrink-0 ml-4 px-2.5 py-1 rounded-full text-xs font-bold border ${O.change.startsWith("+")?"bg-emerald-50 text-emerald-700 border-emerald-100":"bg-rose-50 text-rose-700 border-rose-100"}`,children:[O.change.startsWith("+")?s.jsx(Gr,{size:14,strokeWidth:2,className:"mr-1"}):s.jsx(Mh,{size:14,strokeWidth:2,className:"mr-1"}),s.jsx("span",{children:O.change})]})]},M))})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-100 rounded-xl p-6 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[s.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[s.jsx("div",{className:"p-3 bg-white rounded-xl shadow-sm border border-indigo-100 mr-4",children:s.jsx(Zr,{className:"text-indigo-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-indigo-900 text-lg",children:"Envo Masivo por WhatsApp"}),s.jsx("p",{className:"text-indigo-700 text-sm opacity-80",children:"Enve reportes analticos a mltiples clientes simultneamente"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("select",{className:"px-4 py-2.5 bg-white border border-indigo-200 rounded-xl text-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium sm:w-auto shadow-sm",children:[s.jsx("option",{children:"Seleccionar clientes"}),s.jsx("option",{children:"Todos los clientes"}),s.jsx("option",{children:"Clientes activos este mes"}),s.jsx("option",{children:"Clientes especficos"})]}),s.jsxs("button",{className:"px-6 py-2.5 bg-indigo-600 text-white hover:bg-indigo-700 rounded-xl font-medium shadow-sm transition-colors whitespace-nowrap flex items-center justify-center",onClick:j,children:[s.jsx(Zr,{size:18,strokeWidth:1.5,className:"mr-2"}),"Enviar Reportes"]})]})]})})]})},Uy=()=>{const[i,r]=L.useState(""),[n,o]=L.useState("all"),[c,d]=L.useState("all"),[h,m]=L.useState("all"),[p,v]=L.useState(!1),[y,b]=L.useState(!1),[k,S]=L.useState(!1),[_,x]=L.useState(!1),[j,O]=L.useState(!1),[M,$]=L.useState(!1),[J,se]=L.useState(null),[Q,ie]=L.useState(null),[fe,_e]=L.useState(1),De=10,[we,Ee]=L.useState({molinoId:"",tipo:"PREVENTIVO",categoria:"",descripcion:"",prioridad:"MEDIA",fechaProgramada:"",horasEstimadas:4,asignadoA:""}),[he,w]=L.useState({nombre:"",codigo:"",cantidad:1,unidad:"unidades",costoUnitario:0,proveedor:"",motivo:""}),C=[{molinoId:"1",molinoNombre:"Molino I",totalHorasOperacion:12450,ultimoMantenimiento:"2024-01-15",proximoMantenimiento:"2024-02-15",estadoActual:"OPERATIVO",eficiencia:94,historial:[{id:"MT-2024-001",molinoId:"1",molinoNombre:"Molino I",tipo:"PREVENTIVO",categoria:"LUBRICACION",descripcion:"Cambio completo de aceite y filtros",detalleTecnico:"Cambio de aceite ISO VG 320, filtros de entrada y salida. Verificacin de niveles y presin.",estado:"COMPLETADO",fechaProgramada:"2024-01-15",fechaInicio:"2024-01-15 08:00",fechaFin:"2024-01-15 12:30",horasEstimadas:4,horasReales:4.5,asignadoA:"Tcnico Juan Prez",supervisor:"Ing. Carlos Rodrguez",costoEstimado:1500,costoReal:1450,repuestosUtilizados:[{id:"1",nombre:"Aceite ISO VG 320",codigo:"LUB-001",cantidad:120,unidad:"litros",costoUnitario:8.5,proveedor:"Lubritec SA"},{id:"2",nombre:"Filtro de Aceite",codigo:"FIL-005",cantidad:2,unidad:"unidades",costoUnitario:125,proveedor:"Filtros Industriales"}],checklist:[{id:"1",descripcion:"Verificar nivel de aceite",estado:!0,observacion:"OK"},{id:"2",descripcion:"Cambiar filtros",estado:!0,observacion:"Filtros reemplazados"},{id:"3",descripcion:"Verificar fugas",estado:!0,observacion:"Sin fugas"}],observaciones:"Molino funcionando dentro de parmetros normales",prioridad:"MEDIA",impactoProduccion:4.5}]},{molinoId:"2",molinoNombre:"Molino II",totalHorasOperacion:11800,ultimoMantenimiento:"2024-01-10",proximoMantenimiento:"2024-02-10",estadoActual:"MANTENIMIENTO",eficiencia:91,historial:[]},{molinoId:"3",molinoNombre:"Molino III",totalHorasOperacion:13200,ultimoMantenimiento:"2024-01-18",proximoMantenimiento:"2024-02-18",estadoActual:"OPERATIVO",eficiencia:96,historial:[]},{molinoId:"4",molinoNombre:"Molino IV",totalHorasOperacion:11050,ultimoMantenimiento:"2024-01-05",proximoMantenimiento:"2024-02-05",estadoActual:"ESPERA_REPUESTO",eficiencia:89,historial:[]}],G=C.flatMap(P=>P.historial).filter(P=>{const pe=P.molinoNombre.toLowerCase().includes(i.toLowerCase())||P.descripcion.toLowerCase().includes(i.toLowerCase())||P.id.toLowerCase().includes(i.toLowerCase()),ze=n==="all"||P.tipo===n,Rr=c==="all"||P.estado===c,en=h==="all"||P.molinoId===h;return pe&&ze&&Rr&&en}),U=Math.ceil(G.length/De),H=G.slice((fe-1)*De,fe*De),F=P=>{switch(P){case"COMPLETADO":return s.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full flex items-center w-fit",children:[s.jsx(He,{size:12,className:"mr-1"})," Completado"]});case"EN_PROCESO":return s.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full flex items-center w-fit",children:[s.jsx(Er,{size:12,className:"mr-1"})," En Proceso"]});case"PENDIENTE":return s.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full flex items-center w-fit",children:[s.jsx(Ds,{size:12,className:"mr-1"})," Pendiente"]});case"ESPERA_REPUESTO":return s.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full flex items-center w-fit",children:[s.jsx(Er,{size:12,className:"mr-1"})," Espera Repuesto"]});case"CANCELADO":return s.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full flex items-center w-fit",children:[s.jsx(Ht,{size:12,className:"mr-1"})," Cancelado"]});default:return s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:P})}},R=P=>{const pe={PREVENTIVO:"bg-blue-100 text-blue-800",CORRECTIVO:"bg-red-100 text-red-800",PREDICTIVO:"bg-green-100 text-green-800",EMERGENCIA:"bg-orange-100 text-orange-800"};return s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${pe[P]||"bg-gray-100 text-gray-800"}`,children:P})},D=P=>{const pe={BAJA:"bg-gray-100 text-gray-800",MEDIA:"bg-yellow-100 text-yellow-800",ALTA:"bg-orange-100 text-orange-800",CRITICA:"bg-red-100 text-red-800"};return s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${pe[P]||"bg-gray-100 text-gray-800"}`,children:P})},ae=()=>{v(!0)},me=()=>{console.log("Guardando nueva orden:",we),alert(`Nueva orden creada exitosamente para ${Fn.find(P=>P.id===we.molinoId)?.nombre||"Molino"}`),v(!1),Ee({molinoId:"",tipo:"PREVENTIVO",categoria:"",descripcion:"",prioridad:"MEDIA",fechaProgramada:"",horasEstimadas:4,asignadoA:""})},ve=P=>{const pe=C.find(ze=>ze.molinoId===P);ie(pe||null),b(!0)},ge=P=>{se(P),$(!0)},ke=P=>{se(P),v(!0),Ee({molinoId:P.molinoId,tipo:P.tipo,categoria:P.categoria,descripcion:P.descripcion,prioridad:P.prioridad,fechaProgramada:P.fechaProgramada,horasEstimadas:P.horasEstimadas,asignadoA:P.asignadoA})},je=P=>{confirm("Est seguro de eliminar este registro?")&&(console.log("Eliminando registro:",P),alert("Registro eliminado exitosamente"))},Se=()=>{const P=G.map(pe=>({ID:pe.id,Molino:pe.molinoNombre,Tipo:pe.tipo,Descripcin:pe.descripcion,Estado:pe.estado,"Fecha Programada":pe.fechaProgramada,"Horas Reales":pe.horasReales,"Costo Real":pe.costoReal,Asignado:pe.asignadoA}));console.log("Exportando a Excel:",P),alert("Archivo Excel generado. Descargando...")},at=()=>{console.log("Generando PDF del reporte"),alert("Generando documento PDF... Se descargar automticamente.")},ts=()=>{console.log("Imprimiendo reporte");const P=document.querySelector(".bg-white.rounded-2xl.border")?.outerHTML,pe=window.open("","_blank");pe&&(pe.document.write(`
        <html>
          <head>
            <title>Reporte de Mantenimiento</title>
            <style>
              body { font-family: Arial, sans-serif; margin: 20px; }
              table { width: 100%; border-collapse: collapse; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f8f9fa; }
              .badge { padding: 2px 8px; border-radius: 12px; font-size: 12px; }
            </style>
          </head>
          <body>
            <h1>Reporte de Mantenimiento - ${new Date().toLocaleDateString()}</h1>
            ${P||"<p>No hay datos para imprimir</p>"}
          </body>
        </html>
      `),pe.document.close(),pe.print())},ci=()=>{S(!0)},rs=()=>{x(!0)},Xs=()=>{console.log("Solicitando repuesto:",he);const P=he.cantidad*he.costoUnitario;alert(`Repuesto solicitado exitosamente
Total: $${P.toLocaleString()}
Se envi orden de compra a ${he.proveedor}`),x(!1),w({nombre:"",codigo:"",cantidad:1,unidad:"unidades",costoUnitario:0,proveedor:"",motivo:""})},di=()=>{O(!0)},ui=()=>{alert("Abriendo panel de control de stock...")},Ys=()=>{const P="51987654321",pe=encodeURIComponent("Reporte de mantenimiento disponible para revisin");window.open(`https://wa.me/${P}?text=${pe}`,"_blank")},hi=()=>{const P="tecnico@empresa.com",pe=encodeURIComponent("Reporte de Mantenimiento"),ze=encodeURIComponent("Adjunto el reporte de mantenimiento solicitado.");window.open(`mailto:${P}?subject=${pe}&body=${ze}`)},ss=()=>{alert("Generando cdigo QR para el equipo...")},Tr=()=>{console.log("Aplicando filtros:",{filterType:n,filterStatus:c,selectedMill:h,search:i}),alert("Filtros aplicados correctamente")},sr=()=>{r(""),o("all"),d("all"),m("all"),alert("Filtros limpiados")},Zs=()=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Calendario de Mantenimiento"}),s.jsx("p",{className:"text-gray-600",children:"Programacin mensual de actividades"})]}),s.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ht,{size:24})})]}),s.jsxs("div",{className:"p-6 overflow-auto",children:[s.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-6",children:[["Lun","Mar","Mi","Jue","Vie","Sb","Dom"].map(P=>s.jsx("div",{className:"text-center font-medium text-gray-700 p-2",children:P},P)),Array.from({length:31},(P,pe)=>{const ze=pe+1,Rr=[5,10,15,20,25].includes(ze);return s.jsxs("div",{className:`border rounded-lg p-2 h-24 ${Rr?"bg-blue-50":""}`,children:[s.jsx("div",{className:"font-medium text-gray-900",children:ze}),Rr&&s.jsxs("div",{className:"mt-2 text-xs space-y-1",children:[s.jsx("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"M1 PM"}),ze===15&&s.jsx("div",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:"M3 Correccin"})]})]},ze)})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Prximos Mantenimientos Programados"}),[{fecha:"2024-02-05",molino:"Molino IV",tipo:"Preventivo",horas:4},{fecha:"2024-02-10",molino:"Molino II",tipo:"Preventivo",horas:3},{fecha:"2024-02-15",molino:"Molino I",tipo:"Preventivo",horas:5},{fecha:"2024-02-20",molino:"Molino III",tipo:"Correctivo",horas:8}].map((P,pe)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[P.fecha," - ",P.molino]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[P.tipo," - ",P.horas," horas"]})]}),s.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm hover:bg-blue-200",children:"Ver detalles"})]},pe))]})]}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[s.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cerrar"}),s.jsxs("button",{onClick:Se,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center",children:[s.jsx(px,{size:18,className:"mr-2"}),"Exportar Calendario"]})]})]})});return s.jsxs("div",{className:"space-y-6 p-4 md:p-0",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Mantenimiento"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Sistema integral de mantenimiento industrial"})]}),s.jsxs("div",{className:"mt-4 lg:mt-0 flex flex-wrap gap-3",children:[s.jsxs("button",{className:"btn-primary flex items-center whitespace-nowrap",onClick:ae,children:[s.jsx(Ef,{size:18,className:"mr-2"}),"Nueva Orden"]}),s.jsxs("button",{className:"btn-secondary flex items-center whitespace-nowrap",onClick:Se,children:[s.jsx(Ws,{size:18,className:"mr-2"}),"Exportar Excel"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-xl mr-4",children:s.jsx(Zl,{className:"text-blue-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Disponibilidad"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"97.8%"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"MTBF: 415h"}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"97.8%"}})})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-xl mr-4",children:s.jsx(He,{className:"text-green-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Cumplimiento PM"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"94%"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"+3% vs mes anterior"}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"94%"}})})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-xl mr-4",children:s.jsx(Er,{className:"text-orange-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Tiempo Prom. Reparacin"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"2.8h"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"MTTR: 2.8h"}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"85%"}})})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-red-100 rounded-xl mr-4",children:s.jsx(Ds,{className:"text-red-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"rdenes Pendientes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"3 altas prioridad"}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"40%"}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estado de Molinos"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Dashboard operacional en tiempo real"})]}),s.jsx("div",{className:"flex space-x-2 mt-4 md:mt-0",children:s.jsxs("button",{className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium flex items-center",onClick:di,children:[s.jsx(_x,{size:16,className:"mr-2"}),"Configurar"]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map(P=>s.jsxs("div",{className:"border rounded-xl p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mr-3 ${P.estadoActual==="OPERATIVO"?"bg-green-100":P.estadoActual==="MANTENIMIENTO"?"bg-yellow-100":"bg-purple-100"}`,children:s.jsxs("span",{className:`font-bold ${P.estadoActual==="OPERATIVO"?"text-green-700":P.estadoActual==="MANTENIMIENTO"?"text-yellow-700":"text-purple-700"}`,children:["M",P.molinoId]})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:P.molinoNombre}),s.jsx("div",{className:`text-xs font-medium ${P.estadoActual==="OPERATIVO"?"text-green-600":P.estadoActual==="MANTENIMIENTO"?"text-yellow-600":"text-purple-600"}`,children:P.estadoActual.replace("_"," ")})]})]}),s.jsx("button",{onClick:()=>ve(P.molinoId),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:s.jsx(xx,{size:18})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Eficiencia:"}),s.jsxs("span",{className:"font-medium",children:[P.eficiencia,"%"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Horas Operacin:"}),s.jsxs("span",{className:"font-medium",children:[P.totalHorasOperacion.toLocaleString(),"h"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Prximo PM:"}),s.jsx("span",{className:"font-medium",children:P.proximoMantenimiento})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Disponibilidad"}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"98%"}})})]})]},P.molinoId))})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Buscar ID, molino, descripcin...",value:i,onChange:P=>r(P.target.value),className:"input-field pl-10 w-full"})]}),s.jsx("div",{children:s.jsxs("select",{value:n,onChange:P=>o(P.target.value),className:"input-field w-full",children:[s.jsx("option",{value:"all",children:"Todos los tipos"}),s.jsx("option",{value:"PREVENTIVO",children:"Preventivo"}),s.jsx("option",{value:"CORRECTIVO",children:"Correctivo"}),s.jsx("option",{value:"PREDICTIVO",children:"Predictivo"})]})}),s.jsx("div",{children:s.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"input-field w-full",children:[s.jsx("option",{value:"all",children:"Todos los estados"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROCESO",children:"En proceso"}),s.jsx("option",{value:"COMPLETADO",children:"Completado"})]})}),s.jsx("div",{children:s.jsxs("select",{value:h,onChange:P=>m(P.target.value),className:"input-field w-full",children:[s.jsx("option",{value:"all",children:"Todos los molinos"}),Fn&&Fn.map(P=>s.jsx("option",{value:P.id,children:P.nombre},P.id))]})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsxs("button",{className:"px-4 py-2 bg-primary-50 text-primary-700 rounded-lg text-sm font-medium flex items-center whitespace-nowrap",onClick:Tr,children:[s.jsx(Ta,{size:16,className:"inline mr-2"}),"Aplicar filtros"]}),s.jsx("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium whitespace-nowrap",onClick:sr,children:"Limpiar filtros"}),s.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium flex items-center whitespace-nowrap",onClick:ts,children:[s.jsx(Ra,{size:16,className:"inline mr-2"}),"Imprimir"]}),s.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium flex items-center whitespace-nowrap",onClick:at,children:[s.jsx(oi,{size:16,className:"inline mr-2"}),"Generar PDF"]}),s.jsxs("button",{className:"px-4 py-2 bg-green-100 text-green-700 rounded-lg text-sm font-medium flex items-center whitespace-nowrap",onClick:Ys,children:[s.jsx(Zr,{size:16,className:"inline mr-2"}),"Enviar WhatsApp"]}),s.jsxs("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium flex items-center whitespace-nowrap",onClick:hi,children:[s.jsx(jc,{size:16,className:"inline mr-2"}),"Enviar Correo"]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl border overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Molino"}),s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo/Prioridad"}),s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horas/Costo"}),s.jsx("th",{className:"px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:H.length>0?H.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"font-mono text-sm text-gray-900",children:P.id})}),s.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:s.jsxs("span",{className:"font-medium",children:["M",P.molinoId]})}),s.jsx("span",{className:"text-gray-900",children:P.molinoNombre})]})}),s.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[R(P.tipo),D(P.prioridad)]})}),s.jsxs("td",{className:"px-4 md:px-6 py-4",children:[s.jsx("div",{className:"text-gray-900 font-medium",children:P.descripcion}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:P.categoria}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Fecha: ",P.fechaProgramada]})]}),s.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:F(P.estado)}),s.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[P.horasReales,"h"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["$",P.costoReal.toLocaleString()]})]})}),s.jsx("td",{className:"px-4 md:px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",onClick:()=>ge(P),title:"Ver detalle",children:s.jsx(Jn,{size:18})}),s.jsx("button",{className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg",onClick:()=>ke(P),title:"Editar",children:s.jsx(Qn,{size:18})}),s.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",onClick:()=>je(P.id),title:"Eliminar",children:s.jsx(Vs,{size:18})}),s.jsx("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",onClick:ss,title:"Generar QR",children:s.jsx(Ah,{size:18})})]})})]},P.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:"No se encontraron registros de mantenimiento"})})})]})}),U>1&&s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 mb-4 sm:mb-0",children:["Mostrando ",s.jsx("span",{className:"font-medium",children:(fe-1)*De+1})," a"," ",s.jsx("span",{className:"font-medium",children:Math.min(fe*De,G.length)})," de"," ",s.jsx("span",{className:"font-medium",children:G.length})," registros"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>_e(P=>Math.max(P-1,1)),disabled:fe===1,className:"p-2 rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:s.jsx(yc,{size:20})}),Array.from({length:Math.min(5,U)},(P,pe)=>{let ze;return U<=5||fe<=3?ze=pe+1:fe>=U-2?ze=U-4+pe:ze=fe-2+pe,s.jsx("button",{onClick:()=>_e(ze),className:`w-10 h-10 rounded-lg font-medium ${fe===ze?"bg-primary-600 text-white":"border text-gray-700 hover:bg-gray-50"}`,children:ze},ze)}),s.jsx("button",{onClick:()=>_e(P=>Math.min(P+1,U)),disabled:fe===U,className:"p-2 rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:s.jsx(wc,{size:20})})]})]})})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-4 md:p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ds,{className:"text-yellow-600 mr-3",size:20,"md:size":24}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-yellow-900 text-base md:text-lg",children:"Alertas de Mantenimiento"}),s.jsx("p",{className:"text-yellow-700 text-sm",children:"Prximos mantenimientos preventivos programados"})]})]}),s.jsx("button",{className:"btn-secondary mt-4 md:mt-0",onClick:ci,children:"Ver calendario"})]}),s.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:C.map(P=>s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-yellow-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:s.jsxs("span",{className:"font-medium text-yellow-700",children:["M",P.molinoId]})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:P.molinoNombre}),s.jsx("div",{className:"text-sm text-yellow-600",children:"PM Programado"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-yellow-700",children:P.proximoMantenimiento}),s.jsx("div",{className:"text-sm text-gray-500",children:"Fecha"})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[s.jsxs("span",{children:["ltimo PM: ",P.ultimoMantenimiento]}),s.jsx("span",{children:"45 das"})]}),s.jsx("div",{className:"w-full bg-yellow-200 rounded-full h-2",children:s.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"85%"}})})]})]},P.molinoId))})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 md:p-6 border",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestin de Repuestos"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Inventario y seguimiento de componentes"})]}),s.jsxs("div",{className:"flex space-x-2 mt-4 md:mt-0",children:[s.jsxs("button",{className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium flex items-center",onClick:ui,children:[s.jsx(Dt,{size:16,className:"mr-2"}),"Control Stock"]}),s.jsxs("button",{className:"px-3 py-2 bg-primary-50 text-primary-700 rounded-lg text-sm font-medium flex items-center",onClick:rs,children:[s.jsx(zh,{size:16,className:"mr-2"}),"Solicitar Repuesto"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:s.jsx(Xn,{className:"text-blue-600",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Repuestos Crticos"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Stock mnimo"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Pernos M24 Grado 8.8"}),s.jsx("span",{className:"text-sm font-medium text-red-600",children:"3 uds"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Rodamientos 6312-C3"}),s.jsx("span",{className:"text-sm font-medium text-red-600",children:"2 uds"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Aceite ISO VG 320"}),s.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"15 litros"})]})]})]}),s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:s.jsx(He,{className:"text-green-600",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"En Garanta"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Prximos a vencer"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Motor 100HP"}),s.jsx("span",{className:"text-sm font-medium",children:"45 das"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Reductor 1:50"}),s.jsx("span",{className:"text-sm font-medium",children:"60 das"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Sensor de Vibracin"}),s.jsx("span",{className:"text-sm font-medium",children:"30 das"})]})]})]}),s.jsxs("div",{className:"border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-3",children:s.jsx(za,{className:"text-purple-600",size:20})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Prximas Instalaciones"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Programadas"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Sensores Temperatura"}),s.jsx("span",{className:"text-sm font-medium",children:"15/02/2024"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Sistema Monitoreo Online"}),s.jsx("span",{className:"text-sm font-medium",children:"28/02/2024"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"PLC Controlador"}),s.jsx("span",{className:"text-sm font-medium",children:"10/03/2024"})]})]})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[s.jsxs("button",{className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 flex items-center",onClick:ss,children:[s.jsx(Ah,{size:18,className:"mr-2"}),"Generar Cdigos QR"]}),s.jsxs("button",{className:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center",onClick:()=>alert("Generando reporte estadstico..."),children:[s.jsx(Zl,{size:18,className:"mr-2"}),"Estadsticas Avanzadas"]}),s.jsxs("button",{className:"px-4 py-2 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 flex items-center",onClick:()=>alert("Actualizando datos desde ERP..."),children:[s.jsx(Cf,{size:18,className:"mr-2"}),"Sincronizar con ERP"]}),s.jsxs("button",{className:"px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 flex items-center",onClick:()=>alert("Enviando alertas automticas..."),children:[s.jsx(Gn,{size:18,className:"mr-2"}),"Alertas Automticas"]})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:J?"Editar Orden":"Nueva Orden de Mantenimiento"}),s.jsx("p",{className:"text-gray-600",children:"Complete los datos de la orden"})]}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ht,{size:24})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Molino"}),s.jsxs("select",{value:we.molinoId,onChange:P=>Ee({...we,molinoId:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"",children:"Seleccionar molino"}),Fn&&Fn.map(P=>s.jsx("option",{value:P.id,children:P.nombre},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Mantenimiento"}),s.jsxs("select",{value:we.tipo,onChange:P=>Ee({...we,tipo:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"PREVENTIVO",children:"Preventivo"}),s.jsx("option",{value:"CORRECTIVO",children:"Correctivo"}),s.jsx("option",{value:"PREDICTIVO",children:"Predictivo"}),s.jsx("option",{value:"EMERGENCIA",children:"Emergencia"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categora"}),s.jsxs("select",{value:we.categoria,onChange:P=>Ee({...we,categoria:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"",children:"Seleccionar categora"}),s.jsx("option",{value:"LUBRICACION",children:"Lubricacin"}),s.jsx("option",{value:"MECANICO",children:"Mecnico"}),s.jsx("option",{value:"ELECTRICO",children:"Elctrico"}),s.jsx("option",{value:"HIDRAULICO",children:"Hidrulico"}),s.jsx("option",{value:"NEUMATICO",children:"Neumtico"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{value:we.prioridad,onChange:P=>Ee({...we,prioridad:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"BAJA",children:"Baja"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"CRITICA",children:"Crtica"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("input",{type:"text",value:we.descripcion,onChange:P=>Ee({...we,descripcion:P.target.value}),className:"input-field w-full",placeholder:"Ej: Cambio de aceite y filtros"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Programada"}),s.jsx("input",{type:"date",value:we.fechaProgramada,onChange:P=>Ee({...we,fechaProgramada:P.target.value}),className:"input-field w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horas Estimadas"}),s.jsx("input",{type:"number",value:we.horasEstimadas,onChange:P=>Ee({...we,horasEstimadas:parseInt(P.target.value)||0}),className:"input-field w-full",min:"1"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asignado a"}),s.jsxs("select",{value:we.asignadoA,onChange:P=>Ee({...we,asignadoA:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"",children:"Seleccionar tcnico"}),s.jsx("option",{value:"Juan Prez",children:"Juan Prez"}),s.jsx("option",{value:"Carlos Rodrguez",children:"Carlos Rodrguez"}),s.jsx("option",{value:"Pedro Gmez",children:"Pedro Gmez"}),s.jsx("option",{value:"Luis Martnez",children:"Luis Martnez"})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Repuestos Necesarios"}),s.jsx("textarea",{className:"input-field w-full h-32",placeholder:"Liste los repuestos necesarios..."})]})]}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[s.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cancelar"}),s.jsxs("button",{onClick:me,className:"btn-primary flex items-center",children:[s.jsx(Oa,{size:18,className:"mr-2"}),J?"Actualizar Orden":"Crear Orden"]})]})]})}),_&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Solicitud de Repuesto"}),s.jsx("p",{className:"text-gray-600",children:"Complete los datos del repuesto solicitado"})]}),s.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ht,{size:24})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Repuesto"}),s.jsx("input",{type:"text",value:he.nombre,onChange:P=>w({...he,nombre:P.target.value}),className:"input-field w-full",placeholder:"Ej: Perno M24x120 Grado 8.8"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cdigo"}),s.jsx("input",{type:"text",value:he.codigo,onChange:P=>w({...he,codigo:P.target.value}),className:"input-field w-full",placeholder:"Ej: PER-024"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad"}),s.jsx("input",{type:"number",value:he.cantidad,onChange:P=>w({...he,cantidad:parseInt(P.target.value)||0}),className:"input-field w-full",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidad"}),s.jsxs("select",{value:he.unidad,onChange:P=>w({...he,unidad:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"unidades",children:"Unidades"}),s.jsx("option",{value:"litros",children:"Litros"}),s.jsx("option",{value:"kg",children:"Kilogramos"}),s.jsx("option",{value:"metros",children:"Metros"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Costo Unitario ($)"}),s.jsx("input",{type:"number",value:he.costoUnitario,onChange:P=>w({...he,costoUnitario:parseFloat(P.target.value)||0}),className:"input-field w-full",min:"0",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proveedor"}),s.jsxs("select",{value:he.proveedor,onChange:P=>w({...he,proveedor:P.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"",children:"Seleccionar proveedor"}),s.jsx("option",{value:"Tornillera Industrial",children:"Tornillera Industrial"}),s.jsx("option",{value:"Lubritec SA",children:"Lubritec SA"}),s.jsx("option",{value:"SKF Per",children:"SKF Per"}),s.jsx("option",{value:"ABB",children:"ABB"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo de Solicitud"}),s.jsx("textarea",{value:he.motivo,onChange:P=>w({...he,motivo:P.target.value}),className:"input-field w-full h-24",placeholder:"Describa la necesidad del repuesto..."})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-blue-700",children:"Costo Total Estimado"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",(he.cantidad*he.costoUnitario).toLocaleString()]})]}),s.jsxs("div",{className:"text-sm text-blue-700",children:[he.cantidad," ",he.unidad,"  $",he.costoUnitario]})]})})]}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[s.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cancelar"}),s.jsxs("button",{onClick:Xs,className:"btn-primary flex items-center",children:[s.jsx(zh,{size:18,className:"mr-2"}),"Solicitar Repuesto"]})]})]})}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Configuracin del Sistema"}),s.jsx("p",{className:"text-gray-600",children:"Ajustes y parmetros del sistema de mantenimiento"})]}),s.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ht,{size:24})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Parmetros de Mantenimiento"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horas entre mantenimientos preventivos"}),s.jsx("input",{type:"number",className:"input-field w-full",defaultValue:"500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alertas antes del mantenimiento (das)"}),s.jsx("input",{type:"number",className:"input-field w-full",defaultValue:"7"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Notificaciones"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"rounded text-primary-600 mr-2",defaultChecked:!0}),s.jsx("span",{className:"text-sm text-gray-700",children:"Enviar alertas por correo"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"rounded text-primary-600 mr-2",defaultChecked:!0}),s.jsx("span",{className:"text-sm text-gray-700",children:"Notificaciones por WhatsApp"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"rounded text-primary-600 mr-2"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Alertas en tiempo real"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Integraciones"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key ERP"}),s.jsx("input",{type:"password",className:"input-field w-full",placeholder:"Ingrese API key"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook Notificaciones"}),s.jsx("input",{type:"text",className:"input-field w-full",placeholder:"https://webhook.url"})]})]})]})]})}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[s.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cancelar"}),s.jsxs("button",{onClick:()=>{alert("Configuracin guardada exitosamente"),O(!1)},className:"btn-primary flex items-center",children:[s.jsx(Oa,{size:18,className:"mr-2"}),"Guardar Configuracin"]})]})]})}),y&&Q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Historial - ",Q.molinoNombre]}),s.jsx("p",{className:"text-gray-600",children:"Registro completo de intervenciones"})]}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Ht,{size:24})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Horas Total Operacin"}),s.jsxs("div",{className:"text-2xl font-bold",children:[Q.totalHorasOperacion.toLocaleString(),"h"]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Estado Actual"}),s.jsx("div",{className:"text-2xl font-bold",children:Q.estadoActual.replace("_"," ")})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Eficiencia"}),s.jsxs("div",{className:"text-2xl font-bold",children:[Q.eficiencia,"%"]})]})]}),s.jsx("div",{className:"space-y-4",children:Q.historial.map(P=>s.jsxs("div",{className:"border rounded-xl p-4 hover:bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center mb-2 md:mb-0",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mr-3 ${P.tipo==="PREVENTIVO"?"bg-blue-100":"bg-red-100"}`,children:s.jsx(Xn,{size:16,className:P.tipo==="PREVENTIVO"?"text-blue-600":"text-red-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[P.id," - ",P.tipo]}),s.jsx("div",{className:"text-sm text-gray-500",children:P.fechaProgramada})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[F(P.estado),D(P.prioridad)]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"font-medium text-gray-900",children:P.descripcion}),s.jsx("div",{className:"text-gray-600 text-sm mt-1",children:P.detalleTecnico})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Tcnico: ",s.jsx("span",{className:"font-medium",children:P.asignadoA})]}),s.jsxs("span",{className:"text-gray-600",children:["Horas: ",s.jsxs("span",{className:"font-medium",children:[P.horasReales,"h"]})]}),s.jsxs("span",{className:"text-gray-600",children:["Costo: ",s.jsxs("span",{className:"font-medium",children:["$",P.costoReal.toLocaleString()]})]}),s.jsxs("span",{className:"text-gray-600",children:["Impacto: ",s.jsxs("span",{className:"font-medium",children:[P.impactoProduccion,"h"]})]})]}),s.jsxs("button",{onClick:()=>ge(P),className:"mt-3 text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:[s.jsx(Jn,{size:16,className:"mr-1"}),"Ver detalles completos"]})]},P.id))})]}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",children:"Cerrar"}),s.jsxs("button",{onClick:Se,className:"btn-primary flex items-center",children:[s.jsx(Ws,{size:18,className:"mr-2"}),"Exportar Historial"]})]})]})}),k&&s.jsx(Zs,{})]})},Fy=()=>{const[i,r]=L.useState(""),[n,o]=L.useState("all"),[c,d]=L.useState(!1),[h,m]=L.useState({nombre:"",contacto:"",telefono:"",email:"",ruc:"",direccion:"",zona:"",tipoCliente:"",stockInicial:0,tipoMineral:"",observaciones:""}),v=[{id:"1",nombre:"Minera Andina SA",contacto:"Juan Rodrguez",telefono:"+51 987 654 321",email:"contacto@mineraandina.com",stockActual:500,totalSacos:1250,estado:"ACTIVO",zona:"Norte",ultimaCompra:"2024-01-15"},{id:"2",nombre:"Compaa Minerales del Sur",contacto:"Mara Gonzlez",telefono:"+51 987 123 456",email:"ventas@mineralesdelsur.com",stockActual:320,totalSacos:980,estado:"ACTIVO",zona:"Sur",ultimaCompra:"2024-01-16"},{id:"3",nombre:"Empresa Extractora Norte",contacto:"Carlos Lpez",telefono:"+51 987 789 123",email:"info@extractoranorte.com",stockActual:450,totalSacos:890,estado:"INACTIVO",zona:"Norte",ultimaCompra:"2024-01-10"},{id:"4",nombre:"Minerales y Derivados SAC",contacto:"Ana Martnez",telefono:"+51 987 456 789",email:"ana@mineralesysa.com",stockActual:280,totalSacos:1100,estado:"ACTIVO",zona:"Centro",ultimaCompra:"2024-01-14"},{id:"5",nombre:"Sociedad Minera Central",contacto:"Pedro Snchez",telefono:"+51 987 321 654",email:"pedro@mineracentral.com",stockActual:600,totalSacos:750,estado:"ACTIVO",zona:"Centro",ultimaCompra:"2024-01-13"}].filter(_=>{const x=_.nombre.toLowerCase().includes(i.toLowerCase())||_.contacto.toLowerCase().includes(i.toLowerCase()),j=n==="all"||_.estado===n;return x&&j}),y=_=>_==="ACTIVO"?s.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Activo"}):s.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Inactivo"}),b=_=>{const x={Norte:"bg-blue-100 text-blue-800",Sur:"bg-green-100 text-green-800",Centro:"bg-purple-100 text-purple-800",Este:"bg-orange-100 text-orange-800",Oeste:"bg-red-100 text-red-800"};return s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x[_]||"bg-gray-100"}`,children:_})},k=_=>{const{name:x,value:j,type:O}=_.target;m(M=>({...M,[x]:O==="number"?parseFloat(j)||0:j}))},S=_=>{if(_.preventDefault(),!h.nombre||!h.contacto||!h.telefono){alert("Por favor complete los campos obligatorios: Nombre, Contacto y Telfono");return}console.log("Nuevo cliente registrado:",h),alert(`Cliente ${h.nombre} registrado exitosamente!`),m({nombre:"",contacto:"",telefono:"",email:"",ruc:"",direccion:"",zona:"",tipoCliente:"",stockInicial:0,tipoMineral:"",observaciones:""}),d(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Clientes"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Administracin de clientes y stock"})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[s.jsxs("button",{className:"btn-primary flex items-center",onClick:()=>d(!0),children:[s.jsx(Ea,{size:18,className:"mr-2"}),"Nuevo Cliente"]}),s.jsxs("button",{className:"btn-secondary flex items-center",children:[s.jsx(Zr,{size:18,className:"mr-2"}),"Contactar"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-2xl p-6 border",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-xl mr-4",children:s.jsx(Us,{className:"text-blue-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Clientes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"12"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-6 border",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-xl mr-4",children:s.jsx(Dt,{className:"text-green-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Stock Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"2,150"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-6 border",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-xl mr-4",children:s.jsx(Gr,{className:"text-orange-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Clientes Activos"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"8"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-6 border",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-xl mr-4",children:s.jsx(Dt,{className:"text-purple-600",size:24})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Sacos Promedio"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"179"})]})]})})]}),s.jsx("div",{className:"bg-white rounded-2xl p-6 border",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente o contacto...",value:i,onChange:_=>r(_.target.value),className:"input-field pl-10"})]}),s.jsx("div",{children:s.jsxs("select",{value:n,onChange:_=>o(_.target.value),className:"input-field",children:[s.jsx("option",{value:"all",children:"Todos los estados"}),s.jsx("option",{value:"ACTIVO",children:"Activos"}),s.jsx("option",{value:"INACTIVO",children:"Inactivos"})]})}),s.jsx("div",{children:s.jsxs("select",{className:"input-field",children:[s.jsx("option",{value:"all",children:"Todas las zonas"}),s.jsx("option",{value:"Norte",children:"Norte"}),s.jsx("option",{value:"Sur",children:"Sur"}),s.jsx("option",{value:"Centro",children:"Centro"}),s.jsx("option",{value:"Este",children:"Este"}),s.jsx("option",{value:"Oeste",children:"Oeste"})]})}),s.jsx("div",{children:s.jsxs("select",{className:"input-field",children:[s.jsx("option",{children:"Ordenar por: Nombre"}),s.jsx("option",{children:"Ordenar por: Stock"}),s.jsx("option",{children:"Ordenar por: ltima compra"})]})})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(_=>s.jsxs("div",{className:"bg-white rounded-2xl border overflow-hidden card-hover",children:[s.jsx("div",{className:"p-6 border-b border-gray-100",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center",children:s.jsx(Us,{className:"text-primary-600",size:24})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"font-bold text-gray-900",children:_.nombre}),s.jsxs("div",{className:"flex items-center mt-1",children:[y(_.estado),s.jsx("span",{className:"ml-2",children:b(_.zona)})]})]})]})})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[s.jsx(Us,{size:16,className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Contacto"})]}),s.jsx("p",{className:"font-medium text-gray-900",children:_.contacto})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(bx,{size:16,className:"text-gray-400 mr-3"}),s.jsx("span",{className:"text-gray-700",children:_.telefono})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(jc,{size:16,className:"text-gray-400 mr-3"}),s.jsx("span",{className:"text-gray-700",children:_.email})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Stock Actual"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_.stockActual})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-600",children:"Total Sacos"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_.totalSacos})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[s.jsx("span",{children:"Utilizacin de stock"}),s.jsxs("span",{children:[Math.round(_.stockActual/_.totalSacos*100),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${_.stockActual/_.totalSacos*100}%`}})})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[s.jsx("div",{className:"text-sm text-gray-600",children:"ltima compra"}),s.jsx("div",{className:"font-medium text-gray-900",children:_.ultimaCompra})]}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"flex-1 btn-secondary py-2 text-sm",children:"Editar"}),s.jsx("button",{className:"flex-1 btn-primary py-2 text-sm",children:"Contactar"})]})})]})})]},_.id))}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{className:"border-2 border-dashed border-gray-300 hover:border-primary-300 rounded-2xl p-8 w-full max-w-md flex flex-col items-center justify-center transition-colors",onClick:()=>d(!0),children:[s.jsx("div",{className:"w-16 h-16 bg-primary-50 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ea,{className:"text-primary-600",size:32})}),s.jsx("span",{className:"text-lg font-medium text-gray-700",children:"Agregar nuevo cliente"}),s.jsx("span",{className:"text-sm text-gray-500 mt-2",children:"Registre un nuevo cliente en el sistema"})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-4 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-2xl bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(Ea,{className:"mr-3 text-blue-600",size:28}),"Registro de Nuevo Cliente"]}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),s.jsxs("form",{onSubmit:S,children:[s.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto px-2",children:[s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:s.jsx("p",{className:"text-sm text-blue-700",children:"Complete todos los campos para registrar un nuevo cliente. Los campos marcados con * son obligatorios."})}),s.jsxs("div",{className:"border rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Hs,{className:"mr-2 text-blue-600",size:20}),"Informacin Bsica"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre/Razn Social *"}),s.jsx("input",{type:"text",name:"nombre",value:h.nombre,onChange:k,className:"input-field",placeholder:"Ej: Minera Andina SA",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RUC"}),s.jsx("input",{type:"text",name:"ruc",value:h.ruc,onChange:k,className:"input-field",placeholder:"Ej: 20123456789"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contacto Principal *"}),s.jsx("input",{type:"text",name:"contacto",value:h.contacto,onChange:k,className:"input-field",placeholder:"Ej: Juan Rodrguez",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono *"}),s.jsx("input",{type:"tel",name:"telefono",value:h.telefono,onChange:k,className:"input-field",placeholder:"Ej: +51 987 654 321",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",name:"email",value:h.email,onChange:k,className:"input-field",placeholder:"Ej: contacto@empresa.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Cliente"}),s.jsxs("select",{name:"tipoCliente",value:h.tipoCliente,onChange:k,className:"input-field",children:[s.jsx("option",{value:"",children:"Seleccionar tipo"}),s.jsx("option",{value:"MINERO",children:"Minero"}),s.jsx("option",{value:"PALLAQUERO",children:"Pallaquero"}),s.jsx("option",{value:"COMERCIAL",children:"Comercial"}),s.jsx("option",{value:"INDUSTRIAL",children:"Industrial"})]})]})]})]}),s.jsxs("div",{className:"border rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(yx,{className:"mr-2 text-blue-600",size:20}),"Ubicacin"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direccin"}),s.jsx("input",{type:"text",name:"direccion",value:h.direccion,onChange:k,className:"input-field",placeholder:"Ej: Av. Industrial 123"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zona"}),s.jsxs("select",{name:"zona",value:h.zona,onChange:k,className:"input-field",children:[s.jsx("option",{value:"",children:"Seleccionar zona"}),s.jsx("option",{value:"Norte",children:"Norte"}),s.jsx("option",{value:"Sur",children:"Sur"}),s.jsx("option",{value:"Centro",children:"Centro"}),s.jsx("option",{value:"Este",children:"Este"}),s.jsx("option",{value:"Oeste",children:"Oeste"})]})]})]})]}),s.jsxs("div",{className:"border rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Dt,{className:"mr-2 text-blue-600",size:20}),"Informacin de Stock"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Inicial (sacos)"}),s.jsx("input",{type:"number",name:"stockInicial",value:h.stockInicial,onChange:k,className:"input-field",placeholder:"Ej: 500",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Mineral Principal"}),s.jsxs("select",{name:"tipoMineral",value:h.tipoMineral,onChange:k,className:"input-field",children:[s.jsx("option",{value:"",children:"Seleccionar mineral"}),s.jsx("option",{value:"OXIDO",children:"xido"}),s.jsx("option",{value:"SULFURO",children:"Sulfuro"}),s.jsx("option",{value:"MIXTO",children:"Mixto"}),s.jsx("option",{value:"OTRO",children:"Otro"})]})]})]})]}),s.jsxs("div",{className:"border rounded-xl p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(oi,{className:"mr-2 text-blue-600",size:20}),"Observaciones"]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales"}),s.jsx("textarea",{name:"observaciones",value:h.observaciones,onChange:k,className:"input-field min-h-[100px]",placeholder:"Observaciones sobre el cliente, acuerdos especiales, etc."})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center",children:[s.jsx(Ht,{size:18,className:"mr-2"}),"Cancelar"]}),s.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:[s.jsx(Oa,{size:18,className:"mr-2"}),"Registrar Cliente"]})]})]})]})})]})},By=()=>{const[i,r]=L.useState(""),[n,o]=L.useState("all"),[c,d]=L.useState(!1),[h,m]=L.useState(!1),[p,v]=L.useState(!1),[y,b]=L.useState(null),[k,S]=L.useState("create"),[_,x]=L.useState(!1),[j,O]=L.useState({nombre:"",email:"",rol:"OPERADOR",password:"",confirmPassword:"",isActive:!0}),[M,$]=L.useState([{id:"1",nombre:"Juan Prez",email:"juan@molino.com",rol:"ADMIN",isActive:!0,createdAt:new Date("2024-01-01"),lastLogin:new Date("2024-01-15")},{id:"2",nombre:"Mara Gonzlez",email:"maria@molino.com",rol:"OPERADOR",isActive:!0,createdAt:new Date("2024-01-05"),lastLogin:new Date("2024-01-16")},{id:"3",nombre:"Carlos Lpez",email:"carlos@molino.com",rol:"GERENCIA",isActive:!0,createdAt:new Date("2024-01-10"),lastLogin:new Date("2024-01-14")},{id:"4",nombre:"Ana Rodrguez",email:"ana@molino.com",rol:"OPERADOR",isActive:!1,createdAt:new Date("2024-01-12"),lastLogin:new Date("2024-01-13")},{id:"5",nombre:"Pedro Snchez",email:"pedro@molino.com",rol:"OPERADOR",isActive:!0,createdAt:new Date("2024-01-15"),lastLogin:new Date("2024-01-16")}]),J=M.filter(C=>{const V=C.nombre.toLowerCase().includes(i.toLowerCase())||C.email.toLowerCase().includes(i.toLowerCase()),G=n==="all"||C.rol===n;return V&&G}),se=C=>{const V=mf.find(U=>U.value===C);let G="bg-slate-100 text-slate-700 border-slate-200";return C==="ADMIN"?G="bg-violet-50 text-violet-700 border-violet-100":C==="GERENCIA"?G="bg-indigo-50 text-indigo-700 border-indigo-100":G="bg-slate-100 text-slate-700 border-slate-200",s.jsx("span",{className:`px-2.5 py-0.5 text-xs font-semibold rounded-full border ${G}`,children:V?.label||C})},Q=C=>C?s.jsxs("span",{className:"px-2.5 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-100 text-xs font-semibold rounded-full flex items-center w-fit",children:[s.jsx(He,{size:12,className:"mr-1.5",strokeWidth:2}),"Activo"]}):s.jsxs("span",{className:"px-2.5 py-0.5 bg-rose-50 text-rose-700 border border-rose-100 text-xs font-semibold rounded-full flex items-center w-fit",children:[s.jsx(Ex,{size:12,className:"mr-1.5",strokeWidth:2}),"Inactivo"]}),ie=()=>{O({nombre:"",email:"",rol:"OPERADOR",password:"",confirmPassword:"",isActive:!0}),S("create"),d(!0)},fe=C=>{b(C),O({nombre:C.nombre,email:C.email,rol:C.rol,password:"",confirmPassword:"",isActive:C.isActive}),S("edit"),d(!0)},_e=C=>{b(C),m(!0)},De=C=>{b(C),O({nombre:C.nombre,email:C.email,rol:C.rol,password:"",confirmPassword:"",isActive:C.isActive}),v(!0)},we=()=>{y&&($(C=>C.filter(V=>V.id!==y.id)),m(!1),b(null))},Ee=()=>{if(k==="create"){if(j.password.length<6){alert("La contrasea debe tener al menos 6 caracteres");return}if(j.password!==j.confirmPassword){alert("Las contraseas no coinciden");return}const C={id:(M.length+1).toString(),nombre:j.nombre,email:j.email,rol:j.rol,isActive:j.isActive,createdAt:new Date,lastLogin:new Date};$(V=>[...V,C])}else y&&$(C=>C.map(V=>V.id===y.id?{...V,nombre:j.nombre,email:j.email,rol:j.rol,isActive:j.isActive}:V));d(!1),w()},he=()=>{if(!j.password||j.password.length<6){alert("La contrasea debe tener al menos 6 caracteres");return}if(j.password!==j.confirmPassword){alert("Las contraseas no coinciden");return}alert(`Contrasea cambiada para ${y?.nombre}`),v(!1),w()},w=()=>{O({nombre:"",email:"",rol:"OPERADOR",password:"",confirmPassword:"",isActive:!0}),b(null),x(!1)};return s.jsxs("div",{className:"space-y-6 pb-20",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Gestin de Usuarios"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Administracin de usuarios y permisos"})]}),s.jsxs("button",{onClick:ie,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors shadow-sm font-medium mt-4 sm:mt-0",children:[s.jsx(Ea,{size:18,strokeWidth:1.5,className:"mr-2"}),"Nuevo Usuario"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl mr-4 border border-indigo-100",children:s.jsx(Us,{className:"text-indigo-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Usuarios"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:M.length})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl mr-4 border border-emerald-100",children:s.jsx(He,{className:"text-emerald-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Activos"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:M.filter(C=>C.isActive).length})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-violet-50 rounded-xl mr-4 border border-violet-100",children:s.jsx(kx,{className:"text-violet-600",size:24,strokeWidth:1.5})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Administradores"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:M.filter(C=>C.rol==="ADMIN").length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18,strokeWidth:1.5}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:i,onChange:C=>r(C.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all placeholder:text-slate-400"})]}),s.jsx("div",{children:s.jsxs("select",{value:n,onChange:C=>o(C.target.value),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",children:[s.jsx("option",{value:"all",children:"Todos los roles"}),s.jsx("option",{value:"ADMIN",children:"Administrador"}),s.jsx("option",{value:"OPERADOR",children:"Operador"}),s.jsx("option",{value:"GERENCIA",children:"Gerencia"})]})}),s.jsx("div",{children:s.jsxs("select",{className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",children:[s.jsx("option",{children:"Todos los estados"}),s.jsx("option",{children:"Activo"}),s.jsx("option",{children:"Inactivo"})]})})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Usuario"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"ltimo Acceso"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:J.map(C=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3 border border-indigo-200",children:s.jsx("span",{className:"text-indigo-700 font-bold text-sm",children:C.nombre.split(" ").map(V=>V[0]).join("")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-slate-900",children:C.nombre}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Registrado: ",C.createdAt.toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center text-slate-600",children:[s.jsx(jc,{size:16,strokeWidth:1.5,className:"mr-2 text-slate-400"}),C.email]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:se(C.rol)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Q(C.isActive)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-slate-900 font-medium",children:C.lastLogin.toLocaleDateString()}),s.jsx("div",{className:"text-xs text-slate-500",children:C.lastLogin.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>fe(C),className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Editar",children:s.jsx(Qn,{size:18,strokeWidth:1.5})}),s.jsx("button",{onClick:()=>De(C),className:"p-1.5 text-slate-400 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Cambiar contrasea",children:s.jsx(vx,{size:18,strokeWidth:1.5})}),s.jsx("button",{onClick:()=>_e(C),className:"p-1.5 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Eliminar",children:s.jsx(Vs,{size:18,strokeWidth:1.5})})]})})]},C.id))})]})})}),s.jsxs("div",{className:"bg-white rounded-xl p-6 border border-slate-200 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Permisos por Rol"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:mf.map(C=>s.jsxs("div",{className:`border rounded-xl p-5 ${C.value==="ADMIN"?"bg-violet-50/50 border-violet-100":C.value==="GERENCIA"?"bg-indigo-50/50 border-indigo-100":"bg-slate-50/50 border-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold border ${C.value==="ADMIN"?"bg-violet-100 text-violet-700 border-violet-200":C.value==="GERENCIA"?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-slate-200 text-slate-700 border-slate-300"}`,children:s.jsx("span",{children:C.label})}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:M.filter(V=>V.rol===C.value).length})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Permisos:"}),s.jsxs("ul",{className:"space-y-2",children:[C.value==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Acceso completo al sistema"]}),s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Gestin de usuarios"]}),s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Configuracin del sistema"]})]}),C.value==="OPERADOR"&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Registrar moliendas"]}),s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Registrar mantenimiento"]}),s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Ver estado de molinos"]})]}),C.value==="GERENCIA"&&s.jsxs(s.Fragment,{children:[s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Ver reportes y estadsticas"]}),s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Exportar datos"]}),s.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(He,{size:16,className:"text-emerald-500 mr-2",strokeWidth:2}),"Ver dashboard"]})]})]})]})]},C.value))})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-xl border border-slate-200",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6 border-b border-slate-100 pb-4",children:k==="create"?"Nuevo Usuario":"Editar Usuario"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nombre completo"}),s.jsx("input",{type:"text",value:j.nombre,onChange:C=>O({...j,nombre:C.target.value}),className:"input-field w-full",placeholder:"Ej: Juan Prez"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:j.email,onChange:C=>O({...j,email:C.target.value}),className:"input-field w-full",placeholder:"ejemplo@molino.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Rol"}),s.jsxs("select",{value:j.rol,onChange:C=>O({...j,rol:C.target.value}),className:"input-field w-full",children:[s.jsx("option",{value:"OPERADOR",children:"Operador"}),s.jsx("option",{value:"GERENCIA",children:"Gerencia"}),s.jsx("option",{value:"ADMIN",children:"Administrador"})]})]}),k==="create"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:_?"text":"password",value:j.password,onChange:C=>O({...j,password:C.target.value}),className:"input-field w-full pr-10",placeholder:"Mnimo 6 caracteres"}),s.jsx("button",{type:"button",onClick:()=>x(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:_?s.jsx(Ph,{size:18}):s.jsx(Jn,{size:18})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirmar Contrasea"}),s.jsx("input",{type:_?"text":"password",value:j.confirmPassword,onChange:C=>O({...j,confirmPassword:C.target.value}),className:"input-field w-full",placeholder:"Repite la contrasea"})]})]}),s.jsxs("div",{className:"flex items-center pt-2",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:j.isActive,onChange:C=>O({...j,isActive:C.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500 border-slate-300"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-slate-700",children:"Usuario activo"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-4 border-t border-slate-100",children:[s.jsx("button",{onClick:()=>{d(!1),w()},className:"px-4 py-2 text-slate-700 hover:bg-slate-50 rounded-xl font-medium transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-indigo-600 text-white hover:bg-indigo-700 rounded-xl font-medium shadow-sm transition-colors",children:k==="create"?"Crear Usuario":"Guardar Cambios"})]})]})})}),p&&y&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-xl border border-slate-200",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4 border-b border-slate-100 pb-4",children:"Cambiar Contrasea"}),s.jsxs("p",{className:"text-slate-600 mb-6 bg-slate-50 p-3 rounded-lg text-sm border border-slate-100",children:["Ests cambiando la contrasea de ",s.jsx("strong",{children:y.nombre})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nueva Contrasea"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:_?"text":"password",value:j.password,onChange:C=>O({...j,password:C.target.value}),className:"input-field w-full pr-10",placeholder:"Mnimo 6 caracteres"}),s.jsx("button",{type:"button",onClick:()=>x(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:_?s.jsx(Ph,{size:18}):s.jsx(Jn,{size:18})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirmar Nueva Contrasea"}),s.jsx("input",{type:_?"text":"password",value:j.confirmPassword,onChange:C=>O({...j,confirmPassword:C.target.value}),className:"input-field w-full",placeholder:"Repite la contrasea"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-4 border-t border-slate-100",children:[s.jsx("button",{onClick:()=>{v(!1),w()},className:"px-4 py-2 text-slate-700 hover:bg-slate-50 rounded-xl font-medium transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:he,className:"px-4 py-2 bg-amber-600 text-white hover:bg-amber-700 rounded-xl font-medium shadow-sm transition-colors",children:"Cambiar Contrasea"})]})]})})}),h&&y&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl w-full max-w-sm shadow-xl border border-slate-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-14 h-14 bg-red-50 rounded-full flex items-center justify-center mb-4 border border-red-100",children:s.jsx(Vs,{className:"text-red-600",size:24,strokeWidth:1.5})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Eliminar usuario?"}),s.jsxs("p",{className:"text-slate-600 mb-6 text-sm",children:["Ests a punto de eliminar a ",s.jsx("strong",{children:y.nombre}),". Esta accin no se puede deshacer."]})]}),s.jsxs("div",{className:"flex justify-center space-x-3",children:[s.jsx("button",{onClick:()=>{m(!1),b(null)},className:"px-5 py-2.5 text-slate-700 hover:bg-slate-50 rounded-xl font-medium transition-colors border border-slate-200",children:"Cancelar"}),s.jsx("button",{onClick:we,className:"px-5 py-2.5 bg-red-600 text-white hover:bg-red-700 rounded-xl font-medium shadow-sm transition-colors",children:"S, eliminar"})]})]})})})]})};function Wy(){return s.jsx(nx,{children:s.jsxs(X0,{children:[s.jsx(yt,{path:"/login",element:s.jsx(Qx,{})}),s.jsxs(yt,{element:s.jsx(Jx,{}),children:[s.jsx(yt,{path:"/dashboard",element:s.jsx(Ay,{})}),s.jsx(yt,{path:"/moliendas",element:s.jsx(My,{})}),s.jsx(yt,{path:"/registro-molienda",element:s.jsx(Ly,{})}),s.jsx(yt,{path:"/stock",element:s.jsx($y,{})}),s.jsx(yt,{path:"/reportes",element:s.jsx(Dy,{})}),s.jsx(yt,{path:"/mantenimiento",element:s.jsx(Uy,{})}),s.jsx(yt,{path:"/clientes",element:s.jsx(Fy,{})}),s.jsx(yt,{path:"/usuarios",element:s.jsx(By,{})})]}),s.jsx(yt,{path:"/",element:s.jsx(Ql,{to:"/dashboard"})}),s.jsx(yt,{path:"*",element:s.jsx(Ql,{to:"/dashboard"})})]})})}t0.createRoot(document.getElementById("root")).render(s.jsx(ai.StrictMode,{children:s.jsx(Wy,{})}));
